import{Q as I}from"./layout.f54ea114.js";import{Q as m,a as f}from"./QItemLabel.c8d4dbcb.js";import{Q as i,a as q}from"./QTable.e67cb383.js";import{Q as D}from"./QSelect.7b234108.js";import{Q as F,a as P}from"./QTr.b45db15f.js";import{e as h,f as S}from"./useSubBudgets.7ec19619.js";import{T as Y}from"./TablePage.43569ace.js";import{d as E}from"./date.7ee8befc.js";import{F as M}from"./FilePreview.41e280fe.js";import{u as T}from"./useMoney.dbc60660.js";import{j as U,r as c,k as p,l as t,p as b,d as a,q as l,t as n,u as s,aj as C}from"./index.fd322d53.js";import"./use-dark.724c4dc5.js";import"./planeacion.api.6ff597f7.js";import"./index.2cf0d985.js";import"./format.971bd004.js";import"./scroll.86be79e5.js";import"./QList.95d5dd46.js";import"./QCheckbox.09c2ac40.js";import"./QChip.a1dbb620.js";import"./utils.esm.ed5e8086.js";import"./useMutation.esm.35cc447d.js";import"./mutation.esm.8f60915a.js";import"./QCard.b959a5ba.js";import"./QPage.5abcef1e.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./QTooltip.57ec7213.js";import"./QCardSection.64ffc5d5.js";import"./QImg.db37c726.js";import"./QSpace.a559b592.js";const _=E.formatDate,_e=U({__name:"IndexPage",setup(R){const{currencyFormat:g}=T(),v="https://nestjs-boilerplate-production.up.railway.app",{subBudgetRequisitions:w}=h(),{search:y,subBudgetDictionary:V,subBudgetDictionaryIsFetching:N}=S(),k=[{name:"consecutiveId",field:"consecutiveId",label:"ID",align:"left"},{name:"requisition_number",field:"requisition_number",label:"N\xFAm. Requisici\xF3n"},{name:"estimated_amount",field:"estimated_amount",label:"Monto Estimado"},{name:"preparation_date",field:o=>_(o.preparation_date,"YYYY-MM-DD"),label:"Fecha de Preparaci\xF3n",align:"left"},{name:"processing_date",field:o=>_(o.processing_date,"YYYY-MM-DD"),label:"Fecha de Procesamiento",align:"left"},{name:"area",field:o=>o.area.description,label:"\xC1rea",align:"left"},{name:"event",field:o=>o.subBudget.event,label:"Evento",align:"left"},{name:"file",field:"file",label:"Archivo",align:"left"}];c(void 0);const d=c("");async function B(o,r){if(o===""){r();return}r(()=>{y.value=o})}async function Q(o,r){console.log({value:o,initialValue:r})}return(o,r)=>(b(),p(Y,null,{"card-body":t(()=>[a(q,{columns:k,filter:d.value,pagination:{rowsPerPage:20},rows:s(w),title:"Requisiciones","wrap-cells":""},{"top-right":t(()=>[a(I,{modelValue:d.value,"onUpdate:modelValue":r[0]||(r[0]=e=>d.value=e),clearable:"",dense:"",label:"Buscar",outlined:""},null,8,["modelValue"])]),body:t(e=>[a(F,{props:e},{default:t(()=>[a(i,{key:"consecutiveId",props:e},{default:t(()=>[a(m,{class:"text-primary tw-font-bold",clickable:"",to:{name:"sub-budgets.edit.requisition",params:{id:e.row.subBudget.id,reqId:e.row.id}}},{default:t(()=>[a(f,null,{default:t(()=>[l(n((e.rowIndex+1).toString()),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1032,["props"]),a(i,{key:"requisition_number",props:e},{default:t(()=>[l(n(e.row.requisition_number),1)]),_:2},1032,["props"]),a(i,{key:"estimated_amount",props:e},{default:t(()=>[l(n(s(g)(e.row.estimated_amount)),1)]),_:2},1032,["props"]),a(i,{key:"preparation_date",props:e},{default:t(()=>[l(n(e.row.preparation_date),1)]),_:2},1032,["props"]),a(i,{key:"processing_date",props:e},{default:t(()=>[l(n(e.row.processing_date),1)]),_:2},1032,["props"]),a(i,{key:"area",props:e},{default:t(()=>[l(n(e.row.area.description),1)]),_:2},1032,["props"]),a(i,{key:"event",props:e},{default:t(()=>[l(n(e.row.subBudget.event)+" ",1),a(P,{modelValue:e.row.subBudget,"onUpdate:modelValue":u=>e.row.subBudget=u,buttons:"","label-cancel":"Cancelar","label-set":"Guardar",persistent:"",onSave:Q},{default:t(u=>[a(D,{modelValue:u.value,"onUpdate:modelValue":x=>u.value=x,class:"full-width",clearable:"",dense:"","emit-value":"","input-debounce":"600",label:"Evento","map-options":"","option-label":"event","option-value":"id",options:s(V),outlined:"","use-input":"",onFilter:B},{"no-option":t(()=>[a(m,null,{default:t(()=>[a(f,{class:"text-grey"},{default:t(()=>[l(" Sin resultados ")]),_:1})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),a(i,{key:"file",props:e},{default:t(()=>[e.row.file?(b(),p(M,{key:0,"file-url":`${s(v)}/api/files/preview/${e.row.file}`},null,8,["file-url"])):C("",!0)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["filter","rows"])]),_:1}))}});export{_e as default};
