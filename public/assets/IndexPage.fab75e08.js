import{Q as qe}from"./QSpace.873cbd20.js";import{Q as Pe}from"./QToggle.b46b6481.js";import{v as j,h as g,x as A,r as V,c as y,_ as ce,an as xe,aS as Ce,g as W,ah as we,aa as D,I as Fe,ai as Ve,aj as K,ak as z,al as ee,a5 as H,am as X,w as pe,$ as ke,b5 as Qe,J as Te,b6 as ve,y as Y,i as Ie,b7 as me,L as Ae,O as Re,ao as Ue,j as fe,N as De,p as $,k as O,l,d as i,u as F,av as te,b1 as re,q as N,t as E,ap as G,X as I,b8 as Ee,V as Ne,b as $e,s as Oe}from"./index.764f91da.js";import{a as Be,Q as Le}from"./QTable.c2f3088c.js";import{g as ae,s as ne,Q as Ke}from"./QSlideTransition.568f70ba.js";import{c as Me,a as je}from"./format.5c717855.js";import{u as _e}from"./ClosePopup.148b883c.js";import{a as We,Q as ze}from"./QCard.85e6f4b4.js";import{u as He,a as Xe}from"./use-dark.8941baf2.js";import{Q as Ye}from"./QPage.1fc2c1b7.js";import{T as Ge}from"./TablePage.fad92f6b.js";import{P as Je,u as Ze,a as et}from"./usePurchaseOrders.500d6ad4.js";import{a as tt,Q as rt}from"./QForm.249823eb.js";import{Q as T,a as Q,b as M}from"./QItemLabel.aeee3940.js";import{Q as oe}from"./QSelect.2dbe0ba1.js";import{Q as at}from"./QFile.9e5ddc36.js";import{Q as nt}from"./QList.c3267100.js";import{Q as ot}from"./QCardActions.c423be21.js";import{c as ie}from"./index.7adaf3a2.js";import{d as it}from"./useRequisitions.487450b2.js";import{_ as lt}from"./DatePicker.181badbf.js";import{l as ut}from"./layout.885dabeb.js";import{u as st}from"./useSubBudgets.afb7a016.js";import{_ as dt}from"./CardDialog.b2357a92.js";import{F as ct}from"./FilePreview.3b970130.js";import"./scroll.7eebca94.js";import"./QCheckbox.47de988e.js";import"./focus-manager.33224ae2.js";import"./date.dcb0b78e.js";import"./QChip.24db411d.js";import"./utils.esm.73bc7e0b.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./index.2cf0d985.js";import"./QImg.70025582.js";var le=j({name:"QStepperNavigation",setup(e,{slots:a}){return()=>g("div",{class:"q-stepper__nav"},A(a.default))}}),be=j({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:a}){const{proxy:{$q:v}}=W(),_=V(null),n=y(()=>e.stepper.modelValue===e.step.name),t=y(()=>{const r=e.step.disable;return r===!0||r===""}),o=y(()=>{const r=e.step.error;return r===!0||r===""}),u=y(()=>{const r=e.step.done;return t.value===!1&&(r===!0||r==="")}),h=y(()=>{const r=e.step.headerNav,b=r===!0||r===""||r===void 0;return t.value===!1&&e.stepper.headerNav&&b}),q=y(()=>e.step.prefix&&(n.value===!1||e.stepper.activeIcon==="none")&&(o.value===!1||e.stepper.errorIcon==="none")&&(u.value===!1||e.stepper.doneIcon==="none")),m=y(()=>{const r=e.step.icon||e.stepper.inactiveIcon;if(n.value===!0){const b=e.step.activeIcon||e.stepper.activeIcon;return b==="none"?r:b||v.iconSet.stepper.active}if(o.value===!0){const b=e.step.errorIcon||e.stepper.errorIcon;return b==="none"?r:b||v.iconSet.stepper.error}if(t.value===!1&&u.value===!0){const b=e.step.doneIcon||e.stepper.doneIcon;return b==="none"?r:b||v.iconSet.stepper.done}return r}),s=y(()=>{const r=o.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(n.value===!0){const b=e.step.activeColor||e.stepper.activeColor||e.step.color;return b!==void 0?b:r}return r!==void 0?r:t.value===!1&&u.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),f=y(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(s.value!==void 0?` text-${s.value}`:"")+(o.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(q.value===!0?"prefix":"icon"):"")+(n.value===!0?" q-stepper__tab--active":"")+(u.value===!0?" q-stepper__tab--done":"")+(h.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(t.value===!0?" q-stepper__tab--disabled":"")),P=y(()=>e.stepper.headerNav!==!0?!1:h.value);function S(){_.value!==null&&_.value.focus(),n.value===!1&&e.goToPanel(e.step.name)}function c(r){r.keyCode===13&&n.value===!1&&e.goToPanel(e.step.name)}return()=>{const r={class:f.value};h.value===!0&&(r.onClick=S,r.onKeyup=c,Object.assign(r,t.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:a.tabindex||0}));const b=[g("div",{class:"q-focus-helper",tabindex:-1,ref:_}),g("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[g("span",{class:"row flex-center"},[q.value===!0?e.step.prefix:g(ce,{name:m.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const x=[g("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&x.push(g("div",{class:"q-stepper__caption"},e.step.caption)),b.push(g("div",{class:"q-stepper__label q-stepper__line relative-position"},x))}return xe(g("div",r,b),[[Ce,P.value]])}}});function pt(e){const a=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((v,_)=>{const n=parseFloat(v);n&&(a[_]=n)}),a}var vt=we({name:"touch-swipe",beforeMount(e,{value:a,arg:v,modifiers:_}){if(_.mouse!==!0&&D.has.touch!==!0)return;const n=_.mouseCapture===!0?"Capture":"",t={handler:a,sensitivity:pt(v),direction:ae(_),noop:Fe,mouseStart(o){ne(o,t)&&Ve(o)&&(K(t,"temp",[[document,"mousemove","move",`notPassive${n}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(o,!0))},touchStart(o){if(ne(o,t)){const u=o.target;K(t,"temp",[[u,"touchmove","move","notPassiveCapture"],[u,"touchcancel","end","notPassiveCapture"],[u,"touchend","end","notPassiveCapture"]]),t.start(o)}},start(o,u){D.is.firefox===!0&&z(e,!0);const h=ee(o);t.event={x:h.left,y:h.top,time:Date.now(),mouse:u===!0,dir:!1}},move(o){if(t.event===void 0)return;if(t.event.dir!==!1){H(o);return}const u=Date.now()-t.event.time;if(u===0)return;const h=ee(o),q=h.left-t.event.x,m=Math.abs(q),s=h.top-t.event.y,f=Math.abs(s);if(t.event.mouse!==!0){if(m<t.sensitivity[1]&&f<t.sensitivity[1]){t.end(o);return}}else if(m<t.sensitivity[2]&&f<t.sensitivity[2])return;const P=m/u,S=f/u;t.direction.vertical===!0&&m<f&&m<100&&S>t.sensitivity[0]&&(t.event.dir=s<0?"up":"down"),t.direction.horizontal===!0&&m>f&&f<100&&P>t.sensitivity[0]&&(t.event.dir=q<0?"left":"right"),t.direction.up===!0&&m<f&&s<0&&m<100&&S>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&m<f&&s>0&&m<100&&S>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&m>f&&q<0&&f<100&&P>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&m>f&&q>0&&f<100&&P>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(H(o),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Me(),t.styleCleanup=c=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const r=()=>{document.body.classList.remove("no-pointer-events--children")};c===!0?setTimeout(r,50):r()}),t.handler({evt:o,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:u,distance:{x:m,y:f}})):t.end(o)},end(o){t.event!==void 0&&(X(t,"temp"),D.is.firefox===!0&&z(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),o!==void 0&&t.event.dir!==!1&&H(o),t.event=void 0)}};if(e.__qtouchswipe=t,_.mouse===!0){const o=_.mouseCapture===!0||_.mousecapture===!0?"Capture":"";K(t,"main",[[e,"mousedown","mouseStart",`passive${o}`]])}D.has.touch===!0&&K(t,"main",[[e,"touchstart","touchStart",`passive${_.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const v=e.__qtouchswipe;v!==void 0&&(a.oldValue!==a.value&&(typeof a.value!="function"&&v.end(),v.handler=a.value),v.direction=ae(a.modifiers))},beforeUnmount(e){const a=e.__qtouchswipe;a!==void 0&&(X(a,"main"),X(a,"temp"),D.is.firefox===!0&&z(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete e.__qtouchswipe)}});const mt={name:{required:!0},disable:Boolean},ue={setup(e,{slots:a}){return()=>g("div",{class:"q-panel scroll",role:"tabpanel"},A(a.default))}},ft={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},_t=["update:modelValue","beforeTransition","transition"];function bt(){const{props:e,emit:a,proxy:v}=W(),{getCacheWithFn:_}=_e();let n,t;const o=V(null),u=V(null);function h(d){const C=e.vertical===!0?"up":"left";U((v.$q.lang.rtl===!0?-1:1)*(d.direction===C?1:-1))}const q=y(()=>[[vt,h,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),m=y(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),s=y(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),f=y(()=>`--q-transition-duration: ${e.transitionDuration}ms`),P=y(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),S=y(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),c=y(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);pe(()=>e.modelValue,(d,C)=>{const k=w(d)===!0?p(d):-1;t!==!0&&R(k===-1?0:k<p(C)?-1:1),o.value!==k&&(o.value=k,a("beforeTransition",d,C),Te(()=>{a("transition",d,C)}))});function r(){U(1)}function b(){U(-1)}function x(d){a("update:modelValue",d)}function w(d){return d!=null&&d!==""}function p(d){return n.findIndex(C=>C.props.name===d&&C.props.disable!==""&&C.props.disable!==!0)}function B(){return n.filter(d=>d.props.disable!==""&&d.props.disable!==!0)}function R(d){const C=d!==0&&e.animated===!0&&o.value!==-1?"q-transition--"+(d===-1?m.value:s.value):null;u.value!==C&&(u.value=C)}function U(d,C=o.value){let k=C+d;for(;k>-1&&k<n.length;){const L=n[k];if(L!==void 0&&L.props.disable!==""&&L.props.disable!==!0){R(d),t=!0,a("update:modelValue",L.props.name),setTimeout(()=>{t=!1});return}k+=d}e.infinite===!0&&n.length>0&&C!==-1&&C!==n.length&&U(d,d===-1?n.length:-1)}function J(){const d=p(e.modelValue);return o.value!==d&&(o.value=d),!0}function Z(){const d=w(e.modelValue)===!0&&J()&&n[o.value];return e.keepAlive===!0?[g(ve,S.value,[g(c.value===!0?_(P.value,()=>({...ue,name:P.value})):ue,{key:P.value,style:f.value},()=>d)])]:[g("div",{class:"q-panel scroll",style:f.value,key:P.value,role:"tabpanel"},[d])]}function he(){if(n.length!==0)return e.animated===!0?[g(ke,{name:u.value},Z)]:Z()}function Se(d){return n=Qe(A(d.default,[])).filter(C=>C.props!==null&&C.props.slot===void 0&&w(C.props.name)===!0),n.length}function ye(){return n}return Object.assign(v,{next:r,previous:b,goTo:x}),{panelIndex:o,panelDirectives:q,updatePanelsList:Se,updatePanelIndex:J,getPanelContent:he,getEnabledPanels:B,getPanels:ye,isValidPanelName:w,keepAliveProps:S,needsUniqueKeepAliveWrapper:c,goToPanelByOffset:U,goToPanel:x,nextPanel:r,previousPanel:b}}function ge(e){return g("div",{class:"q-stepper__step-content"},[g("div",{class:"q-stepper__step-inner"},A(e.default))])}const se={setup(e,{slots:a}){return()=>ge(a)}};var de=j({name:"QStep",props:{...mt,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:a,emit:v}){const{proxy:{$q:_}}=W(),n=Ie(me,Y);if(n===Y)return console.error("QStep needs to be a child of QStepper"),Y;const{getCacheWithFn:t}=_e(),o=V(null),u=y(()=>n.value.modelValue===e.name),h=y(()=>_.platform.is.ios!==!0&&_.platform.is.chrome===!0||u.value!==!0||n.value.vertical!==!0?{}:{onScroll(s){const{target:f}=s;f.scrollTop>0&&(f.scrollTop=0),e.onScroll!==void 0&&v("scroll",s)}}),q=y(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function m(){const s=n.value.vertical;return s===!0&&n.value.keepAlive===!0?g(ve,n.value.keepAliveProps.value,u.value===!0?[g(n.value.needsUniqueKeepAliveWrapper.value===!0?t(q.value,()=>({...se,name:q.value})):se,{key:q.value},a.default)]:void 0):s!==!0||u.value===!0?ge(a):void 0}return()=>g("div",{ref:o,class:"q-stepper__step",role:"tabpanel",...h.value},n.value.vertical===!0?[g(be,{stepper:n.value,step:e,goToPanel:n.value.goToPanel}),n.value.animated===!0?g(Ke,m):m()]:[m()])}});const gt=/(-\w)/g;function ht(e){const a={};for(const v in e){const _=v.replace(gt,n=>n[1].toUpperCase());a[_]=e[v]}return a}var St=j({name:"QStepper",props:{...He,...ft,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:_t,setup(e,{slots:a}){const v=W(),_=Xe(e,v.proxy.$q),{updatePanelsList:n,isValidPanelName:t,updatePanelIndex:o,getPanelContent:u,getPanels:h,panelDirectives:q,goToPanel:m,keepAliveProps:s,needsUniqueKeepAliveWrapper:f}=bt();Ae(me,y(()=>({goToPanel:m,keepAliveProps:s,needsUniqueKeepAliveWrapper:f,...e})));const P=y(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0?" q-stepper--flat":"")+(e.bordered===!0?" q-stepper--bordered":"")+(_.value===!0?" q-stepper--dark q-dark":"")),S=y(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function c(){const r=A(a.message,[]);if(e.vertical===!0){t(e.modelValue)&&o();const b=g("div",{class:"q-stepper__content"},A(a.default));return r===void 0?[b]:r.concat(b)}return[g("div",{class:S.value},h().map(b=>{const x=ht(b.props);return g(be,{key:x.name,stepper:e,step:x,goToPanel:m})})),r,Ue("div",{class:"q-stepper__content q-panel-parent"},u(),"cont",e.swipeable,()=>q.value)]}return()=>(n(a),g("div",{class:P.value},Re(a.navigation,c())))}});const yt=()=>{const e=V(),a=V(!1);return{isLoading:a,fileToUpload:e,uploadFile:async _=>{if(!e.value)throw new Error("No hay archivo para cargar");a.value=!0;const n=await _(e.value);return a.value=!1,ut.showSuccessNotification("Archivo subido con \xE9xito"),e.value=void 0,n}}},qt=()=>{const{fileToUpload:e,isLoading:a,uploadFile:v}=yt();return{fileToUpload:e,isLoading:a,uploadRequisitionFile:async n=>await v(async o=>{const u=new FormData;u.append("file",o);const{data:h}=await Je.uploadFile(n,u);return h.file_name})}},Pt=fe({__name:"PurchaseOrderForm",props:{purchaseOrder:{default:()=>({order_number:null,reception_date:new Date().toISOString().substring(0,10),requisition_id:null})}},setup(e){const a=e,{uploadRequisitionFile:v,fileToUpload:_,isLoading:n}=qt(),{requisitionsDictionary:t}=it(),{subBudgetReqDictionary:o}=st(),{createPurchaseOrder:u,purchaseOrder:h,purchaseOrderType:q}=Ze(),m={order_number:null,reception_date:new Date().toISOString().substring(0,10),requisition_id:null},s=De(ie(a.purchaseOrder)||ie(m)),f={order_number:[x=>!!x||"El n\xFAmero de orden de compra es requerido",x=>x.length==3||"El n\xFAmero de orden de compra debe tener 3 d\xEDgitos",x=>!isNaN(Number(x))||"El n\xFAmero de orden de compra debe ser un n\xFAmero"],reception_date:[x=>!!x||"La fecha de recepci\xF3n es requerida"],requisition_id:[x=>!!x||"La requisici\xF3n es requerida"]},P=V(),S=V(null),c=V();async function r(){var w,p,B,R;await((w=P.value)==null?void 0:w.validate())&&(await u({requisition_id:(p=S.value)==null?void 0:p.id,order_number:s.order_number,reception_date:s.reception_date}),c.value?(_.value=c.value,await v(h.value.id),(B=P.value)==null||B.reset()):(R=P.value)==null||R.reset())}function b(){s.order_number=null,s.reception_date=new Date().toISOString().substring(0,10),s.requisition_id=null,S.value=null,c.value=void 0}return(x,w)=>($(),O(F(rt),{ref_key:"qPurchaseOrderForm",ref:P,onReset:b,onSubmit:Ee(r,["prevent"])},{default:l(()=>[i(We,null,{default:l(()=>[i(nt,null,{default:l(()=>[i(T,null,{default:l(()=>[i(Q,null,{default:l(()=>[i(tt,{modelValue:s.order_number,"onUpdate:modelValue":w[0]||(w[0]=p=>s.order_number=p),dense:"",label:"N\xFAmero de orden de compra",outlined:"",rules:f.order_number},null,8,["modelValue","rules"])]),_:1})]),_:1}),i(T,null,{default:l(()=>[i(Q,null,{default:l(()=>[i(lt,{modelValue:s.reception_date,"onUpdate:modelValue":w[1]||(w[1]=p=>s.reception_date=p),rules:f.reception_date},null,8,["modelValue","rules"])]),_:1})]),_:1}),i(T,null,{default:l(()=>[F(q)==="PRESUPUESTO"?($(),O(Q,{key:0},{default:l(()=>[i(oe,{modelValue:S.value,"onUpdate:modelValue":w[2]||(w[2]=p=>S.value=p),dense:"",label:"Requisici\xF3n","option-label":p=>`Requisici\xF3n #${p.requisition_number} - ${p.area_description}`,"option-value":"id",options:F(t),outlined:"",rules:f.requisition_id},{option:l(p=>[i(T,te(re(p.itemProps)),{default:l(()=>[i(Q,null,{default:l(()=>[i(M,null,{default:l(()=>[N("Requisici\xF3n #"+E(p.opt.requisition_number),1)]),_:2},1024),i(M,{caption:""},{default:l(()=>[N(E(p.opt.area_description),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","option-label","options","rules"])]),_:1})):G("",!0),F(q)==="SUBPRESUPUESTO"?($(),O(Q,{key:1},{default:l(()=>[i(oe,{modelValue:S.value,"onUpdate:modelValue":w[3]||(w[3]=p=>S.value=p),dense:"",label:"Requisici\xF3n","option-label":p=>`Requisici\xF3n #${p.requisition_number} - ${p.event}`,"option-value":"id",options:F(o),outlined:"",rules:f.requisition_id},{option:l(p=>[i(T,te(re(p.itemProps)),{default:l(()=>[i(Q,null,{default:l(()=>[i(M,null,{default:l(()=>[N("Requisici\xF3n #"+E(p.opt.requisition_number),1)]),_:2},1024),i(M,{caption:""},{default:l(()=>[N(E(p.opt.area_description)+" "+E(p.opt.event),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","option-label","options","rules"])]),_:1})):G("",!0)]),_:1}),i(T,null,{default:l(()=>[i(Q,null,{default:l(()=>[i(at,{modelValue:c.value,"onUpdate:modelValue":w[4]||(w[4]=p=>c.value=p),accept:".jpg, image/*, application/pdf",dense:"",label:"Haga click para subir el archivo o arrastralo aqu\xED",loading:F(n),outlined:"","use-chips":""},{prepend:l(()=>[i(ce,{name:"attach_file"})]),_:1},8,["modelValue","loading"])]),_:1})]),_:1})]),_:1})]),_:1}),i(je),i(ot,{align:"right"},{default:l(()=>[i(I,{color:"primary",label:"Guardar",type:"submit",unelevated:""})]),_:1})]),_:1},8,["onSubmit"]))}});const xt=Oe("div",{class:"q-table__title"},"\xD3rdenes de compra",-1),or=fe({__name:"IndexPage",setup(e){const a="https://nestjs-boilerplate-production.up.railway.app",v=Ne(),_=v.currentRoute.value,{isLoading:n,isFetching:t,orders:o,fromSubBudgetsModel:u,purchaseOrderType:h}=et(),q=[{name:"order_number",field:"order_number",label:"N\xFAmero de orden de compra",align:"center",sortable:!0},{name:"reception_date",field:"reception_date",label:"Fecha de recepci\xF3n",sortable:!0,align:"left"},{name:"requisition",field:S=>{var c;return(c=S.requisition)==null?void 0:c.requisition_number},label:"Requisici\xF3n",sortable:!0,align:"center"},{name:"file",field:"file",label:"Archivo",sortable:!1,align:"left"}],m=V(!1),s=V(1);pe(u,S=>{v.replace({query:{..._.query,fromSubBudgets:S.toString()}})});const f=y(()=>h.value===""?"Selecciona un tipo de orden de compra":h.value==="PRESUPUESTO"?"Presupuesto":"SubPresupuesto");function P(S){h.value=S,s.value=2}return(S,c)=>($(),O(Ye,null,{default:l(()=>[i(Ge,null,{"card-body":l(()=>[i(Be,{columns:q,loading:F(n)||F(t),rows:F(o),title:"\xD3rdenes de compra"},{top:l(()=>[xt,i(qe),i(Pe,{modelValue:F(u),"onUpdate:modelValue":c[0]||(c[0]=r=>$e(u)?u.value=r:null),class:"tw-mr-4",label:"Mostrar las \xF3rdenes de compra de los SubPresupuestos"},null,8,["modelValue"]),i(I,{color:"primary",label:"Nueva orden de compra",onClick:c[1]||(c[1]=r=>m.value=!0)})]),"body-cell-file":l(r=>[i(Le,{props:r},{default:l(()=>[r.value?($(),O(ct,{key:0,"file-url":`${F(a)}/api/files/purchase-orders/${r.id}/${r.value}`},{activator:l(({showPreview:b})=>[i(I,{color:"primary",flat:"","no-caps":"",onClick:b},{default:l(()=>[N(" Ver archivo ")]),_:2},1032,["onClick"])]),_:2},1032,["file-url"])):G("",!0)]),_:2},1032,["props"])]),_:1},8,["loading","rows"])]),footer:l(()=>[i(dt,{modelValue:m.value,"onUpdate:modelValue":c[6]||(c[6]=r=>m.value=r),"card-title":"Orden de Compra",class:"form-purchase-order"},{default:l(()=>[i(St,{modelValue:s.value,"onUpdate:modelValue":c[5]||(c[5]=r=>s.value=r),animated:"",color:"primary",vertical:""},{default:l(()=>[i(de,{done:s.value>1,icon:"settings",name:1,title:"Selecciona un tipo de orden de compra"},{default:l(()=>[i(le,{class:"tw-flex tw-gap-1"},{default:l(()=>[i(I,{color:"primary",label:"Presupuesto",outline:"",onClick:c[2]||(c[2]=r=>P("PRESUPUESTO"))}),i(I,{color:"primary",label:"SubPresupuesto",outline:"",onClick:c[3]||(c[3]=r=>P("SUBPRESUPUESTO"))})]),_:1})]),_:1},8,["done"]),i(de,{caption:F(f),done:s.value>2,icon:"create_new_folder",name:2,title:"Crear Orden de Compra"},{default:l(()=>[i(ze,{bordered:"",flat:""},{default:l(()=>[i(Pt)]),_:1}),i(le,null,{default:l(()=>[i(I,{color:"primary",flat:"",label:"atr\xE1s",onClick:c[4]||(c[4]=r=>{s.value=1,h.value=""})})]),_:1})]),_:1},8,["caption","done"])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});export{or as default};
