import{j as E,M as g,r as _,c as y,p as N,k as T,l as a,d as e,X as b,u as d,w as q,_ as F,q as h,t as B,s as L,O as $}from"./index.33aee9c3.js";import{Q as A}from"./QInput.bc534865.js";import{Q as I,a as D}from"./QTable.71d6b359.js";import{T as M}from"./TablePage.1ebf5b06.js";import{u as P,a as j,b as z}from"./useAreas.55ebc772.js";import{Q as S,a as k}from"./QItem.3270a199.js";import{Q as G}from"./QList.1e036a38.js";import{Q as O}from"./QCardSection.2089956e.js";import{a as X}from"./QMenu.746f001c.js";import{Q as H}from"./QCardActions.ddbe4808.js";import{c as U}from"./index.7adaf3a2.js";import{Q as J}from"./QForm.05da6a20.js";import{u as K}from"./BudgetResource.3a0abb0c.js";import{_ as R}from"./CardDialog.f8593b25.js";import"./use-key-composition.b1866cfc.js";import"./use-dark.a42b1db8.js";import"./focus-manager.387b0375.js";import"./QSelect.bc9b930f.js";import"./format.9dfa61a7.js";import"./scroll.5632c0ea.js";import"./QItemLabel.b3a0c01c.js";import"./QCheckbox.685522c0.js";import"./QCard.e44cba30.js";import"./QPage.6112cc6b.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./layout.880d2741.js";import"./useDictionaries.7e8b172d.js";import"./useQuery.esm.08e598e9.js";import"./utils.esm.aa7cdc1a.js";import"./useMutation.esm.5aff8292.js";import"./mutation.esm.9a94c1b8.js";import"./index.2cf0d985.js";import"./QSpace.3bc606e8.js";import"./MyCardTitle.c7481455.js";const W=E({__name:"AreaForm",props:{area:null},setup(C){const u=C,x=K(),{fetchAreaDictionary:f}=x,{areaStoreMutations:i}=P(),{isLoading:Q}=i,{areaUpdateMutations:s}=j(),{isLoading:V}=s,c=g({description:"",alias:""}),r=g(U(u.area||c)),p=_(),w={description:[v=>!!v||"El nombre es requerido"]},l=y(()=>u.area&&"id"in u.area);y(()=>l.value?"Editar \xE1rea":"Agregar \xE1rea");async function o(){var n,m;!await((n=p.value)==null?void 0:n.validate())||(l.value?(await s.mutateAsync(r),await t()):(await i.mutateAsync(r),r.description="",r.alias="",(m=p.value)==null||m.reset(),await t()))}async function t(){await f()}return(v,n)=>(N(),T(d(J),{ref_key:"areaForm",ref:p,class:"q-gutter-md"},{default:a(()=>[e(O,null,{default:a(()=>[e(G,null,{default:a(()=>[e(S,null,{default:a(()=>[e(k,null,{default:a(()=>[e(A,{modelValue:r.description,"onUpdate:modelValue":n[0]||(n[0]=m=>r.description=m),dense:"",label:"Nombre",outlined:"",rules:w.description},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(S,null,{default:a(()=>[e(k,null,{default:a(()=>[e(A,{modelValue:r.alias,"onUpdate:modelValue":n[1]||(n[1]=m=>r.alias=m),dense:"",label:"Alias",outlined:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(X),e(H,{align:"right"},{default:a(()=>[e(b,{color:"primary",label:"Guardar",loading:d(Q)||d(V),onClick:o},null,8,["loading"])]),_:1})]),_:1},512))}}),Y={class:"q-gutter-sm"},qe=E({__name:"IndexPage",setup(C){const{data:u,isLoading:x}=z(),f=_(""),i=_(!1),Q=[{name:"consecutiveId",field:"consecutiveId",label:"#",sortable:!1,align:"left"},{name:"description",field:"description",label:"Nombre",sortable:!0,align:"left"},{name:"alias",field:"alias",label:"Alias",sortable:!1,align:"left"},{name:"action",align:"center",label:"Acciones",field:"action",sortable:!1}];let s=g({description:"",alias:""});const V=g({description:"",alias:""}),c=_(-1),r=y(()=>c.value===-1?"Nueva \xC1rea":"Editar \xC1rea");q(i,l=>{l||w()});function p(l){var o;c.value=(o=u.value)==null?void 0:o.findIndex(t=>t.id===l.id),s.description=l.description,s.alias=l.alias,s.id=l.id,i.value=!0}function w(){i.value=!1,$(()=>{s=U(V),c.value=-1})}return(l,o)=>(N(),T(M,null,{"card-body":a(()=>[e(D,{columns:Q,loading:d(x),rows:d(u),"rows-per-page-options":[20,30,40,50],title:"\xC1reas"},{"top-right":a(()=>[e(b,{class:"q-mr-xs",color:"primary",icon:"add",label:"Nueva \xC1rea",outline:"",onClick:o[0]||(o[0]=t=>i.value=!0)}),e(A,{modelValue:f.value,"onUpdate:modelValue":o[1]||(o[1]=t=>f.value=t),class:"q-mr-xs",debounce:"300",dense:"",outlined:"",placeholder:"Search"},{append:a(()=>[e(F,{name:"search"})]),_:1},8,["modelValue"]),e(b,{color:"primary","icon-right":"archive",label:"Exportar CSV","no-caps":""})]),"body-cell-consecutiveId":a(t=>[e(I,{props:t},{default:a(()=>[h(B(t.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-action":a(t=>[e(I,{props:t},{default:a(()=>[L("div",Y,[e(b,{color:"primary",dense:"",flat:"",icon:"edit",rounded:"",size:"sm",onClick:v=>p(t.row)},null,8,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["loading","rows"])]),footer:a(()=>[e(R,{modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=t=>i.value=t),"card-title":d(r)},{default:a(()=>[e(W,{area:d(s)},null,8,["area"])]),_:1},8,["modelValue","card-title"])]),_:1}))}});export{qe as default};
