import{p as a}from"./planeacion.api.ed726f7c.js";import{l as n}from"./layout.4621ed06.js";import{a as d,u as h}from"./QChip.d1193308.js";import{u as y}from"./useMutation.esm.de042098.js";import{r as p,w as m}from"./index.526cf529.js";var o={getPurchaseOrders(r){return r?a.get("/purchase-orders/requisition-sub-budget"):a.get("/purchase-orders")},createPurchaseOrder(r){return a.post("/purchase-orders",r)},createPurchaseOrderFromRequisition(r){return a.post("/purchase-orders/requisition-sub-budget",r)},uploadFile(r,e){return a.post(`/files/purchase-orders/${r}`,e,{headers:{"Content-Type":"multipart/form-data"}})},getPurchaseDictionary(){return a.get("/purchase-orders/dictionary")}};const t=p(!1),i=p(""),l=async r=>{const{data:e}=await o.getPurchaseOrders(r);return e},g=async r=>{const{data:e}=i.value==="PRESUPUESTO"?await o.createPurchaseOrder(r):await o.createPurchaseOrderFromRequisition(r);return e},O=async()=>{const{data:r}=await o.getPurchaseDictionary();return r},b=()=>{const r=d(),{isLoading:e,isError:s,data:u,isFetching:c,refetch:P}=h({queryKey:["purchase-orders"],queryFn:()=>l(t.value),staleTime:1e3*60});return m(t,async()=>{await r.invalidateQueries(["purchase-orders"])}),{isLoading:e,isError:s,orders:u,isFetching:c,fromSubBudgetsModel:t,purchaseOrderType:i}},v=()=>{const r=d(),{isLoading:e,isError:s,mutateAsync:u,data:c}=y({mutationFn:g,onSuccess:async()=>{n.showSuccessNotification("Orden de compra creada con \xE9xito"),await r.invalidateQueries(["purchase-orders"])},onError:()=>{n.showErrorNotification("Error al crear orden de compra")}});return{purchaseOrder:c,createPurchaseOrder:u,isLoading:e,isError:s,fromSubBudgetsModel:t,purchaseOrderType:i}},C=()=>{const{isLoading:r,isError:e,data:s}=h({queryKey:["purchase-dictionary"],queryFn:O,staleTime:6e4});return{isLoading:r,isError:e,dictionary:s}};export{o as P,b as a,C as b,v as u};
