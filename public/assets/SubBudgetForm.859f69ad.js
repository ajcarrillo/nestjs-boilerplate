import{Q as p}from"./QSelect.3bb31b5f.js";import{Q as i,a as d}from"./QItemLabel.7fed4ad0.js";import{Q as r}from"./QInput.0f74b52d.js";import{Q as k}from"./QCheckbox.cc510596.js";import{Q as F}from"./QList.2e5bba7a.js";import{Q as j}from"./QCardSection.0d056ee7.js";import{a as B}from"./format.d9f81dde.js";import{j as S,V as w,M as A,r as C,p as M,k as D,l as t,d as e,u as s,X as I,b9 as P}from"./index.14e8ebb5.js";import{Q as W}from"./QCardActions.dee82ce4.js";import{Q as L}from"./QForm.4ada3f4b.js";import{_ as b}from"./DatePicker.ef7c594a.js";import{u as N}from"./useDictionaries.6e55a643.js";import{c as R,d as G}from"./useSubBudgets.bf228bfc.js";const ae=S({__name:"SubBudgetForm",props:{populateWith:{default:null},isEditing:{type:Boolean,default:!1}},setup(V,{emit:J}){const m=V,c=w(),{areaDictionary:v,lineDictionary:g,actionDictionary:E}=N(),{createSubBudgetMutation:Q}=R(),{updateSubBudgetMutation:x}=G(),q={action_id:void 0,line_id:void 0,department_id:"",benefited_population:"",objective:"",cost_per_participant:0,number_participants:0,event:"",event_venue:"",justification:"",start_date:"",end_date:"",amount:0,vat_breakdown:!1,risk:""},u=A(m.populateWith||q),f=C(),n={action_id:[l=>!!l||"El campo acci\xF3n es requerido"],line_id:[l=>!!l||"El campo partida es requerido"],department_id:[l=>!!l||"El campo \xE1rea es requerido"],benefited_population:[l=>!!l||"El campo poblaci\xF3n beneficiada es requerido"],objective:[l=>!!l||"El campo objetivo es requerido"],cost_per_participant:[l=>!!l||"El campo costo por participante es requerido"],number_participants:[l=>!!l||"El campo n\xFAmero de participantes es requerido"],event:[l=>!!l||"El campo evento es requerido"],event_venue:[l=>!!l||"El campo lugar del evento es requerido"],justification:[l=>!!l||"El campo justificaci\xF3n es requerido"],start_date:[l=>!!l||"El campo fecha de inicio es requerido"],end_date:[l=>!!l||"El campo fecha de fin es requerido"],amount:[l=>l!=null&&l!==""||"El campo monto es requerido",l=>l>=0||"El campo monto debe ser igual o mayor a 0"],vat_breakdown:[l=>l||"El campo desglose de IVA es requerido"],risk:[l=>!!l||"El campo riesgo es requerido"]};async function y(){var a,o,_;if(await((a=f.value)==null?void 0:a.validate()))if(m.isEditing){const U=(_=(o=m.populateWith)==null?void 0:o.id)!=null?_:"";await x.mutateAsync({subBudgetId:U,updateSubBudgetDto:u})}else await Q.mutateAsync(u),await c.push({name:"sub-budgets"})}return(l,a)=>(M(),D(s(L),{ref_key:"qSubBudgetForm",ref:f,onSubmit:P(y,["prevent"])},{default:t(()=>[e(j,null,{default:t(()=>[e(F,null,{default:t(()=>[e(i,null,{default:t(()=>[e(d,null,{default:t(()=>[e(p,{modelValue:u.action_id,"onUpdate:modelValue":a[0]||(a[0]=o=>u.action_id=o),dense:"","emit-value":!0,label:"Acci\xF3n","map-options":"",options:s(E),outlined:"",rules:n.action_id},null,8,["modelValue","options","rules"])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,null,{default:t(()=>[e(p,{modelValue:u.line_id,"onUpdate:modelValue":a[1]||(a[1]=o=>u.line_id=o),dense:"","emit-value":!0,label:"Partida","map-options":"",options:s(g),outlined:"",rules:n.line_id},null,8,["modelValue","options","rules"])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,null,{default:t(()=>[e(p,{modelValue:u.department_id,"onUpdate:modelValue":a[2]||(a[2]=o=>u.department_id=o),dense:"","emit-value":!0,label:"\xC1rea","map-options":"","option-label":"full_description",options:s(v),outlined:"",rules:n.department_id},null,8,["modelValue","options","rules"])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,null,{default:t(()=>[e(r,{modelValue:u.benefited_population,"onUpdate:modelValue":a[3]||(a[3]=o=>u.benefited_population=o),dense:"",label:"Poblaci\xF3n Beneficiada",outlined:"",rules:n.benefited_population},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,null,{default:t(()=>[e(r,{modelValue:u.objective,"onUpdate:modelValue":a[4]||(a[4]=o=>u.objective=o),dense:"",label:"Objetivo",outlined:"",rules:n.objective,type:"textarea"},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,null,{default:t(()=>[e(r,{modelValue:u.cost_per_participant,"onUpdate:modelValue":a[5]||(a[5]=o=>u.cost_per_participant=o),modelModifiers:{number:!0},dense:"",label:"Costo Por Participante",outlined:"",rules:n.cost_per_participant},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,null,{default:t(()=>[e(r,{modelValue:u.number_participants,"onUpdate:modelValue":a[6]||(a[6]=o=>u.number_participants=o),modelModifiers:{number:!0},dense:"",label:"N\xFAmero de Participantes",outlined:"",rules:n.number_participants,type:"number"},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,null,{default:t(()=>[e(r,{modelValue:u.event,"onUpdate:modelValue":a[7]||(a[7]=o=>u.event=o),dense:"",label:"Evento",outlined:"",rules:n.event},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,null,{default:t(()=>[e(r,{modelValue:u.event_venue,"onUpdate:modelValue":a[8]||(a[8]=o=>u.event_venue=o),dense:"",label:"Lugar del Evento",outlined:"",rules:n.event_venue},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,null,{default:t(()=>[e(r,{modelValue:u.justification,"onUpdate:modelValue":a[9]||(a[9]=o=>u.justification=o),dense:"",label:"Justificaci\xF3n",outlined:"",rules:n.justification,type:"textarea"},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,null,{default:t(()=>[e(b,{modelValue:u.start_date,"onUpdate:modelValue":a[10]||(a[10]=o=>u.start_date=o),label:"Fecha de Inicio",rules:n.start_date},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,null,{default:t(()=>[e(b,{modelValue:u.end_date,"onUpdate:modelValue":a[11]||(a[11]=o=>u.end_date=o),label:"Fecha de Fin",rules:n.end_date},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,null,{default:t(()=>[e(r,{modelValue:u.amount,"onUpdate:modelValue":a[12]||(a[12]=o=>u.amount=o),modelModifiers:{number:!0},dense:"","input-class":"tw-text-right",label:"Monto",min:"0",outlined:"",rules:n.amount,step:"1",type:"number"},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,null,{default:t(()=>[e(k,{modelValue:u.vat_breakdown,"onUpdate:modelValue":a[13]||(a[13]=o=>u.vat_breakdown=o),dense:"",label:"Desglose de IVA",outlined:"",rules:n.vat_breakdown},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,null,{default:t(()=>[e(r,{modelValue:u.risk,"onUpdate:modelValue":a[14]||(a[14]=o=>u.risk=o),dense:"",label:"Riesgo",outlined:"",rules:n.risk,type:"textarea"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),e(B),e(W,{align:"right"},{default:t(()=>[e(I,{color:"primary",label:"Guardar",type:"submit"})]),_:1})]),_:1},8,["onSubmit"]))}});export{ae as _};
