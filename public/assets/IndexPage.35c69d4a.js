import{j as h,r as m,k as p,l as o,n as C,p as f,d as t,_ as P,X as d,aj as Q,q as T,t as B,u as r,ah as N}from"./index.98b8b759.js";import{Q as R}from"./QInput.654fe12c.js";import{Q as n,a as $}from"./QTable.d88fa6dd.js";import{b as A,c as j}from"./useRequisitions.d4db3724.js";import{T as U}from"./TablePage.b97e6ae5.js";import{F as z}from"./FilePreview.b238a1f3.js";import{u as E}from"./useMoney.dbc60660.js";import{_ as L}from"./DeleteCardDialog.9c2f9e8e.js";import"./use-key-composition.9c45f4e0.js";import"./use-dark.e1c6b971.js";import"./focus-manager.387b0375.js";import"./QMenu.cf460894.js";import"./scroll.88f85743.js";import"./QList.1c19b31b.js";import"./QSelect.52656c1a.js";import"./format.a9e04108.js";import"./QItem.dd8e4c40.js";import"./QItemLabel.f1939688.js";import"./QCheckbox.5d40bfc9.js";import"./BudgetResource.6b2552bc.js";import"./index.2cf0d985.js";import"./layout.893a0074.js";import"./useQuery.esm.dd222c7d.js";import"./utils.esm.b39882c3.js";import"./useMutation.esm.70a0cd22.js";import"./mutation.esm.5a13a832.js";import"./QCard.4a0a1869.js";import"./QPage.7ce3cb7c.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./QTooltip.4e08d7c4.js";import"./QCardSection.1ab4d301.js";import"./QImg.2baf3f5a.js";import"./QSpace.607074b7.js";import"./QBanner.c6c95487.js";import"./MyCardTitle.050f6f22.js";const ke=h({__name:"IndexPage",setup(M){const b="https://nestjs-boilerplate-production.up.railway.app",{isLoading:_,requisitions:g}=A(),{currencyFormat:v}=E(),q=[{name:"consecutiveId",label:"ID",field:"consecutiveId",sortable:!1,required:!0},{name:"requisition_number",field:"requisition_number",label:"N\xFAmero de requisici\xF3n",align:"center",sortable:!0},{name:"area",field:i=>{var l;return(l=i.area)==null?void 0:l.description},label:"Departamento",align:"left",sortable:!0},{name:"preparation_date",field:"preparation_date",label:"Fecha de elaboraci\xF3n",sortable:!0,align:"left"},{name:"processing_date",field:"processing_date",label:"Fecha de tr\xE1mite",sortable:!0,align:"left"},{name:"total",field:i=>v(+i.estimated_amount),label:"Total",sortable:!0,align:"right"},{name:"file",field:"file",label:"Archivo",sortable:!1,align:"left"},{name:"actions",field:"actions",label:"Acciones",sortable:!1,align:"center"}],s=m(""),w=[20,30,40,50],u=m(void 0),a=m(!1),{deleteRequisitionMutation:D,isDeleting:x,isDeletingError:S}=j();function y({href:i}){return{to:i}}function F(i){u.value=i,a.value=!0}async function I(){await D({id:u.value}),k()}function k(){a.value=!1,u.value=void 0}return(i,l)=>{const V=C("router-link");return f(),p(U,null,{"card-body":o(()=>[t($,{columns:q,filter:s.value,loading:r(_),rows:r(g),"rows-per-page-options":w,title:"Requisiciones"},{"top-right":o(()=>[t(R,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),class:"q-mr-xs",clearable:"",debounce:"300",dense:"",outlined:"",placeholder:"Buscar"},{append:o(()=>[t(P,{name:"search"})]),_:1},8,["modelValue"]),t(d,{color:"primary",icon:"o_add",label:"Nueva requisici\xF3n",outline:"",size:"md",to:{name:"requisitions.create"}},null,8,["to"])]),"body-cell-requisition_number":o(e=>[t(n,{props:e},{default:o(()=>[t(V,{custom:"",to:{name:"requisitions.edit",params:{id:e.row.id}}},{default:o(c=>[t(d,Q(y(c),{color:"primary",flat:"",label:e.row.requisition_number,size:"md"}),null,16,["label"])]),_:2},1032,["to"])]),_:2},1032,["props"])]),"body-cell-consecutiveId":o(e=>[t(n,{props:e},{default:o(()=>[T(B((e.rowIndex+1).toString()),1)]),_:2},1032,["props"])]),"body-cell-file":o(e=>[t(n,{props:e},{default:o(()=>[e.row.file?(f(),p(z,{key:0,"file-url":`${r(b)}/api/files/requisitions/${e.row.id}/${e.row.file}`},null,8,["file-url"])):N("",!0)]),_:2},1032,["props"])]),"body-cell-actions":o(e=>[t(n,{props:e},{default:o(()=>[t(d,{color:"negative",flat:"",icon:"delete",round:"",onClick:c=>F(e.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["filter","loading","rows"])]),footer:o(()=>[t(L,{modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value=e),"card-title":"\xBFDesea eliminar la requisici\xF3n?",deleting:r(x),onConfirmDelete:I},null,8,["modelValue","deleting"])]),_:1})}}});export{ke as default};
