import{Q as f,a as v}from"./QTable.0ad6c918.js";import{i as w,b6 as x,j as b,r as d,p as g,ae as Q,d as e,l as r,u,X as _,k as B,s as C}from"./index.c148c0c6.js";import{T as h}from"./TablePage.8ac86ae8.js";import{u as I,a as F}from"./useBudgetCaps.ce549323.js";import{u as T}from"./useMoney.dbc60660.js";import{_ as V}from"./ShortUuidLink.d6d69669.js";import{Q as q}from"./QSelect.48bd3f96.js";import{Q as A}from"./QInput.e430ec3b.js";import{Q as S}from"./QForm.667ad4d7.js";import{Q as $}from"./QCard.029ff02f.js";import{Q as N}from"./QExpansionItem.6e9425a7.js";import"./QMenu.f4712139.js";import"./use-dark.74ed7cd3.js";import"./focus-manager.387b0375.js";import"./scroll.789d8182.js";import"./QList.21f703e4.js";import"./QCheckbox.93825cb8.js";import"./use-key-composition.2fce6913.js";import"./QPage.d291ee07.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./BudgetResource.04074e95.js";import"./index.2cf0d985.js";import"./layout.49dbfba7.js";import"./useQuery.esm.9d8865ca.js";import"./utils.esm.6708c4fa.js";import"./useMutation.esm.c5d42c0d.js";import"./mutation.esm.b17910c4.js";import"./QItem.2533442d.js";import"./format.2ad21e77.js";import"./QItemLabel.cfb7cd9a.js";import"./QSlideTransition.64462d42.js";function k(){return w(x)}const P={class:"tw-p-4"},M=b({__name:"BudgetCapForm",setup(y){const i=k(),m=new Date().getFullYear(),p=Array.from({length:2},(a,n)=>m+n),s=d(null),t=d(""),{budgetCapStoreMutations:l}=I(),c=async()=>{if(!s.value||!t.value||isNaN(t.value)){i.notify({type:"negative",message:"Por favor, completa todos los campos correctamente"});return}await l.mutateAsync({year:s.value,totalAmount:+t.value}),i.notify({type:"positive",message:`Formulario enviado: A\xF1o ${s.value}, Monto: $${t.value}`})};return(a,n)=>(g(),Q("div",P,[e(N,{"expand-icon-class":"text-white","expand-separator":"","header-class":"bg-teal text-white",icon:"add",label:"Crear techo presupuestal"},{default:r(()=>[e($,{class:"tw-bg-green-50 tw-p-4"},{default:r(()=>[e(S,{class:"q-gutter-md",onSubmit:c},{default:r(()=>[e(q,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=o=>s.value=o),"bg-color":"white",clearable:"",dense:"",label:"Selecciona un a\xF1o",options:u(p),outlined:"",rules:[o=>!!o||"Selecciona un a\xF1o"]},null,8,["modelValue","options","rules"]),e(A,{modelValue:t.value,"onUpdate:modelValue":n[1]||(n[1]=o=>t.value=o),"bg-color":"white",clearable:"",dense:"",label:"Monto en pesos",outlined:"",prefix:"$",rules:[o=>o&&!isNaN(o)||"Ingresa un monto v\xE1lido"],type:"text"},null,8,["modelValue","rules"]),e(_,{color:"primary",label:"Guardar",type:"submit"})]),_:1})]),_:1})]),_:1})]))}}),be=b({__name:"IndexPage",setup(y){const{currencyFormat:i}=T(),{data:m,isLoading:p}=F(),s=d(),t=[{name:"consecutiveId",label:"ID",field:"consecutiveId",sortable:!1,required:!0},{name:"budget",field:l=>l.budget.year,required:!0,label:"Presupuesto",sortable:!0,align:"left"},{name:"totalAmount",field:l=>i(+l.totalAmount),label:"Total",sortable:!0,align:"right"},{name:"actions",field:"actions",label:"Acciones",sortable:!1,align:"center"}];return(l,c)=>(g(),B(h,{class:"md:tw-w-1/2"},{"card-body":r(()=>[C("div",null,[e(M)]),e(u(v),{ref_key:"qTableBudgetCaps",ref:s,columns:t,loading:u(p),rows:u(m),"rows-per-page-options":[20,30,40,50],title:"Techos Presupuestales"},{"body-cell-consecutiveId":r(a=>[e(f,{props:a},{default:r(()=>[e(V,{to:{name:"budgets.caps.detail",params:{id:a.row.uuid}},uuid:(a.rowIndex+1).toString()},null,8,["to","uuid"])]),_:2},1032,["props"])]),"body-cell-actions":r(a=>[e(f,{props:a},{default:r(()=>[e(_,{color:"primary",dense:"",flat:"",icon:"paid",round:"",size:"sm",to:{name:"budgets.caps.allocations",params:{id:a.row.uuid}}},null,8,["to"])]),_:2},1032,["props"])]),_:1},8,["loading","rows"])]),_:1}))}});export{be as default};
