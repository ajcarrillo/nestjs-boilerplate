import{Q as Re,a as ze}from"./QLayout.af492a2c.js";import{j as F,V as Ee,R as we,S as j,c as u,r as B,p as b,k as w,l as o,d as l,X as be,u as M,q as D,s as He,ae as U,t as X,a8 as je,v as Ue,y as ne,w as d,o as Xe,O as he,z as Ke,af as Ge,h as E,ag as _e,x as Je,i as Ye,B as Ze,g as et,_ as tt,ah as at,F as oe,ai as ke,aj as xe,b as pe,ak as nt,m as lt,n as ot}from"./index.c148c0c6.js";import{Q as ut,a as it,b as rt,u as st}from"./use-meta.2e55a2c7.js";import{Q as ct}from"./QSpinnerRings.5df98fbf.js";import{Q as I,a as O}from"./QItem.2533442d.js";import{Q as dt,a as ye,u as ft,b as vt,c as mt,d as bt}from"./QMenu.f4712139.js";import{Q as ie}from"./QList.21f703e4.js";import{u as Le}from"./BudgetResource.04074e95.js";import{Q as ue}from"./QItemLabel.cfb7cd9a.js";import{Q as ht}from"./QSelect.48bd3f96.js";import{u as _t,a as pt,b as H}from"./format.2ad21e77.js";import{u as yt,a as gt}from"./use-dark.74ed7cd3.js";import{T as le}from"./TouchPan.433e6c0e.js";import{Q as wt}from"./QExpansionItem.6e9425a7.js";import"./scroll.789d8182.js";import"./QResizeObserver.fec07f51.js";import"./focus-manager.387b0375.js";import"./index.2cf0d985.js";import"./use-key-composition.2fce6913.js";import"./touch.70a9dd44.js";import"./QSlideTransition.64462d42.js";const kt={key:1},xt=F({__name:"TheHeader",setup(t){const g=Ee(),s=we(),{user:_}=j(s),c=u(()=>{var i,S;const h=(i=_.value)==null?void 0:i.firstName.charAt(0),L=(S=_.value)==null?void 0:S.lastName.charAt(0);return`${h}${L}`}),f=B(!1),x=Le(),{leftDrawerOpen:T}=j(x),Q=()=>x.toggleLeftDrawer(),W=u(()=>T.value?"menu_open":"menu");function a(){f.value=!0,je.logout("/login")}function v(){g.push({name:"profile"})}return(h,L)=>(b(),w(rt,{elevated:""},{default:o(()=>[l(ut,null,{default:o(()=>[l(be,{"aria-label":"Menu",dense:"",flat:"",icon:M(W),round:"",onClick:Q},null,8,["icon"]),l(it,null,{default:o(()=>[D(" Planeaci\xF3n ")]),_:1}),He("div",null,[l(be,{class:"tw-bg-indigo-900","fab-mini":"","text-color":"white",unelevated:""},{default:o(()=>[f.value?(b(),w(ct,{key:0,color:"white"})):(b(),U("span",kt,X(M(c)),1)),l(dt,{"auto-close":""},{default:o(()=>[l(ie,{class:"tw-min-w-28"},{default:o(()=>[l(I,null,{default:o(()=>[l(O,null,{default:o(()=>{var i;return[D(X((i=M(_))==null?void 0:i.fullName),1)]}),_:1})]),_:1}),l(ye),l(I,{clickable:"",onClick:v},{default:o(()=>[l(O,null,{default:o(()=>[D("Mi Perfil")]),_:1})]),_:1}),l(ye),l(I,{clickable:"",onClick:a},{default:o(()=>[l(O,null,{default:o(()=>[D("Salir")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}))}}),ge=150;var Lt=Ue({name:"QDrawer",inheritAttrs:!1,props:{...ft,...yt,side:{type:String,default:"left",validator:t=>["left","right"].includes(t)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:t=>["default","desktop","mobile"].includes(t),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...vt,"onLayout","miniState"],setup(t,{slots:g,emit:s,attrs:_}){const c=et(),{proxy:{$q:f}}=c,x=gt(t,f),{preventBodyScroll:T}=pt(),{registerTimeout:Q,removeTimeout:W}=mt(),a=Ye(Ze,ne);if(a===ne)return console.error("QDrawer needs to be child of QLayout"),ne;let v,h=null,L;const i=B(t.behavior==="mobile"||t.behavior!=="desktop"&&a.totalWidth.value<=t.breakpoint),S=u(()=>t.mini===!0&&i.value!==!0),p=u(()=>S.value===!0?t.miniWidth:t.width),r=B(t.showIfAbove===!0&&i.value===!1?!0:t.modelValue===!0),re=u(()=>t.persistent!==!0&&(i.value===!0||Te.value===!0));function se(e,n){if(Ce(),e!==!1&&a.animate(),y(0),i.value===!0){const m=a.instances[R.value];m!==void 0&&m.belowBreakpoint===!0&&m.hide(!1),C(1),a.isContainer.value!==!0&&T(!0)}else C(0),e!==!1&&ee(!1);Q(()=>{e!==!1&&ee(!0),n!==!0&&s("show",e)},ge)}function ce(e,n){qe(),e!==!1&&a.animate(),C(0),y(P.value*p.value),te(),n!==!0?Q(()=>{s("hide",e)},ge):W()}const{show:K,hide:A}=bt({showing:r,hideOnRouteChange:re,handleShow:se,handleHide:ce}),{addToHistory:Ce,removeFromHistory:qe}=_t(r,A,re),N={belowBreakpoint:i,hide:A},k=u(()=>t.side==="right"),P=u(()=>(f.lang.rtl===!0?-1:1)*(k.value===!0?1:-1)),de=B(0),$=B(!1),G=B(!1),fe=B(p.value*P.value),R=u(()=>k.value===!0?"left":"right"),J=u(()=>r.value===!0&&i.value===!1&&t.overlay===!1?t.miniToOverlay===!0?t.miniWidth:p.value:0),Y=u(()=>t.overlay===!0||t.miniToOverlay===!0||a.view.value.indexOf(k.value?"R":"L")>-1||f.platform.is.ios===!0&&a.isContainer.value===!0),V=u(()=>t.overlay===!1&&r.value===!0&&i.value===!1),Te=u(()=>t.overlay===!0&&r.value===!0&&i.value===!1),Qe=u(()=>"fullscreen q-drawer__backdrop"+(r.value===!1&&$.value===!1?" hidden":"")),Be=u(()=>({backgroundColor:`rgba(0,0,0,${de.value*.4})`})),ve=u(()=>k.value===!0?a.rows.value.top[2]==="r":a.rows.value.top[0]==="l"),De=u(()=>k.value===!0?a.rows.value.bottom[2]==="r":a.rows.value.bottom[0]==="l"),Pe=u(()=>{const e={};return a.header.space===!0&&ve.value===!1&&(Y.value===!0?e.top=`${a.header.offset}px`:a.header.space===!0&&(e.top=`${a.header.size}px`)),a.footer.space===!0&&De.value===!1&&(Y.value===!0?e.bottom=`${a.footer.offset}px`:a.footer.space===!0&&(e.bottom=`${a.footer.size}px`)),e}),$e=u(()=>{const e={width:`${p.value}px`,transform:`translateX(${fe.value}px)`};return i.value===!0?e:Object.assign(e,Pe.value)}),Me=u(()=>"q-drawer__content fit "+(a.isContainer.value!==!0?"scroll":"overflow-auto")),Oe=u(()=>`q-drawer q-drawer--${t.side}`+(G.value===!0?" q-drawer--mini-animate":"")+(t.bordered===!0?" q-drawer--bordered":"")+(x.value===!0?" q-drawer--dark q-dark":"")+($.value===!0?" no-transition":r.value===!0?"":" q-layout--prevent-focus")+(i.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${S.value===!0?"mini":"standard"}`+(Y.value===!0||V.value!==!0?" fixed":"")+(t.overlay===!0||t.miniToOverlay===!0?" q-drawer--on-top":"")+(ve.value===!0?" q-drawer--top-padding":""))),Ae=u(()=>{const e=f.lang.rtl===!0?t.side:R.value;return[[le,We,void 0,{[e]:!0,mouse:!0}]]}),Ve=u(()=>{const e=f.lang.rtl===!0?R.value:t.side;return[[le,me,void 0,{[e]:!0,mouse:!0}]]}),Ie=u(()=>{const e=f.lang.rtl===!0?R.value:t.side;return[[le,me,void 0,{[e]:!0,mouse:!0,mouseAllDir:!0}]]});function Z(){Ne(i,t.behavior==="mobile"||t.behavior!=="desktop"&&a.totalWidth.value<=t.breakpoint)}d(i,e=>{e===!0?(v=r.value,r.value===!0&&A(!1)):t.overlay===!1&&t.behavior!=="mobile"&&v!==!1&&(r.value===!0?(y(0),C(0),te()):K(!1))}),d(()=>t.side,(e,n)=>{a.instances[n]===N&&(a.instances[n]=void 0,a[n].space=!1,a[n].offset=0),a.instances[e]=N,a[e].size=p.value,a[e].space=V.value,a[e].offset=J.value}),d(a.totalWidth,()=>{(a.isContainer.value===!0||document.qScrollPrevented!==!0)&&Z()}),d(()=>t.behavior+t.breakpoint,Z),d(a.isContainer,e=>{r.value===!0&&T(e!==!0),e===!0&&Z()}),d(a.scrollbarWidth,()=>{y(r.value===!0?0:void 0)}),d(J,e=>{q("offset",e)}),d(V,e=>{s("onLayout",e),q("space",e)}),d(k,()=>{y()}),d(p,e=>{y(),ae(t.miniToOverlay,e)}),d(()=>t.miniToOverlay,e=>{ae(e,p.value)}),d(()=>f.lang.rtl,()=>{y()}),d(()=>t.mini,()=>{t.modelValue===!0&&(Fe(),a.animate())}),d(S,e=>{s("miniState",e)});function y(e){e===void 0?he(()=>{e=r.value===!0?0:p.value,y(P.value*e)}):(a.isContainer.value===!0&&k.value===!0&&(i.value===!0||Math.abs(e)===p.value)&&(e+=P.value*a.scrollbarWidth.value),fe.value=e)}function C(e){de.value=e}function ee(e){const n=e===!0?"remove":a.isContainer.value!==!0?"add":"";n!==""&&document.body.classList[n]("q-body--drawer-toggle")}function Fe(){h!==null&&clearTimeout(h),c.proxy&&c.proxy.$el&&c.proxy.$el.classList.add("q-drawer--mini-animate"),G.value=!0,h=setTimeout(()=>{h=null,G.value=!1,c&&c.proxy&&c.proxy.$el&&c.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function We(e){if(r.value!==!1)return;const n=p.value,m=H(e.distance.x,0,n);if(e.isFinal===!0){m>=Math.min(75,n)===!0?K():(a.animate(),C(0),y(P.value*n)),$.value=!1;return}y((f.lang.rtl===!0?k.value!==!0:k.value)?Math.max(n-m,0):Math.min(0,m-n)),C(H(m/n,0,1)),e.isFirst===!0&&($.value=!0)}function me(e){if(r.value!==!0)return;const n=p.value,m=e.direction===t.side,z=(f.lang.rtl===!0?m!==!0:m)?H(e.distance.x,0,n):0;if(e.isFinal===!0){Math.abs(z)<Math.min(75,n)===!0?(a.animate(),C(1),y(0)):A(),$.value=!1;return}y(P.value*z),C(H(1-z/n,0,1)),e.isFirst===!0&&($.value=!0)}function te(){T(!1),ee(!0)}function q(e,n){a.update(t.side,e,n)}function Ne(e,n){e.value!==n&&(e.value=n)}function ae(e,n){q("size",e===!0?t.miniWidth:n)}return a.instances[t.side]=N,ae(t.miniToOverlay,p.value),q("space",V.value),q("offset",J.value),t.showIfAbove===!0&&t.modelValue!==!0&&r.value===!0&&t["onUpdate:modelValue"]!==void 0&&s("update:modelValue",!0),Xe(()=>{s("onLayout",V.value),s("miniState",S.value),v=t.showIfAbove===!0;const e=()=>{(r.value===!0?se:ce)(!1,!0)};if(a.totalWidth.value!==0){he(e);return}L=d(a.totalWidth,()=>{L(),L=void 0,r.value===!1&&t.showIfAbove===!0&&i.value===!1?K(!1):e()})}),Ke(()=>{L!==void 0&&L(),h!==null&&(clearTimeout(h),h=null),r.value===!0&&te(),a.instances[t.side]===N&&(a.instances[t.side]=void 0,q("size",0),q("offset",0),q("space",!1))}),()=>{const e=[];i.value===!0&&(t.noSwipeOpen===!1&&e.push(Ge(E("div",{key:"open",class:`q-drawer__opener fixed-${t.side}`,"aria-hidden":"true"}),Ae.value)),e.push(_e("div",{ref:"backdrop",class:Qe.value,style:Be.value,"aria-hidden":"true",onClick:A},void 0,"backdrop",t.noSwipeBackdrop!==!0&&r.value===!0,()=>Ie.value)));const n=S.value===!0&&g.mini!==void 0,m=[E("div",{..._,key:""+n,class:[Me.value,_.class]},n===!0?g.mini():Je(g.default))];return t.elevated===!0&&r.value===!0&&m.push(E("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(_e("aside",{ref:"content",class:Oe.value,style:$e.value},m,"contentclose",t.noSwipeClose!==!0&&i.value===!0,()=>Ve.value)),E("div",{class:"q-drawer-container"},e)}}});const Se=F({__name:"EssentialLink",props:{title:null,caption:{default:""},link:{default:"#"},icon:{default:""},insetLevel:{default:0},submenu:{default:()=>[]}},setup(t){return(g,s)=>(b(),w(I,{clickable:"","inset-level":t.insetLevel,to:t.link},{default:o(()=>[t.icon?(b(),w(O,{key:0,avatar:""},{default:o(()=>[l(tt,{name:t.icon},null,8,["name"])]),_:1})):at("",!0),l(O,null,{default:o(()=>[l(ue,null,{default:o(()=>[D(X(t.title),1)]),_:1}),l(ue,{caption:""},{default:o(()=>[D(X(t.caption),1)]),_:1})]),_:1})]),_:1},8,["inset-level","to"]))}}),St=F({__name:"ExpandLink",props:{menu:null},setup(t){return(g,s)=>(b(),w(ie,null,{default:o(()=>[l(wt,{"expand-separator":"",icon:t.menu.icon,label:t.menu.title},{default:o(()=>[(b(!0),U(oe,null,ke(t.menu.submenu,_=>(b(),w(Se,xe({key:_.title},_),null,16))),128))]),_:1},8,["icon","label"])]),_:1}))}}),Ct=F({__name:"TheDrawer",setup(t){var Q;const g=we(),{user:s}=j(g),_=Le(),{leftDrawerOpen:c,budgetDictionary:f,selectedBudget:x}=j(_),T=[{title:"Inicio",caption:`${(Q=s.value)==null?void 0:Q.fullName}`,icon:"o_home",link:{name:"welcome"},submenu:[]},{title:"Usuarios",icon:"o_people",link:{name:"users"},submenu:[]},{title:"Cat\xE1logos",caption:"Cat\xE1logos",icon:"o_format_list_numbered",submenu:[{title:"Partidas",icon:"o_fact_check",link:{name:"lines"},insetLevel:1},{title:"Acciones",icon:"o_assignment",link:{name:"actions"},insetLevel:1},{title:"Departamentos",icon:"o_store_mall_directory",link:{name:"areas"},insetLevel:1}]},{title:"Cap\xEDtulo 5000",caption:"Planeaci\xF3n",icon:"o_book",submenu:[{title:"Art\xEDculos",icon:"o_format_list_bulleted",link:{name:"articles"},insetLevel:1},{title:"Presupuestos",icon:"o_monetization_on",link:{name:"budgets"},insetLevel:1},{title:"Requisiciones",icon:"o_receipt_long",link:{name:"requisitions.index"},insetLevel:1}]},{title:"\xD3rdenes de compra",icon:"o_shopping_cart",link:{name:"purchase-orders"},submenu:[]},{title:"\xD3rdenes de pago",icon:"o_payment",link:{name:"payment-orders"},submenu:[]},{title:"Sub Presupuestos",icon:"o_request_quote",submenu:[{title:"Nuevo",icon:"o_add",link:{name:"sub-budgets.create"},insetLevel:1},{title:"Listado",icon:"o_format_list_numbered",link:{name:"sub-budgets.index"},insetLevel:1},{title:"Requisiciones",icon:"o_receipt_long",link:{name:"sub-budgets.index.requisition"},insetLevel:1},{title:"Adecuaciones",icon:"o_history",link:{name:"sub-budgets.index.adjustment"},insetLevel:1},{title:"Economias",icon:"o_savings",link:{name:"sub-budgets.index.savings"},insetLevel:1}]},{title:"Techos Presupuestales",icon:"o_trending_up",submenu:[{title:"Presupuestos",icon:"o_trending_up",link:{name:"budgets.caps.index"},insetLevel:1}]}];return(W,a)=>(b(),w(Lt,{modelValue:M(c),"onUpdate:modelValue":a[1]||(a[1]=v=>pe(c)?c.value=v:null),bordered:"","show-if-above":""},{default:o(()=>[l(ie,null,{default:o(()=>[l(ue,{header:""},{default:o(()=>[D(" Men\xFA ")]),_:1}),l(I,null,{default:o(()=>[l(O,null,{default:o(()=>[l(ht,{modelValue:M(x),"onUpdate:modelValue":a[0]||(a[0]=v=>pe(x)?x.value=v:null),dense:"",label:"Presupuesto","option-label":"year","option-value":"year",options:M(f),outlined:""},null,8,["modelValue","options"])]),_:1})]),_:1}),(b(),U(oe,null,ke(T,v=>{var h;return b(),U(oe,{key:v.title},[((h=v.submenu)==null?void 0:h.length)===0?(b(),w(Se,nt(xe({key:0},v)),null,16)):(b(),w(St,{key:1,menu:v},null,8,["menu"]))],64)}),64))]),_:1})]),_:1},8,["modelValue"]))}}),Kt=F({__name:"MembersLayout",setup(t){const g=lt();return st(()=>{var s;return{title:((s=g.meta)==null?void 0:s.title)||"Planeaci\xF3n"}}),(s,_)=>{const c=ot("router-view");return b(),w(Re,{view:"lHh Lpr lFf"},{default:o(()=>[l(xt),l(Ct),l(ze,null,{default:o(()=>[l(c)]),_:1})]),_:1})}}});export{Kt as default};
