import{p as a}from"./planeacion.api.4718394d.js";import{l as n}from"./layout.b48f6ca2.js";import{a as d,u as h}from"./QChip.e0f21080.js";import{u as p}from"./useMutation.esm.7ab5810a.js";import{r as y,w as m}from"./index.e2638eb4.js";var t={getPurchaseOrders(r){return r?a.get("/purchase-orders/requisition-sub-budget"):a.get("/purchase-orders")},createPurchaseOrder(r){return a.post("/purchase-orders",r)},createPurchaseOrderFromRequisition(r){return a.post("/purchase-orders/requisition-sub-budget",r)},uploadFile(r,e){return a.post(`/files/purchase-orders/${r}`,e,{headers:{"Content-Type":"multipart/form-data"}})},getPurchaseDictionary(){return a.get("/purchase-orders/dictionary")}};const i=y(""),l=async r=>{const{data:e}=await t.getPurchaseOrders(r);return e},O=async r=>{const{data:e}=i.value==="PRESUPUESTO"?await t.createPurchaseOrder(r):await t.createPurchaseOrderFromRequisition(r);return e},P=async()=>{const{data:r}=await t.getPurchaseDictionary();return r},b=({fromSubBudgets:r})=>{const e=d(),{isLoading:s,isError:o,data:c,isFetching:u,refetch:g}=h({queryKey:["purchase-orders"],queryFn:()=>l(r.value),staleTime:1e3*60});return m(r,async()=>{await e.invalidateQueries(["purchase-orders"])}),{isLoading:s,isError:o,orders:c,isFetching:u,purchaseOrderType:i}},v=({fromSubBudgets:r})=>{const e=d(),{isLoading:s,isError:o,mutateAsync:c,data:u}=p({mutationFn:O,onSuccess:async()=>{n.showSuccessNotification("Orden de compra creada con \xE9xito"),await e.invalidateQueries(["purchase-orders"])},onError:()=>{n.showErrorNotification("Error al crear orden de compra")}});return{purchaseOrder:u,createPurchaseOrder:c,isLoading:s,isError:o,purchaseOrderType:i}},C=()=>{const{isLoading:r,isError:e,data:s}=h({queryKey:["purchase-dictionary"],queryFn:P,staleTime:6e4});return{isLoading:r,isError:e,dictionary:s}};export{t as P,b as a,C as b,v as u};
