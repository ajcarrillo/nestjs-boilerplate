import{M as v,H as f,r as _,c as w,m as Q,j as V,k as t,d as e,u as n,S as p,ax as C,l as k,a2 as F,ao as B}from"./index.812f81a0.js";import{b as S,c as x}from"./layout.a9526a0e.js";import{C as I,Q as P}from"./CardForm.4536dc52.js";import{c as q,T as A,Q as h,d as T}from"./QCardActions.08f71cf5.js";import{u as E,a as L}from"./useBudgets.f10b2a7a.js";import{k as M,Q as U,h as D}from"./QSeparator.e38ba453.js";import"./uid.41ce9c26.js";import"./index.2cf0d985.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./scroll.7ca003e8.js";import"./QPage.3dfb7345.js";import"./utils.esm.48473d4c.js";const $=v({__name:"BudgetForm",props:{budget:null},setup(y){const g=y,{budgetStoreMutations:d}=E(),{isLoading:m}=d,r=f({year:2022}),l=f(q(g.budget||r)),u=_(),b={year:[i=>!!i||"El a\xF1o es requerido"]},c=w(()=>"Agregar presupuesto");async function o(){var a,s;!await((a=u.value)==null?void 0:a.validate())||(await d.mutateAsync(l),l.year=2022,(s=u.value)==null||s.reset())}return(i,a)=>(Q(),V(I,{title:n(c)},{form:t(()=>[e(n(S),{ref_key:"budgetForm",ref:u,class:"q-gutter-md"},{default:t(()=>[e(M,null,{default:t(()=>[e(U,null,{default:t(()=>[e(D,null,{default:t(()=>[e(x,{modelValue:l.year,"onUpdate:modelValue":a[0]||(a[0]=s=>l.year=s),modelModifiers:{number:!0},dense:"",label:"A\xF1o",outlined:"",rules:b.year,type:"number"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),actions:t(()=>[e(p,{color:"primary",label:"Guardar",loading:n(m),onClick:o},null,8,["loading"])]),_:1},8,["title"]))}}),Z=v({__name:"IndexPage",setup(y){const{data:g,isLoading:d}=L(),m=_(""),r=_(!1);let l=f({year:2022});const u=[{name:"id",field:"id",required:!0,label:"ID",sortable:!0,align:"left"},{name:"year",field:"year",label:"A\xF1o",sortable:!0,align:"left"},{name:"action",align:"center",label:"Acciones",field:"action",sortable:!1}];C(()=>{r.value||(l=f({year:2022}))});function b({href:c}){return{to:c}}return(c,o)=>{const i=k("router-link");return Q(),V(A,null,{"card-body":t(()=>[e(h,{columns:u,loading:n(d),rows:n(g),"rows-per-page-options":[20,30,40,50],title:"Presupuestos"},{"top-right":t(()=>[e(p,{class:"q-mr-xs",color:"primary",icon:"add",label:"Crear Presupuesto",outline:"",onClick:o[0]||(o[0]=a=>r.value=!0)}),e(x,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=a=>m.value=a),class:"q-mr-xs",debounce:"300",dense:"",outlined:"",placeholder:"Search"},{append:t(()=>[e(F,{name:"search"})]),_:1},8,["modelValue"]),e(p,{color:"primary","icon-right":"archive",label:"Exportar CSV","no-caps":""})]),"body-cell-id":t(a=>[e(P,{props:a},{default:t(()=>[e(i,{custom:"",to:{name:"budgets.detail",params:{id:a.row.id}}},{default:t(s=>[e(p,B(b(s),{color:"primary",flat:"",label:a.row.id,size:"md"}),null,16,["label"])]),_:2},1032,["to"])]),_:2},1032,["props"])]),_:1},8,["loading","rows"])]),footer:t(()=>[e(T,{modelValue:r.value,"onUpdate:modelValue":o[2]||(o[2]=a=>r.value=a)},{default:t(()=>[e($,{budget:n(l)},null,8,["budget"])]),_:1},8,["modelValue"])]),_:1})}}});export{Z as default};
