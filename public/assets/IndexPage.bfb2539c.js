import{Q as d,a as m}from"./QItemLabel.1df21711.js";import{Q as l,a as x}from"./QTable.c75b480b.js";import{Q}from"./QSelect.ca846bee.js";import{Q as V,a as q}from"./QTr.0add9ac4.js";import{j as D,r as I,k as c,l as t,p as f,d as a,q as o,t as r,u as s,X as h,ap as F}from"./index.6e0dc468.js";import{e as S,f as Y}from"./useSubBudgets.f92594e2.js";import{T as C}from"./TablePage.e1853eac.js";import{d as P}from"./date.47296c4b.js";import{F as E}from"./FilePreview.23be025c.js";import"./use-dark.b49e1a6f.js";import"./format.e39f8640.js";import"./planeacion.api.0342f2e3.js";import"./index.2cf0d985.js";import"./scroll.0a304599.js";import"./QList.a5647721.js";import"./QCheckbox.c981629d.js";import"./layout.f6c7d4be.js";import"./QChip.c57cfaf9.js";import"./utils.esm.eb2a7ef9.js";import"./useMutation.esm.6c972cd2.js";import"./mutation.esm.bf03a6b1.js";import"./QCard.b42533e0.js";import"./QPage.2385e31a.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./QTooltip.c27337be.js";import"./QCardSection.dc33c047.js";import"./QImg.62269655.js";import"./QSpace.d3b745d6.js";const p=P.formatDate,ce=D({__name:"IndexPage",setup(T){const _="https://nestjs-boilerplate-production.up.railway.app",{subBudgetRequisitions:b}=S(),{search:g,subBudgetDictionary:v,subBudgetDictionaryIsFetching:M}=Y(),w=[{name:"consecutiveId",field:"consecutiveId",label:"ID",align:"left"},{name:"requisition_number",field:"requisition_number",label:"N\xFAm. Requisici\xF3n"},{name:"estimated_amount",field:"estimated_amount",label:"Monto Estimado"},{name:"preparation_date",field:i=>p(i.preparation_date,"YYYY-MM-DD"),label:"Fecha de Preparaci\xF3n",align:"left"},{name:"processing_date",field:i=>p(i.processing_date,"YYYY-MM-DD"),label:"Fecha de Procesamiento",align:"left"},{name:"area",field:i=>i.area.description,label:"\xC1rea",align:"left"},{name:"event",field:i=>i.subBudget.event,label:"Evento",align:"left"},{name:"file",field:"file",label:"Archivo",align:"left"}];I(void 0);async function y(i,u){if(i===""){u();return}u(()=>{g.value=i})}async function k(i,u){console.log({value:i,initialValue:u})}return(i,u)=>(f(),c(C,null,{"card-body":t(()=>[a(x,{columns:w,rows:s(b),title:"Requisiciones","wrap-cells":""},{body:t(e=>[a(V,{props:e},{default:t(()=>[a(l,{key:"consecutiveId",props:e},{default:t(()=>[a(d,{class:"text-primary tw-font-bold",clickable:"",to:{name:"sub-budgets.edit.requisition",params:{id:e.row.subBudget.id,reqId:e.row.id}}},{default:t(()=>[a(m,null,{default:t(()=>[o(r((e.rowIndex+1).toString()),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1032,["props"]),a(l,{key:"requisition_number",props:e},{default:t(()=>[o(r(e.row.requisition_number),1)]),_:2},1032,["props"]),a(l,{key:"estimated_amount",props:e},{default:t(()=>[o(r(e.row.estimated_amount),1)]),_:2},1032,["props"]),a(l,{key:"preparation_date",props:e},{default:t(()=>[o(r(e.row.preparation_date),1)]),_:2},1032,["props"]),a(l,{key:"processing_date",props:e},{default:t(()=>[o(r(e.row.processing_date),1)]),_:2},1032,["props"]),a(l,{key:"area",props:e},{default:t(()=>[o(r(e.row.area.description),1)]),_:2},1032,["props"]),a(l,{key:"event",props:e},{default:t(()=>[o(r(e.row.subBudget.event)+" ",1),a(q,{modelValue:e.row.subBudget,"onUpdate:modelValue":n=>e.row.subBudget=n,buttons:"","label-cancel":"Cancelar","label-set":"Guardar",persistent:"",onSave:k},{default:t(n=>[a(Q,{modelValue:n.value,"onUpdate:modelValue":B=>n.value=B,class:"full-width",clearable:"",dense:"","emit-value":"","input-debounce":"600",label:"Evento","map-options":"","option-label":"event","option-value":"id",options:s(v),outlined:"","use-input":"",onFilter:y},{"no-option":t(()=>[a(d,null,{default:t(()=>[a(m,{class:"text-grey"},{default:t(()=>[o(" Sin resultados ")]),_:1})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),a(l,{key:"file",props:e},{default:t(()=>[e.row.file?(f(),c(E,{key:0,"file-url":`${s(_)}/api/files/preview/${e.row.file}`},{activator:t(({showPreview:n})=>[a(h,{color:"primary",flat:"","no-caps":"",onClick:n},{default:t(()=>[o(" Ver archivo ")]),_:2},1032,["onClick"])]),_:2},1032,["file-url"])):F("",!0)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1}))}});export{ce as default};
