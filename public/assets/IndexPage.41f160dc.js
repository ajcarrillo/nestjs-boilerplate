import{j as A,S as v,r as p,k as x,l as a,p as y,d as o,_,X as j,q as Q,t as T,u as n}from"./index.33aee9c3.js";import{Q as h}from"./QInput.bc534865.js";import{Q as w}from"./QBtnGroup.e484a0b7.js";import{Q as I,a as q}from"./QTable.71d6b359.js";import{T as F}from"./TablePage.1ebf5b06.js";import{p as C,u as P}from"./BudgetResource.3a0abb0c.js";import{u as V}from"./useQuery.esm.08e598e9.js";import{u as k}from"./useMoney.dbc60660.js";import{u as D}from"./useExportDataToCsv.20dd4c5a.js";import"./use-key-composition.b1866cfc.js";import"./use-dark.a42b1db8.js";import"./focus-manager.387b0375.js";import"./QMenu.746f001c.js";import"./scroll.5632c0ea.js";import"./QList.1e036a38.js";import"./QSelect.bc9b930f.js";import"./format.9dfa61a7.js";import"./QItem.3270a199.js";import"./QItemLabel.b3a0c01c.js";import"./QCheckbox.685522c0.js";import"./QCard.e44cba30.js";import"./QPage.6112cc6b.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./index.2cf0d985.js";import"./utils.esm.aa7cdc1a.js";import"./date.d5e8b0ec.js";import"./layout.880d2741.js";var L={getAdjustments(){return C.get("/sub-budget-adjustment")}};const R=async()=>(await L.getAdjustments()).data,E=({budgetYear:s})=>{const{data:u,isFetching:i,isLoading:l}=V({queryKey:["subBudgetAdjustments",s],queryFn:R});return{subBudgetAdjustments:u,isFetching:i,isLoading:l}},pe=A({__name:"IndexPage",setup(s){const u=P(),{selectedBudget:i}=v(u),{exportDataToCsv:l}=D(),{currencyFormat:g}=k(),m=[{name:"consecutiveId",label:"ID",field:"consecutiveId",sortable:!1,required:!0},{name:"sourceSubBudgetAction",field:t=>{var e;return(e=t.sourceSubBudget)==null?void 0:e.action.name},label:"Acci\xF3n",align:"left"},{name:"sourceSubBudgetLine",field:t=>{var e;return(e=t.sourceSubBudget)==null?void 0:e.line.name},label:"Partida",align:"left"},{name:"sourceSubBudget",field:t=>{var e;return(e=t.sourceSubBudget)==null?void 0:e.event},label:"Fuente",align:"left"},{name:"targetSubBudgetAction",field:t=>{var e;return(e=t.targetSubBudget)==null?void 0:e.action.name},label:"Acci\xF3n",align:"left"},{name:"targetSubBudgetLine",field:t=>{var e;return(e=t.targetSubBudget)==null?void 0:e.line.name},label:"Partida",align:"left"},{name:"targetSubBudget",field:t=>{var e;return(e=t.targetSubBudget)==null?void 0:e.event},label:"Destino",align:"left"},{name:"amount",field:t=>g(+t.amount),label:"Monto",align:"left"}],{subBudgetAdjustments:b,isFetching:f,isLoading:B}=E({budgetYear:i}),d=p(""),c=p();function S(){l(c.value.filteredSortedRows,m,"adecuaciones")}return(t,e)=>(y(),x(F,null,{"card-body":a(()=>[o(n(q),{ref_key:"qTableAdjustments",ref:c,columns:m,filter:d.value,loading:n(f)||n(B),pagination:{rowsPerPage:20},rows:n(b),title:"Adecuaciones","wrap-cells":""},{"top-right":a(()=>[o(h,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=r=>d.value=r),class:"q-mr-xs",clearable:"",debounce:"300",dense:"",outlined:"",placeholder:"Buscar"},{append:a(()=>[o(_,{name:"search"})]),_:1},8,["modelValue"]),o(w,{unelevated:""},{default:a(()=>[o(j,{color:"primary","icon-right":"archive",label:"Exportar a CSV",onClick:S})]),_:1})]),"body-cell-consecutiveId":a(r=>[o(I,{props:r},{default:a(()=>[Q(T(r.rowIndex+1),1)]),_:2},1032,["props"])]),_:1},8,["filter","loading","rows"])]),_:1}))}});export{pe as default};
