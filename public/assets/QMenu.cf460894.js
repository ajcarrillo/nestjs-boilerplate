import{u as fe,a as me}from"./use-dark.e1c6b971.js";import{v as ve,c as b,h as L,g as $,aq as Oe,r as k,ap as he,ac as ne,O,ar as oe,w as p,o as ge,z as H,as as Ae,K as j,at as ze,au as B,a as Fe,a2 as De,av as Re,aw as Ve,ax as Qe,E as be,a4 as xe,ad as I,ay as Ke,$ as je,x as _e,az as Ie,a5 as Ne}from"./index.98b8b759.js";import{b as ie,c as Ue,a as Ge}from"./focus-manager.387b0375.js";import{c as Xe,g as Ye}from"./scroll.88f85743.js";const Je={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},Q={xs:2,sm:4,md:8,lg:16,xl:24};var Et=ve({name:"QSeparator",props:{...fe,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const n=$(),o=me(e,n.proxy.$q),t=b(()=>e.vertical===!0?"vertical":"horizontal"),i=b(()=>` q-separator--${t.value}`),f=b(()=>e.inset!==!1?`${i.value}-${Je[e.inset]}`:""),l=b(()=>`q-separator${i.value}${f.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(o.value===!0?" q-separator--dark":"")),u=b(()=>{const r={};if(e.size!==void 0&&(r[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const d=e.spaced===!0?`${Q.md}px`:e.spaced in Q?`${Q[e.spaced]}px`:e.spaced,s=e.vertical===!0?["Left","Right"]:["Top","Bottom"];r[`margin${s[0]}`]=r[`margin${s[1]}`]=d}return r});return()=>L("hr",{class:l.value,style:u.value,"aria-orientation":t.value})}});function Ze(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),Oe.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const et={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function tt({showing:e,avoidEmit:n,configureAnchorEl:o}){const{props:t,proxy:i,emit:f}=$(),l=k(null);let u=null;function r(a){return l.value===null?!1:a===void 0||a.touches===void 0||a.touches.length<=1}const d={};o===void 0&&(Object.assign(d,{hide(a){i.hide(a)},toggle(a){i.toggle(a),a.qAnchorHandled=!0},toggleKey(a){he(a,13)===!0&&d.toggle(a)},contextClick(a){i.hide(a),ne(a),O(()=>{i.show(a),a.qAnchorHandled=!0})},prevent:ne,mobileTouch(a){if(d.mobileCleanup(a),r(a)!==!0)return;i.hide(a),l.value.classList.add("non-selectable");const g=a.target;oe(d,"anchor",[[g,"touchmove","mobileCleanup","passive"],[g,"touchend","mobileCleanup","passive"],[g,"touchcancel","mobileCleanup","passive"],[l.value,"contextmenu","prevent","notPassive"]]),u=setTimeout(()=>{u=null,i.show(a),a.qAnchorHandled=!0},300)},mobileCleanup(a){l.value.classList.remove("non-selectable"),u!==null&&(clearTimeout(u),u=null),e.value===!0&&a!==void 0&&Ze()}}),o=function(a=t.contextMenu){if(t.noParentEvent===!0||l.value===null)return;let g;a===!0?i.$q.platform.is.mobile===!0?g=[[l.value,"touchstart","mobileTouch","passive"]]:g=[[l.value,"mousedown","hide","passive"],[l.value,"contextmenu","contextClick","notPassive"]]:g=[[l.value,"click","toggle","passive"],[l.value,"keyup","toggleKey","passive"]],oe(d,"anchor",g)});function s(){Ae(d,"anchor")}function v(a){for(l.value=a;l.value.classList.contains("q-anchor--skip");)l.value=l.value.parentNode;o()}function h(){if(t.target===!1||t.target===""||i.$el.parentNode===null)l.value=null;else if(t.target===!0)v(i.$el.parentNode);else{let a=t.target;if(typeof t.target=="string")try{a=document.querySelector(t.target)}catch{a=void 0}a!=null?(l.value=a.$el||a,o()):(l.value=null,console.error(`Anchor: target "${t.target}" not found`))}}return p(()=>t.contextMenu,a=>{l.value!==null&&(s(),o(a))}),p(()=>t.target,()=>{l.value!==null&&s(),h()}),p(()=>t.noParentEvent,a=>{l.value!==null&&(a===!0?s():o())}),ge(()=>{h(),n!==!0&&t.modelValue===!0&&l.value===null&&f("update:modelValue",!1)}),H(()=>{u!==null&&clearTimeout(u),s()}),{anchorEl:l,canShow:r,anchorEvents:d}}function nt(e,n){const o=k(null);let t;function i(u,r){const d=`${r!==void 0?"add":"remove"}EventListener`,s=r!==void 0?r:t;u!==window&&u[d]("scroll",s,j.passive),window[d]("scroll",s,j.passive),t=r}function f(){o.value!==null&&(i(o.value),o.value=null)}const l=p(()=>e.noParentEvent,()=>{o.value!==null&&(f(),n())});return H(l),{localScrollTarget:o,unconfigureScrollTarget:f,changeScrollEvent:i}}const ot={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},it=["beforeShow","show","beforeHide","hide"];function lt({showing:e,canShow:n,hideOnRouteChange:o,handleShow:t,handleHide:i,processOnMount:f}){const l=$(),{props:u,emit:r,proxy:d}=l;let s;function v(m){e.value===!0?g(m):h(m)}function h(m){if(u.disable===!0||m!==void 0&&m.qAnchorHandled===!0||n!==void 0&&n(m)!==!0)return;const x=u["onUpdate:modelValue"]!==void 0;x===!0&&(r("update:modelValue",!0),s=m,O(()=>{s===m&&(s=void 0)})),(u.modelValue===null||x===!1)&&a(m)}function a(m){e.value!==!0&&(e.value=!0,r("beforeShow",m),t!==void 0?t(m):r("show",m))}function g(m){if(u.disable===!0)return;const x=u["onUpdate:modelValue"]!==void 0;x===!0&&(r("update:modelValue",!1),s=m,O(()=>{s===m&&(s=void 0)})),(u.modelValue===null||x===!1)&&M(m)}function M(m){e.value!==!1&&(e.value=!1,r("beforeHide",m),i!==void 0?i(m):r("hide",m))}function W(m){u.disable===!0&&m===!0?u["onUpdate:modelValue"]!==void 0&&r("update:modelValue",!1):m===!0!==e.value&&(m===!0?a:M)(s)}p(()=>u.modelValue,W),o!==void 0&&ze(l)===!0&&p(()=>d.$route.fullPath,()=>{o.value===!0&&e.value===!0&&g()}),f===!0&&ge(()=>{W(u.modelValue)});const E={show:h,hide:g,toggle:v};return Object.assign(d,E),E}const C=[];function qt(e){return C.find(n=>n.contentEl!==null&&n.contentEl.contains(e))}function pe(e,n){do{if(e.$options.name==="QMenu"){if(e.hide(n),e.$props.separateClosePopup===!0)return B(e)}else if(e.__qPortal===!0){const o=B(e);return o!==void 0&&o.$options.name==="QPopupProxy"?(e.hide(n),o):e}e=B(e)}while(e!=null)}function Ht(e,n,o){for(;o!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(o--,e.$options.name==="QMenu"){e=pe(e,n);continue}e.hide(n)}e=B(e)}}function at(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function ut(e,n,o,t){const i=k(!1),f=k(!1);let l=null;const u={},r=t==="dialog"&&at(e);function d(v){if(v===!0){ie(u),f.value=!0;return}f.value=!1,i.value===!1&&(r===!1&&l===null&&(l=Ve(!1,t)),i.value=!0,C.push(e.proxy),Ue(u))}function s(v){if(f.value=!1,v!==!0)return;ie(u),i.value=!1;const h=C.indexOf(e.proxy);h!==-1&&C.splice(h,1),l!==null&&(Qe(l),l=null)}return Fe(()=>{s(!0)}),e.proxy.__qPortal=!0,De(e.proxy,"contentEl",()=>n.value),{showPortal:d,hidePortal:s,portalIsActive:i,portalIsAccessible:f,renderPortal:()=>r===!0?o():i.value===!0?[L(Re,{to:l},o())]:void 0}}const st={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function rt(e,n=()=>{},o=()=>{}){return{transitionProps:b(()=>{const t=`q-transition--${e.transitionShow||n()}`,i=`q-transition--${e.transitionHide||o()}`;return{appear:!0,enterFromClass:`${t}-enter-from`,enterActiveClass:`${t}-enter-active`,enterToClass:`${t}-enter-to`,leaveFromClass:`${i}-leave-from`,leaveActiveClass:`${i}-leave-active`,leaveToClass:`${i}-leave-to`}}),transitionStyle:b(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}function ct(){let e;const n=$();function o(){e=void 0}return be(o),H(o),{removeTick:o,registerTick(t){e=t,O(()=>{e===t&&(xe(n)===!1&&e(),e=void 0)})}}}function dt(){let e=null;const n=$();function o(){e!==null&&(clearTimeout(e),e=null)}return be(o),H(o),{removeTimeout:o,registerTimeout(t,i){o(),xe(n)===!1&&(e=setTimeout(t,i))}}}const y=[];let P;function ft(e){P=e.keyCode===27}function mt(){P===!0&&(P=!1)}function vt(e){P===!0&&(P=!1,he(e,27)===!0&&y[y.length-1](e))}function ye(e){window[e]("keydown",ft),window[e]("blur",mt),window[e]("keyup",vt),P=!1}function ht(e){I.is.desktop===!0&&(y.push(e),y.length===1&&ye("addEventListener"))}function le(e){const n=y.indexOf(e);n>-1&&(y.splice(n,1),y.length===0&&ye("removeEventListener"))}const w=[];function we(e){w[w.length-1](e)}function gt(e){I.is.desktop===!0&&(w.push(e),w.length===1&&document.body.addEventListener("focusin",we))}function bt(e){const n=w.indexOf(e);n>-1&&(w.splice(n,1),w.length===0&&document.body.removeEventListener("focusin",we))}const{notPassiveCapture:A}=j,T=[];function z(e){const n=e.target;if(n===void 0||n.nodeType===8||n.classList.contains("no-pointer-events")===!0)return;let o=C.length-1;for(;o>=0;){const t=C[o].$;if(t.type.name!=="QDialog")break;if(t.props.seamless!==!0)return;o--}for(let t=T.length-1;t>=0;t--){const i=T[t];if((i.anchorEl.value===null||i.anchorEl.value.contains(n)===!1)&&(n===document.body||i.innerRef.value!==null&&i.innerRef.value.contains(n)===!1))e.qClickOutside=!0,i.onClickOutside(e);else return}}function xt(e){T.push(e),T.length===1&&(document.addEventListener("mousedown",z,A),document.addEventListener("touchstart",z,A))}function ae(e){const n=T.findIndex(o=>o===e);n>-1&&(T.splice(n,1),T.length===0&&(document.removeEventListener("mousedown",z,A),document.removeEventListener("touchstart",z,A)))}let ue,se;function re(e){const n=e.split(" ");return n.length!==2?!1:["top","center","bottom"].includes(n[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(n[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function pt(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const _={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{_[`${e}#ltr`]=e,_[`${e}#rtl`]=e});function ce(e,n){const o=e.split(" ");return{vertical:o[0],horizontal:_[`${o[1]}#${n===!0?"rtl":"ltr"}`]}}function yt(e,n){let{top:o,left:t,right:i,bottom:f,width:l,height:u}=e.getBoundingClientRect();return n!==void 0&&(o-=n[1],t-=n[0],f+=n[1],i+=n[0],l+=n[0],u+=n[1]),{top:o,bottom:f,height:u,left:t,right:i,width:l,middle:t+(i-t)/2,center:o+(f-o)/2}}function wt(e,n,o){let{top:t,left:i}=e.getBoundingClientRect();return t+=n.top,i+=n.left,o!==void 0&&(t+=o[1],i+=o[0]),{top:t,bottom:t+1,height:1,left:i,right:i+1,width:1,middle:i,center:t}}function Tt(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function de(e,n,o){return{top:e[o.anchorOrigin.vertical]-n[o.selfOrigin.vertical],left:e[o.anchorOrigin.horizontal]-n[o.selfOrigin.horizontal]}}function St(e){if(I.is.ios===!0&&window.visualViewport!==void 0){const u=document.body.style,{offsetLeft:r,offsetTop:d}=window.visualViewport;r!==ue&&(u.setProperty("--q-pe-left",r+"px"),ue=r),d!==se&&(u.setProperty("--q-pe-top",d+"px"),se=d)}const{scrollLeft:n,scrollTop:o}=e.el,t=e.absoluteOffset===void 0?yt(e.anchorEl,e.cover===!0?[0,0]:e.offset):wt(e.anchorEl,e.absoluteOffset,e.offset);let i={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(i.minWidth=t.width+"px",e.cover===!0&&(i.minHeight=t.height+"px")),Object.assign(e.el.style,i);const f=Tt(e.el);let l=de(t,f,e);if(e.absoluteOffset===void 0||e.offset===void 0)K(l,t,f,e.anchorOrigin,e.selfOrigin);else{const{top:u,left:r}=l;K(l,t,f,e.anchorOrigin,e.selfOrigin);let d=!1;if(l.top!==u){d=!0;const s=2*e.offset[1];t.center=t.top-=s,t.bottom-=s+2}if(l.left!==r){d=!0;const s=2*e.offset[0];t.middle=t.left-=s,t.right-=s+2}d===!0&&(l=de(t,f,e),K(l,t,f,e.anchorOrigin,e.selfOrigin))}i={top:l.top+"px",left:l.left+"px"},l.maxHeight!==void 0&&(i.maxHeight=l.maxHeight+"px",t.height>l.maxHeight&&(i.minHeight=i.maxHeight)),l.maxWidth!==void 0&&(i.maxWidth=l.maxWidth+"px",t.width>l.maxWidth&&(i.minWidth=i.maxWidth)),Object.assign(e.el.style,i),e.el.scrollTop!==o&&(e.el.scrollTop=o),e.el.scrollLeft!==n&&(e.el.scrollLeft=n)}function K(e,n,o,t,i){const f=o.bottom,l=o.right,u=Xe(),r=window.innerHeight-u,d=document.body.clientWidth;if(e.top<0||e.top+f>r)if(i.vertical==="center")e.top=n[t.vertical]>r/2?Math.max(0,r-f):0,e.maxHeight=Math.min(f,r);else if(n[t.vertical]>r/2){const s=Math.min(r,t.vertical==="center"?n.center:t.vertical===i.vertical?n.bottom:n.top);e.maxHeight=Math.min(f,s),e.top=Math.max(0,s-f)}else e.top=Math.max(0,t.vertical==="center"?n.center:t.vertical===i.vertical?n.top:n.bottom),e.maxHeight=Math.min(f,r-e.top);if(e.left<0||e.left+l>d)if(e.maxWidth=Math.min(l,d),i.horizontal==="middle")e.left=n[t.horizontal]>d/2?Math.max(0,d-l):0;else if(n[t.horizontal]>d/2){const s=Math.min(d,t.horizontal==="middle"?n.middle:t.horizontal===i.horizontal?n.right:n.left);e.maxWidth=Math.min(l,s),e.left=Math.max(0,s-e.maxWidth)}else e.left=Math.max(0,t.horizontal==="middle"?n.middle:t.horizontal===i.horizontal?n.left:n.right),e.maxWidth=Math.min(l,d-e.left)}var Mt=ve({name:"QMenu",inheritAttrs:!1,props:{...et,...ot,...fe,...st,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:re},self:{type:String,validator:re},offset:{type:Array,validator:pt},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...it,"click","escapeKey"],setup(e,{slots:n,emit:o,attrs:t}){let i=null,f,l,u;const r=$(),{proxy:d}=r,{$q:s}=d,v=k(null),h=k(!1),a=b(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),g=me(e,s),{registerTick:M,removeTick:W}=ct(),{registerTimeout:E}=dt(),{transitionProps:m,transitionStyle:x}=rt(e),{localScrollTarget:N,changeScrollEvent:Te,unconfigureScrollTarget:Se}=nt(e,ee),{anchorEl:S,canShow:Ce}=tt({showing:h}),{hide:U}=lt({showing:h,canShow:Ce,handleShow:qe,handleHide:He,hideOnRouteChange:a,processOnMount:!0}),{showPortal:G,hidePortal:X,renderPortal:ke}=ut(r,v,We,"menu"),F={anchorEl:S,innerRef:v,onClickOutside(c){if(e.persistent!==!0&&h.value===!0)return U(c),(c.type==="touchstart"||c.target.classList.contains("q-dialog__backdrop"))&&Ne(c),!0}},Y=b(()=>ce(e.anchor||(e.cover===!0?"center middle":"bottom start"),s.lang.rtl)),Pe=b(()=>e.cover===!0?Y.value:ce(e.self||"top start",s.lang.rtl)),$e=b(()=>(e.square===!0?" q-menu--square":"")+(g.value===!0?" q-menu--dark q-dark":"")),Ee=b(()=>e.autoClose===!0?{onClick:Me}:{}),J=b(()=>h.value===!0&&e.persistent!==!0);p(J,c=>{c===!0?(ht(R),xt(F)):(le(R),ae(F))});function D(){Ge(()=>{let c=v.value;c&&c.contains(document.activeElement)!==!0&&(c=c.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||c.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||c.querySelector("[autofocus], [data-autofocus]")||c,c.focus({preventScroll:!0}))})}function qe(c){if(i=e.noRefocus===!1?document.activeElement:null,gt(te),G(),ee(),f=void 0,c!==void 0&&(e.touchPosition||e.contextMenu)){const V=Ke(c);if(V.left!==void 0){const{top:Be,left:Le}=S.value.getBoundingClientRect();f={left:V.left-Le,top:V.top-Be}}}l===void 0&&(l=p(()=>s.screen.width+"|"+s.screen.height+"|"+e.self+"|"+e.anchor+"|"+s.lang.rtl,q)),e.noFocus!==!0&&document.activeElement.blur(),M(()=>{q(),e.noFocus!==!0&&D()}),E(()=>{s.platform.is.ios===!0&&(u=e.autoClose,v.value.click()),q(),G(!0),o("show",c)},e.transitionDuration)}function He(c){W(),X(),Z(!0),i!==null&&(c===void 0||c.qClickOutside!==!0)&&(((c&&c.type.indexOf("key")===0?i.closest('[tabindex]:not([tabindex^="-"])'):void 0)||i).focus(),i=null),E(()=>{X(!0),o("hide",c)},e.transitionDuration)}function Z(c){f=void 0,l!==void 0&&(l(),l=void 0),(c===!0||h.value===!0)&&(bt(te),Se(),ae(F),le(R)),c!==!0&&(i=null)}function ee(){(S.value!==null||e.scrollTarget!==void 0)&&(N.value=Ye(S.value,e.scrollTarget),Te(N.value,q))}function Me(c){u!==!0?(pe(d,c),o("click",c)):u=!1}function te(c){J.value===!0&&e.noFocus!==!0&&Ie(v.value,c.target)!==!0&&D()}function R(c){o("escapeKey"),U(c)}function q(){const c=v.value;c===null||S.value===null||St({el:c,offset:e.offset,anchorEl:S.value,anchorOrigin:Y.value,selfOrigin:Pe.value,absoluteOffset:f,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function We(){return L(je,m.value,()=>h.value===!0?L("div",{role:"menu",...t,ref:v,tabindex:-1,class:["q-menu q-position-engine scroll"+$e.value,t.class],style:[t.style,x.value],...Ee.value},_e(n.default)):null)}return H(Z),Object.assign(d,{focus:D,updatePosition:q}),ke}});export{Mt as Q,Et as a,it as b,dt as c,lt as d,st as e,ct as f,rt as g,ut as h,le as i,gt as j,ht as k,Ze as l,et as m,pt as n,nt as o,tt as p,ae as q,bt as r,St as s,ce as t,ot as u,re as v,xt as w,qt as x,Ht as y};
