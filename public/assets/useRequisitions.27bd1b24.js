import{p as o,u as p}from"./BudgetResource.e21a87b9.js";import{l as r}from"./layout.1849cf49.js";import{S as m}from"./index.a852c7dd.js";import{u as c,a as l}from"./useQuery.esm.6e7da3a0.js";import{u as q}from"./useMutation.esm.e5230e92.js";var n={getRequisitions(){return o.get("/requisitions")},getRequisition(i){return o.get(`/requisitions/${i}`)},storeRequisition(i){return delete i.area,o.post("/requisitions",i)},updateRequisition(i,t){return o.put(`/requisitions/${i}`,t)},uploadFile(i,t){return o.post(`/files/requisitions/${i}`,t,{headers:{"Content-Type":"multipart/form-data"}})},storeRequisitionDetail(i,t){return o.post(`/requisitions/${i}/details`,t)},getDictionary(){return o.get("/requisitions/dictionary")},removeRequisitionDetail(i,t){return o.delete(`/requisitions/${i}/details/${t}`)},deleteRequisition({id:i}){return o.delete(`/requisitions/${i}`)}};const g=async()=>{const{data:i}=await n.getRequisitions();return i},E=async i=>{const{data:t}=await n.getRequisition(i);return t},f=async i=>{const{data:t}=await n.storeRequisition(i);return t},w=async i=>{var d;const{id:t}=i,{requisition_number:e,estimated_amount:s,processing_date:a,preparation_date:u,area_id:y=(d=i.area)==null?void 0:d.id}=i,{data:R}=await n.updateRequisition(t,{requisition_number:e,estimated_amount:s,processing_date:a,preparation_date:u,area_id:y});return R},x=async()=>{const{data:i}=await n.getDictionary();return i},F=async({id:i})=>{const{data:t}=await n.deleteRequisition({id:i});return t},N=()=>{const{isLoading:i,isError:t,data:e,error:s}=c({queryKey:["requisitionsDictionary"],queryFn:x,staleTime:6e4});return{isLoading:i,isError:t,requisitionsDictionary:e,error:s}},T=i=>{const{isLoading:t,isError:e,data:s,error:a}=c({queryKey:["requisition",i],queryFn:()=>E(i),staleTime:6e5});return{isLoading:t,isError:e,requisition:s,error:a}},_=()=>({requisitionStoreMutations:q({mutationFn:f,onSuccess:()=>{r.showSuccessNotification("Requisici\xF3n creada con \xE9xito")},onError:()=>{r.showErrorNotification("Error al crear requisici\xF3n")}})}),v=()=>{const i=l();return{requisitionUpdateMutations:q({mutationFn:w,onSuccess:async e=>{await i.invalidateQueries(["requisition",e.id]),r.showSuccessNotification("Requisici\xF3n actualizada con \xE9xito")},onError:()=>{r.showErrorNotification("Error al actualizar requisici\xF3n")}})}},C=()=>{const i=p(),{selectedBudget:t}=m(i),{isLoading:e,isError:s,data:a,error:u}=c({queryKey:["requisitions",t],queryFn:g,staleTime:1e3*60});return{isLoading:e,isError:s,requisitions:a,error:u}},L=()=>{const i=l(),{mutateAsync:t,isLoading:e,isError:s}=q({mutationFn:F,onSuccess:async()=>{await i.invalidateQueries(["requisitions"]),r.showSuccessNotification("Requisici\xF3n eliminada con \xE9xito")},onError:()=>{r.showErrorNotification("Error al eliminar requisici\xF3n")}});return{deleteRequisitionMutation:t,isDeleting:e,isDeletingError:s}};export{n as R,v as a,C as b,L as c,T as d,N as e,_ as u};
