import{Q as _,a as v}from"./QTable.71d6b359.js";import{T as y}from"./TablePage.1ebf5b06.js";import{u as w,a as x}from"./useBudgetCaps.13ba3481.js";import{u as Q}from"./useMoney.dbc60660.js";import{_ as B}from"./ShortUuidLink.7a041f28.js";import{Q as C}from"./QSelect.bc9b930f.js";import{Q as h}from"./QInput.bc534865.js";import{i as I,b6 as F,j as f,r as d,p as g,ae as T,d as e,l,u as i,X as V,k as q,s as S}from"./index.33aee9c3.js";import{Q as $}from"./QForm.05da6a20.js";import{Q as A}from"./QCard.e44cba30.js";import{Q as N}from"./QExpansionItem.16ce53ec.js";import"./QMenu.746f001c.js";import"./use-dark.a42b1db8.js";import"./focus-manager.387b0375.js";import"./scroll.5632c0ea.js";import"./QList.1e036a38.js";import"./QCheckbox.685522c0.js";import"./use-key-composition.b1866cfc.js";import"./QPage.6112cc6b.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./BudgetResource.3a0abb0c.js";import"./index.2cf0d985.js";import"./layout.880d2741.js";import"./useQuery.esm.08e598e9.js";import"./utils.esm.aa7cdc1a.js";import"./useMutation.esm.5aff8292.js";import"./mutation.esm.9a94c1b8.js";import"./QItem.3270a199.js";import"./format.9dfa61a7.js";import"./QItemLabel.b3a0c01c.js";import"./QSlideTransition.646b9f16.js";function k(){return I(F)}const P={class:"tw-p-4"},M=f({__name:"BudgetCapForm",setup(b){const u=k(),m=new Date().getFullYear(),p=Array.from({length:2},(n,s)=>m+s),o=d(null),t=d(""),{budgetCapStoreMutations:r}=w(),c=async()=>{if(!o.value||!t.value||isNaN(t.value)){u.notify({type:"negative",message:"Por favor, completa todos los campos correctamente"});return}await r.mutateAsync({year:o.value,totalAmount:+t.value}),u.notify({type:"positive",message:`Formulario enviado: A\xF1o ${o.value}, Monto: $${t.value}`})};return(n,s)=>(g(),T("div",P,[e(N,{"expand-icon-class":"text-white","expand-separator":"","header-class":"bg-teal text-white",icon:"add",label:"Crear techo presupuestal"},{default:l(()=>[e(A,{class:"tw-bg-green-50 tw-p-4"},{default:l(()=>[e($,{class:"q-gutter-md",onSubmit:c},{default:l(()=>[e(C,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=a=>o.value=a),"bg-color":"white",clearable:"",dense:"",label:"Selecciona un a\xF1o",options:i(p),outlined:"",rules:[a=>!!a||"Selecciona un a\xF1o"]},null,8,["modelValue","options","rules"]),e(h,{modelValue:t.value,"onUpdate:modelValue":s[1]||(s[1]=a=>t.value=a),"bg-color":"white",clearable:"",dense:"",label:"Monto en pesos",outlined:"",prefix:"$",rules:[a=>a&&!isNaN(a)||"Ingresa un monto v\xE1lido"],type:"text"},null,8,["modelValue","rules"]),e(V,{color:"primary",label:"Guardar",type:"submit"})]),_:1})]),_:1})]),_:1})]))}}),ge=f({__name:"IndexPage",setup(b){const{currencyFormat:u}=Q(),{data:m,isLoading:p}=x(),o=d(),t=[{name:"consecutiveId",label:"ID",field:"consecutiveId",sortable:!1,required:!0},{name:"budget",field:r=>r.budget.year,required:!0,label:"Presupuesto",sortable:!0,align:"left"},{name:"totalAmount",field:r=>u(+r.totalAmount),label:"Total",sortable:!0,align:"right"}];return(r,c)=>(g(),q(y,{class:"md:tw-w-1/2"},{"card-body":l(()=>[S("div",null,[e(M)]),e(i(v),{ref_key:"qTableBudgetCaps",ref:o,columns:t,loading:i(p),rows:i(m),"rows-per-page-options":[20,30,40,50],title:"Techos Presupuestales"},{"body-cell-consecutiveId":l(n=>[e(_,{props:n},{default:l(()=>[e(B,{to:{name:"budgets.caps.detail",params:{id:n.row.uuid}},uuid:(n.rowIndex+1).toString()},null,8,["to","uuid"])]),_:2},1032,["props"])]),_:1},8,["loading","rows"])]),_:1}))}});export{ge as default};
