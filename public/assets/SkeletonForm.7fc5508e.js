import{a as B,Q as U}from"./QForm.249823eb.js";import{V as D,j as w,N as M,r as Q,o as z,p as f,k as C,l as s,d as t,s as r,b9 as L,_ as T,u as c,X as b,q as W,b8 as j,v as P,c as S,h as G,x as H,g as X,ag as F,F as J,at as K}from"./index.764f91da.js";import{Q as O}from"./QFile.9e5ddc36.js";import{a as k,Q as Y}from"./QCard.85e6f4b4.js";import{a as h}from"./format.5c717855.js";import{Q as E}from"./QCardActions.c423be21.js";import{_ as V}from"./DatePicker.181badbf.js";import{g as Z,h as ee}from"./useSubBudgets.afb7a016.js";import{F as te}from"./FilePreview.3b970130.js";import{c as ae}from"./index.7adaf3a2.js";import{u as oe,a as ie}from"./use-dark.8941baf2.js";function ne(){const e=D();return{goBack:()=>{window.history.length>1?e.go(-1):e.push({name:"welcome"})}}}const le={class:"row q-gutter-md"},se={class:"col-12 col-md-6 col-lg-4"},re={class:"col-12 col-md-6 col-lg-4"},ue={class:"col-12 col-md-6 col-lg-4"},de={class:"col-12 col-md-6 col-lg-4"},ce={class:"col-12 col-md-6 col-lg-4"},Se=w({__name:"SubBudgetRequisitionForm",props:{populateWith:{default:null},isEditing:{type:Boolean,default:!1},subBudget:null},setup(e){const o=e,m="https://nestjs-boilerplate-production.up.railway.app",{goBack:p}=ne(),{createSubBudgetRequisitionMutation:u}=Z(),{isLoading:_}=u,{editSubBudgetRequisitionMutation:d}=ee(),{isLoading:A}=d,R={area_id:o.subBudget.department.id,file:void 0,estimated_amount:0,preparation_date:"",processing_date:"",requisition_number:"",sub_budget_id:o.subBudget.id},i=M(ae(o.populateWith)||R),v=Q(),g={estimated_amount:[a=>!!a||"El campo monto estimado es requerido"],preparation_date:[a=>!!a||"El campo fecha de preparaci\xF3n es requerido"],processing_date:[a=>!!a||"El campo fecha de procesamiento es requerido"],requisition_number:[a=>!!a||"El campo n\xFAmero de requisici\xF3n es requerido",a=>a.length==3||"El campo n\xFAmero de requisici\xF3n debe tener 3 d\xEDgitos",a=>!isNaN(Number(a))||"El campo n\xFAmero de requisici\xF3n debe ser un n\xFAmero"]},x=Q();async function $(){var n;await((n=v.value)==null?void 0:n.validate())&&(o.isEditing?await d.mutateAsync({dto:i}):await u.mutateAsync({createRequisitionSubBudgetDto:i}))}z(()=>{o.isEditing&&(i.area_id=o.subBudget.department.id,i.sub_budget_id=o.subBudget.id)});function N(a){i.file=a}return(a,n)=>(f(),C(c(U),{ref_key:"qSubBudgetReqForm",ref:v,onSubmit:j($,["prevent"])},{default:s(()=>[t(k,null,{default:s(()=>{var y;return[r("div",le,[r("div",se,[t(B,{modelValue:i.requisition_number,"onUpdate:modelValue":n[0]||(n[0]=l=>i.requisition_number=l),dense:"",label:"N\xFAmero de requisici\xF3n",outlined:"",rules:g.requisition_number,"stack-label":""},null,8,["modelValue","rules"])]),r("div",re,[t(B,{modelValue:i.estimated_amount,"onUpdate:modelValue":n[1]||(n[1]=l=>i.estimated_amount=l),modelModifiers:{number:!0},dense:"",label:"Monto estimado",outlined:"",rules:g.estimated_amount,"stack-label":""},null,8,["modelValue","rules"])]),r("div",ue,[t(V,{modelValue:i.preparation_date,"onUpdate:modelValue":n[2]||(n[2]=l=>i.preparation_date=l),label:"Fecha de preparaci\xF3n",rules:g.preparation_date},null,8,["modelValue","rules"])]),r("div",de,[t(V,{modelValue:i.processing_date,"onUpdate:modelValue":n[3]||(n[3]=l=>i.processing_date=l),label:"Fecha de procesamiento",rules:g.processing_date},null,8,["modelValue","rules"])]),r("div",ce,[t(O,{modelValue:x.value,"onUpdate:modelValue":[n[4]||(n[4]=l=>x.value=l),N],accept:".jpg, image/*, application/pdf",dense:"",label:"Haga click para subir el archivo o arrastralo aqu\xED",name:"file",outlined:"","use-chips":""},L({prepend:s(()=>[t(T,{name:"attach_file"})]),_:2},[e.isEditing&&((y=o.populateWith)==null?void 0:y.file)?{name:"append",fn:s(()=>{var l;return[t(te,{"file-url":`${c(m)}/api/files/preview/${(l=o.populateWith)==null?void 0:l.file}`},{activator:s(({showPreview:I})=>[t(b,{color:"primary",flat:"",icon:"o_description","no-caps":"",onClick:I},{default:s(()=>[W(" Ver archivo ")]),_:2},1032,["onClick"])]),_:1},8,["file-url"])]}),key:"0"}:void 0]),1032,["modelValue"])])])]}),_:1}),t(h),t(E,{align:"right"},{default:s(()=>[t(b,{color:"primary",label:"Guardar",loading:c(A)||c(_),type:"submit"},null,8,["loading"]),t(b,{color:"primary",flat:"",label:"Atr\xE1s",onClick:c(p)},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"]))}}),me=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],pe=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var q=P({name:"QSkeleton",props:{...oe,tag:{type:String,default:"div"},type:{type:String,validator:e=>me.includes(e),default:"rect"},animation:{type:String,validator:e=>pe.includes(e),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(e,{slots:o}){const m=X(),p=ie(e,m.proxy.$q),u=S(()=>{const d=e.size!==void 0?[e.size,e.size]:[e.width,e.height];return{"--q-skeleton-speed":`${e.animationSpeed}ms`,width:d[0],height:d[1]}}),_=S(()=>`q-skeleton q-skeleton--${p.value===!0?"dark":"light"} q-skeleton--type-${e.type}`+(e.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${e.animation}`:"")+(e.square===!0?" q-skeleton--square":"")+(e.bordered===!0?" q-skeleton--bordered":""));return()=>G(e.tag,{class:_.value,style:u.value},H(o.default))}});const ge={class:"text-caption"},Fe=w({__name:"SkeletonForm",props:{inputCount:null},setup(e){const o=e;return(m,p)=>(f(),C(Y,{bordered:"",flat:""},{default:s(()=>[t(k,null,{default:s(()=>[r("div",ge,[t(q,{type:"text"})])]),_:1}),t(h),t(k,{class:"tw-flex tw-flex-col tw-gap-4"},{default:s(()=>[(f(!0),F(J,null,K(o.inputCount,u=>(f(),F("div",{key:u},[t(q,{type:"QInput"})]))),128))]),_:1}),t(h),t(E,{align:"right"},{default:s(()=>[t(q,{type:"QBtn"})]),_:1})]),_:1}))}});export{Fe as _,Se as a};
