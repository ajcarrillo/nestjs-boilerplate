import{Q as _,a as v}from"./QTable.d88fa6dd.js";import{T as y}from"./TablePage.b97e6ae5.js";import{u as w,a as x}from"./useBudgetCaps.2c81b4ea.js";import{u as Q}from"./useMoney.dbc60660.js";import{_ as B}from"./ShortUuidLink.d43f5844.js";import{Q as C}from"./QSelect.52656c1a.js";import{Q as h}from"./QInput.654fe12c.js";import{i as I,b6 as F,j as f,r as d,p as g,ae as T,d as e,l,u as i,X as V,k as q,s as S}from"./index.98b8b759.js";import{Q as $}from"./QForm.cd1920aa.js";import{Q as A}from"./QCard.4a0a1869.js";import{Q as N}from"./QExpansionItem.3ef4bb4a.js";import"./QMenu.cf460894.js";import"./use-dark.e1c6b971.js";import"./focus-manager.387b0375.js";import"./scroll.88f85743.js";import"./QList.1c19b31b.js";import"./QCheckbox.5d40bfc9.js";import"./use-key-composition.9c45f4e0.js";import"./QPage.7ce3cb7c.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./BudgetResource.6b2552bc.js";import"./index.2cf0d985.js";import"./layout.893a0074.js";import"./useQuery.esm.dd222c7d.js";import"./utils.esm.b39882c3.js";import"./useMutation.esm.70a0cd22.js";import"./mutation.esm.5a13a832.js";import"./QItem.dd8e4c40.js";import"./format.a9e04108.js";import"./QItemLabel.f1939688.js";import"./QSlideTransition.e94d1f4f.js";function k(){return I(F)}const P={class:"tw-p-4"},M=f({__name:"BudgetCapForm",setup(b){const u=k(),m=new Date().getFullYear(),p=Array.from({length:2},(n,s)=>m+s),o=d(null),t=d(""),{budgetCapStoreMutations:r}=w(),c=async()=>{if(!o.value||!t.value||isNaN(t.value)){u.notify({type:"negative",message:"Por favor, completa todos los campos correctamente"});return}await r.mutateAsync({year:o.value,totalAmount:+t.value}),u.notify({type:"positive",message:`Formulario enviado: A\xF1o ${o.value}, Monto: $${t.value}`})};return(n,s)=>(g(),T("div",P,[e(N,{"expand-icon-class":"text-white","expand-separator":"","header-class":"bg-teal text-white",icon:"add",label:"Crear techo presupuestal"},{default:l(()=>[e(A,{class:"tw-bg-green-50 tw-p-4"},{default:l(()=>[e($,{class:"q-gutter-md",onSubmit:c},{default:l(()=>[e(C,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=a=>o.value=a),"bg-color":"white",clearable:"",dense:"",label:"Selecciona un a\xF1o",options:i(p),outlined:"",rules:[a=>!!a||"Selecciona un a\xF1o"]},null,8,["modelValue","options","rules"]),e(h,{modelValue:t.value,"onUpdate:modelValue":s[1]||(s[1]=a=>t.value=a),"bg-color":"white",clearable:"",dense:"",label:"Monto en pesos",outlined:"",prefix:"$",rules:[a=>a&&!isNaN(a)||"Ingresa un monto v\xE1lido"],type:"text"},null,8,["modelValue","rules"]),e(V,{color:"primary",label:"Guardar",type:"submit"})]),_:1})]),_:1})]),_:1})]))}}),ge=f({__name:"IndexPage",setup(b){const{currencyFormat:u}=Q(),{data:m,isLoading:p}=x(),o=d(),t=[{name:"consecutiveId",label:"ID",field:"consecutiveId",sortable:!1,required:!0},{name:"budget",field:r=>r.budget.year,required:!0,label:"Presupuesto",sortable:!0,align:"left"},{name:"totalAmount",field:r=>u(+r.totalAmount),label:"Total",sortable:!0,align:"right"}];return(r,c)=>(g(),q(y,{class:"md:tw-w-1/2"},{"card-body":l(()=>[S("div",null,[e(M)]),e(i(v),{ref_key:"qTableBudgetCaps",ref:o,columns:t,loading:i(p),rows:i(m),"rows-per-page-options":[20,30,40,50],title:"Techos Presupuestales"},{"body-cell-consecutiveId":l(n=>[e(_,{props:n},{default:l(()=>[e(B,{to:{name:"budgets.caps.detail",params:{id:n.row.uuid}},uuid:(n.rowIndex+1).toString()},null,8,["to","uuid"])]),_:2},1032,["props"])]),_:1},8,["loading","rows"])]),_:1}))}});export{ge as default};
