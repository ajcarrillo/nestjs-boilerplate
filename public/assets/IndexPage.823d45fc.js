import{j as v,N as f,r as _,c as w,p as Q,k as V,l as t,d as e,u as n,Z as p,aH as C,n as F,a6 as k,au as B}from"./index.404f6180.js";import{Q as I,a as x}from"./layout.eb1e0f2e.js";import{C as P,Q as S}from"./CardForm.95c686e3.js";import{c as q,T as A,Q as T,d as h}from"./QCardActions.4c2ff797.js";import{u as E,a as L}from"./useBudgets.b2d259cd.js";import{a as U,b as D,c as M}from"./format.e886d86d.js";import"./use-dark.ed1c6acc.js";import"./focus-manager.33224ae2.js";import"./index.2cf0d985.js";import"./QCard.f0638023.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./scroll.75c71c19.js";import"./QPage.63d049a8.js";import"./utils.esm.dcf38a17.js";const N=v({__name:"BudgetForm",props:{budget:null},setup(y){const g=y,{budgetStoreMutations:d}=E(),{isLoading:m}=d,l=f({year:2022}),r=f(q(g.budget||l)),u=_(),b={year:[i=>!!i||"El a\xF1o es requerido"]},c=w(()=>"Agregar presupuesto");async function o(){var a,s;!await((a=u.value)==null?void 0:a.validate())||(await d.mutateAsync(r),r.year=2022,(s=u.value)==null||s.reset())}return(i,a)=>(Q(),V(P,{title:n(c)},{form:t(()=>[e(n(I),{ref_key:"budgetForm",ref:u,class:"q-gutter-md"},{default:t(()=>[e(U,null,{default:t(()=>[e(D,null,{default:t(()=>[e(M,null,{default:t(()=>[e(x,{modelValue:r.year,"onUpdate:modelValue":a[0]||(a[0]=s=>r.year=s),modelModifiers:{number:!0},dense:"",label:"A\xF1o",outlined:"",rules:b.year,type:"number"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),actions:t(()=>[e(p,{color:"primary",label:"Guardar",loading:n(m),onClick:o},null,8,["loading"])]),_:1},8,["title"]))}}),ae=v({__name:"IndexPage",setup(y){const{data:g,isLoading:d}=L(),m=_(""),l=_(!1);let r=f({year:2022});const u=[{name:"id",field:"id",required:!0,label:"ID",sortable:!0,align:"left"},{name:"year",field:"year",label:"A\xF1o",sortable:!0,align:"left"},{name:"action",align:"center",label:"Acciones",field:"action",sortable:!1}];C(()=>{l.value||(r=f({year:2022}))});function b({href:c}){return{to:c}}return(c,o)=>{const i=F("router-link");return Q(),V(A,null,{"card-body":t(()=>[e(T,{columns:u,loading:n(d),rows:n(g),"rows-per-page-options":[20,30,40,50],title:"Presupuestos"},{"top-right":t(()=>[e(p,{class:"q-mr-xs",color:"primary",icon:"add",label:"Crear Presupuesto",outline:"",onClick:o[0]||(o[0]=a=>l.value=!0)}),e(x,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=a=>m.value=a),class:"q-mr-xs",debounce:"300",dense:"",outlined:"",placeholder:"Search"},{append:t(()=>[e(k,{name:"search"})]),_:1},8,["modelValue"]),e(p,{color:"primary","icon-right":"archive",label:"Exportar CSV","no-caps":""})]),"body-cell-id":t(a=>[e(S,{props:a},{default:t(()=>[e(i,{custom:"",to:{name:"budgets.detail",params:{id:a.row.id}}},{default:t(s=>[e(p,B(b(s),{color:"primary",flat:"",label:a.row.id,size:"md"}),null,16,["label"])]),_:2},1032,["to"])]),_:2},1032,["props"])]),_:1},8,["loading","rows"])]),footer:t(()=>[e(h,{modelValue:l.value,"onUpdate:modelValue":o[2]||(o[2]=a=>l.value=a)},{default:t(()=>[e(N,{budget:n(r)},null,8,["budget"])]),_:1},8,["modelValue"])]),_:1})}}});export{ae as default};
