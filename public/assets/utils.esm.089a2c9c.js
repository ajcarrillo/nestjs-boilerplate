import{b as P,u as k}from"./index.526cf529.js";class C{constructor(){this.listeners=[],this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.push(t),this.onSubscribe(),()=>{this.listeners=this.listeners.filter(n=>n!==t),this.onUnsubscribe()}}hasListeners(){return this.listeners.length>0}onSubscribe(){}onUnsubscribe(){}}const M=typeof window=="undefined"||"Deno"in window;function X(){}function Z(e,t){return typeof e=="function"?e(t):e}function ee(e){return typeof e=="number"&&e>=0&&e!==1/0}function te(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ne(e,t,n){return p(e)?typeof t=="function"?{...n,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function re(e,t,n){return p(e)?[{...t,queryKey:e},n]:[e||{},t]}function se(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:l,stale:a}=e;if(p(l)){if(r){if(t.queryHash!==I(l,t.options))return!1}else if(!R(t.queryKey,l))return!1}if(n!=="all"){const f=t.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||typeof s!="undefined"&&s!==t.state.fetchStatus||o&&!o(t))}function ie(e,t){const{exact:n,fetching:r,predicate:s,mutationKey:o}=e;if(p(o)){if(!t.options.mutationKey)return!1;if(n){if(E(t.options.mutationKey)!==E(o))return!1}else if(!R(t.options.mutationKey,o))return!1}return!(typeof r=="boolean"&&t.state.status==="loading"!==r||s&&!s(t))}function I(e,t){return((t==null?void 0:t.queryKeyHashFn)||E)(e)}function E(e){return JSON.stringify(e,(t,n)=>O(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function R(e,t){return g(e,t)}function g(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!g(e[n],t[n])):!1}function U(e,t){if(e===t)return e;const n=L(e)&&L(t);if(n||O(e)&&O(t)){const r=n?e.length:Object.keys(e).length,s=n?t:Object.keys(t),o=s.length,l=n?[]:{};let a=0;for(let f=0;f<o;f++){const h=n?f:s[f];l[h]=U(e[h],t[h]),l[h]===e[h]&&a++}return r===o&&a===r?e:l}return t}function oe(e,t){if(e&&!t||t&&!e)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function L(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function O(e){if(!A(e))return!1;const t=e.constructor;if(typeof t=="undefined")return!0;const n=t.prototype;return!(!A(n)||!n.hasOwnProperty("isPrototypeOf"))}function A(e){return Object.prototype.toString.call(e)==="[object Object]"}function p(e){return Array.isArray(e)}function q(e){return new Promise(t=>{setTimeout(t,e)})}function K(e){q(0).then(e)}function ue(){if(typeof AbortController=="function")return new AbortController}function le(e,t,n){return n.isDataEqual!=null&&n.isDataEqual(e,t)?e:typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?U(e,t):t}class T extends C{constructor(){super(),this.setup=t=>{if(!M&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(t){this.focused=t,t&&this.onFocus()}onFocus(){this.listeners.forEach(t=>{t()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document=="undefined"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const V=new T;class $ extends C{constructor(){super(),this.setup=t=>{if(!M&&window.addEventListener){const n=()=>t();return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(t){this.online=t,t&&this.onOnline()}onOnline(){this.listeners.forEach(t=>{t()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator=="undefined"||typeof navigator.onLine=="undefined"?!0:navigator.onLine}}const D=new $;function B(e){return Math.min(1e3*2**e,3e4)}function H(e){return(e!=null?e:"online")==="online"?D.isOnline():!0}class N{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}}function ce(e){return e instanceof N}function fe(e){let t=!1,n=0,r=!1,s,o,l;const a=new Promise((u,c)=>{o=u,l=c}),f=u=>{r||(b(new N(u)),e.abort==null||e.abort())},h=()=>{t=!0},i=()=>{t=!1},y=()=>!V.isFocused()||e.networkMode!=="always"&&!D.isOnline(),Q=u=>{r||(r=!0,e.onSuccess==null||e.onSuccess(u),s==null||s(),o(u))},b=u=>{r||(r=!0,e.onError==null||e.onError(u),s==null||s(),l(u))},j=()=>new Promise(u=>{s=c=>{if(r||!y())return u(c)},e.onPause==null||e.onPause()}).then(()=>{s=void 0,r||e.onContinue==null||e.onContinue()}),v=()=>{if(r)return;let u;try{u=e.fn()}catch(c){u=Promise.reject(c)}Promise.resolve(u).then(Q).catch(c=>{var F,S;if(r)return;const d=(F=e.retry)!=null?F:3,w=(S=e.retryDelay)!=null?S:B,x=typeof w=="function"?w(n,c):w,_=d===!0||typeof d=="number"&&n<d||typeof d=="function"&&d(n,c);if(t||!_){b(c);return}n++,e.onFail==null||e.onFail(n,c),q(x).then(()=>{if(y())return j()}).then(()=>{t?b(c):v()})})};return H(e.networkMode)?v():j().then(v),{promise:a,cancel:f,continue:()=>{s==null||s()},cancelRetry:h,continueRetry:i}}function Y(){let e=[],t=0,n=i=>{i()},r=i=>{i()};const s=i=>{let y;t++;try{y=i()}finally{t--,t||a()}return y},o=i=>{t?e.push(i):K(()=>{n(i)})},l=i=>(...y)=>{o(()=>{i(...y)})},a=()=>{const i=e;e=[],i.length&&K(()=>{r(()=>{i.forEach(y=>{n(y)})})})};return{batch:s,batchCalls:l,schedule:o,setNotifyFunction:i=>{n=i},setBatchNotifyFunction:i=>{r=i}}}const ae=Y(),J="VUE_QUERY_CLIENT";function ye(e){const t=e?":"+e:"";return""+J+t}function he(e){return Array.isArray(e)}function de(e){return Array.isArray(e)}function pe(e,t){Object.keys(e).forEach(n=>{e[n]=t[n]})}function m(e,t){if(t){const n=t(e);if(n!==void 0||P(e))return n}if(Array.isArray(e))return e.map(n=>m(n,t));if(typeof e=="object"&&G(e)){const n=Object.entries(e).map(([r,s])=>[r,m(s,t)]);return Object.fromEntries(n)}return e}function z(e){return m(e,t=>{if(P(t))return z(k(t))})}function G(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}export{C as S,ae as a,H as b,fe as c,ie as d,ne as e,V as f,ue as g,I as h,ce as i,Z as j,E as k,R as l,se as m,X as n,D as o,re as p,z as q,le as r,he as s,te as t,ye as u,ee as v,M as w,oe as x,pe as y,de as z};
