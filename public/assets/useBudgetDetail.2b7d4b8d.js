import{p as i}from"./planeacion.api.11872094.js";import{l as o}from"./layout.50bbef5d.js";import{u as m,a as c}from"./QChip.c85dbe45.js";import{u as d}from"./useMutation.esm.337bf2db.js";import{r as u}from"./index.e80209f7.js";var n={storeDetail(t,e){return i.post(`/budgets/${t}/budget-details`,e)},getBudgetDetailMonthBy(t,e){return i.get(`/budget-details-month?month=${t}&area=${e}`)},updateBudgetDetail(t,e,a){return i.patch(`/budgets/${t}/budget-details/${e}`,{total:+a.total,estimated_amount:+a.estimated_amount})}};const B=async({budgetId:t,budgetDetail:e})=>{const{data:a}=await n.storeDetail(t,e);return a},y=async(t,e)=>{const{data:a}=await n.getBudgetDetailMonthBy(t,e);return a},h=async({budgetDetail:t})=>{const{data:e}=await n.updateBudgetDetail(t.budget_id,t.id,t);return e},x=()=>{const t=c();return{storeBudgetDetailMutation:d({mutationFn:a=>B(a),onSuccess:async(a,r)=>{await t.invalidateQueries(["budget",r.budgetId]),o.showSuccessNotification("El bien se agreg\xF3 al presupuesto con \xE9xito")},onError:()=>{o.showErrorNotification("Error al agregar el bien al presupuesto")}})}},F=()=>{const t=u(""),e=u(),{isLoading:a,data:r,refetch:l,isFetching:g}=m({queryKey:["budgetDetailMonthBy",{month:t,area:e}],queryFn:({queryKey:p})=>{const[f,s]=p;return t.value&&e.value?y(s.month,s.area.alias):[]},refetchOnWindowFocus:!1});return{items:r,refetch:l,isLoading:a,isFetching:g,month:t,area:e}},v=()=>{const t=c();return{updateBudgetDetailMutation:d({mutationFn:h,onSuccess:async()=>{await t.invalidateQueries(["budgets"]),o.showSuccessNotification("El bien se actualiz\xF3 con \xE9xito")},onError:()=>{o.showErrorNotification("Error al actualizar el bien")}})}};export{v as a,F as b,x as u};
