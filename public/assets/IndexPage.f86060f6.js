import{j as Q,M as c,r as b,c as x,p as v,k as w,l as e,d as t,u as i,X as _,aN as C,n as F,aj as V}from"./index.a852c7dd.js";import{Q as k,a as B}from"./QTable.14f30bfe.js";import{c as P}from"./format.d73ecc87.js";import{T as A}from"./TablePage.adfa3862.js";import{u as I,a as S}from"./useBudgets.4ed977f0.js";import{Q as T}from"./QInput.5a757dc1.js";import{Q as q,a as L}from"./QItem.3abe05b4.js";import{Q as M}from"./QList.3193c694.js";import{Q as j}from"./QForm.1eb75f72.js";import{C as E}from"./CardForm.b98792ce.js";import{c as N}from"./index.7adaf3a2.js";import"./QMenu.1dc72ab8.js";import"./use-dark.84119dd2.js";import"./focus-manager.387b0375.js";import"./scroll.1d333f42.js";import"./QSelect.52923b78.js";import"./use-key-composition.0193e5f8.js";import"./QItemLabel.aabbfeaa.js";import"./QCheckbox.ecd43410.js";import"./QCard.1e7bb02d.js";import"./QPage.ea4e39d9.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./BudgetResource.e21a87b9.js";import"./index.2cf0d985.js";import"./layout.1849cf49.js";import"./useQuery.esm.6e7da3a0.js";import"./utils.esm.3b6b5005.js";import"./useMutation.esm.e5230e92.js";import"./mutation.esm.b0df21c1.js";import"./QCardSection.1618d2d3.js";import"./QCardActions.7c7151af.js";const U=Q({__name:"BudgetForm",props:{budget:null},setup(y){const f=y,{budgetStoreMutations:u}=I(),{isLoading:a}=u,m=c({year:2022}),l=c(N(f.budget||m)),n=b(),d={year:[o=>!!o||"El a\xF1o es requerido"]},s=x(()=>"Agregar presupuesto");async function g(){var r,p;!await((r=n.value)==null?void 0:r.validate())||(await u.mutateAsync(l),l.year=2022,(p=n.value)==null||p.reset())}return(o,r)=>(v(),w(E,{title:i(s)},{form:e(()=>[t(i(j),{ref_key:"budgetForm",ref:n,class:"q-gutter-md"},{default:e(()=>[t(M,null,{default:e(()=>[t(q,null,{default:e(()=>[t(L,null,{default:e(()=>[t(T,{modelValue:l.year,"onUpdate:modelValue":r[0]||(r[0]=p=>l.year=p),modelModifiers:{number:!0},dense:"",label:"A\xF1o",outlined:"",rules:d.year,type:"number"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),actions:e(()=>[t(_,{color:"primary",label:"Guardar",loading:i(a),onClick:g},null,8,["loading"])]),_:1},8,["title"]))}}),_e=Q({__name:"IndexPage",setup(y){const{data:f,isLoading:u}=S();b("");const a=b(!1);let m=c({year:2022});const l=[{name:"year",field:"year",label:"A\xF1o",sortable:!0,align:"left"},{name:"action",align:"center",label:"Acciones",field:"action",sortable:!1}];C(()=>{a.value||(m=c({year:2022}))});function n({href:d}){return{to:d}}return(d,s)=>{const g=F("router-link");return v(),w(A,null,{"card-body":e(()=>[t(B,{columns:l,loading:i(u),rows:i(f),"rows-per-page-options":[20,30,40,50],title:"Presupuestos"},{"top-right":e(()=>[t(_,{class:"q-mr-xs",color:"primary",icon:"add",label:"Crear Presupuesto",outline:"",onClick:s[0]||(s[0]=o=>a.value=!0)})]),"body-cell-year":e(o=>[t(k,{props:o},{default:e(()=>[t(g,{custom:"",to:{name:"budgets.detail",params:{id:o.row.id}}},{default:e(r=>[t(_,V(n(r),{color:"primary",flat:"",label:o.row.year,size:"md"}),null,16,["label"])]),_:2},1032,["to"])]),_:2},1032,["props"])]),_:1},8,["loading","rows"])]),footer:e(()=>[t(P,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=o=>a.value=o)},{default:e(()=>[t(U,{budget:i(m)},null,8,["budget"])]),_:1},8,["modelValue"])]),_:1})}}});export{_e as default};
