import{p as s,l as o}from"./layout.57642b32.js";import{u as B,a as c,b as d}from"./QSelect.0c416ba6.js";import{r as i}from"./index.c642270b.js";var r={storeDetail(t,e){return s.post(`/budgets/${t}/budget-details`,e)},getBudgetDetailMonthBy(t,e){return s.get(`/budget-details-month?month=${t}&area=${e}`)},updateBudgetDetail(t,e,a){return s.patch(`/budgets/${t}/budget-details/${e}`,{total:+a.total,estimated_amount:+a.estimated_amount})}};const y=async({budgetId:t,budgetDetail:e})=>{const{data:a}=await r.storeDetail(t,e);return a},h=async(t,e)=>{const{data:a}=await r.getBudgetDetailMonthBy(t,e);return a},m=async({budgetDetail:t})=>{const{data:e}=await r.updateBudgetDetail(t.budget_id,t.id,t);return e},E=()=>{const t=c();return{storeBudgetDetailMutation:d({mutationFn:a=>y(a),onSuccess:async(a,n)=>{await t.invalidateQueries(["budget",n.budgetId]),o.showSuccessNotification("El bien se agreg\xF3 al presupuesto con \xE9xito")},onError:()=>{o.showErrorNotification("Error al agregar el bien al presupuesto")}})}},M=()=>{const t=i(""),e=i(),{isLoading:a,data:n,refetch:l,isFetching:g}=B({queryKey:["budgetDetailMonthBy",{month:t,area:e}],queryFn:({queryKey:p})=>{const[D,u]=p;return t.value&&e.value?h(u.month,u.area.alias):[]},refetchOnWindowFocus:!1});return{items:n,refetch:l,isLoading:a,isFetching:g,month:t,area:e}},x=()=>{const t=c();return{updateBudgetDetailMutation:d({mutationFn:m,onSuccess:async()=>{await t.invalidateQueries(["budgets"]),o.showSuccessNotification("El bien se actualiz\xF3 con \xE9xito")},onError:()=>{o.showErrorNotification("Error al actualizar el bien")}})}};export{x as a,M as b,E as u};
