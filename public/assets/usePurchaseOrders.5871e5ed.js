import{p as s}from"./planeacion.api.1cf4c236.js";import{l as n}from"./layout.4b2b4fc6.js";import{a as u,u as p}from"./QChip.fc48aeaf.js";import{u as y}from"./useMutation.esm.1dca9e79.js";import{r as m,w as O}from"./index.5aa8c638.js";var c={getPurchaseOrders(r){return r?s.get("/purchase-orders/requisition-sub-budget"):s.get("/purchase-orders")},createPurchaseOrder(r){return s.post("/purchase-orders",r)},createPurchaseOrderFromRequisition(r){return s.post("/purchase-orders/requisition-sub-budget",r)},uploadFile(r,e){return s.post(`/files/purchase-orders/${r}`,e,{headers:{"Content-Type":"multipart/form-data"}})},getPurchaseDictionary(){return s.get("/purchase-orders/dictionary")},deletePurchaseOrder({id:r,requisitionType:e}){return s.delete(`/purchase-orders/${r}?requisitionType=${e}`)}};const d=m(""),P=async r=>{const{data:e}=await c.getPurchaseOrders(r);return e},g=async r=>{const{data:e}=d.value==="PRESUPUESTO"?await c.createPurchaseOrder(r):await c.createPurchaseOrderFromRequisition(r);return e},f=async()=>{const{data:r}=await c.getPurchaseDictionary();return r},S=({fromSubBudgets:r})=>{const e=u(),{isLoading:a,isError:t,data:o,isFetching:i,refetch:h}=p({queryKey:["purchase-orders"],queryFn:()=>P(r.value),staleTime:1e3*60});return O(r,async()=>{await e.invalidateQueries(["purchase-orders"])}),{isLoading:a,isError:t,orders:o,isFetching:i,purchaseOrderType:d}},b=({fromSubBudgets:r})=>{const e=u(),{isLoading:a,isError:t,mutateAsync:o,data:i}=y({mutationFn:g,onSuccess:async()=>{n.showSuccessNotification("Orden de compra creada con \xE9xito"),await e.invalidateQueries(["purchase-orders"])},onError:()=>{n.showErrorNotification("Error al crear orden de compra")}});return{purchaseOrder:i,createPurchaseOrder:o,isLoading:a,isError:t,purchaseOrderType:d}},v=()=>{const{isLoading:r,isError:e,data:a}=p({queryKey:["purchase-dictionary"],queryFn:f,staleTime:6e4});return{isLoading:r,isError:e,dictionary:a}},C=({fromSubBudgets:r})=>{const e=u(),{isLoading:a,isError:t,mutateAsync:o}=y({mutationFn:async({id:i,requisitionType:h})=>{const{data:l}=await c.deletePurchaseOrder({id:i,requisitionType:h});return l},onSuccess:async()=>{n.showSuccessNotification("Orden de compra eliminada con \xE9xito"),await e.invalidateQueries(["purchase-orders"])},onError:()=>{n.showErrorNotification("Error al eliminar orden de compra")}});return{deletePurchaseOrder:o,isDeleteingPurchaseOrder:a,isErrorDeletingPurchaseOrder:t}};export{c as P,S as a,C as b,v as c,b as u};
