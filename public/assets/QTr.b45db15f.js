import{Q as E}from"./format.971bd004.js";import{v as h,r as b,c as m,h as i,g as M,O as Q,aY as V,a3 as x,X as S,x as H}from"./index.fd322d53.js";function s(e,l=new WeakMap){if(Object(e)!==e)return e;if(l.has(e))return l.get(e);const t=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const n=e.valueOf();if(Object(n)!==n){const a=new e.constructor(n);return l.set(e,a),a}}return l.set(e,t),e instanceof Set?e.forEach(n=>{t.add(s(n,l))}):e instanceof Map&&e.forEach((n,a)=>{t.set(a,s(n,l))}),Object.assign(t,...Object.keys(e).map(n=>({[n]:s(e[n],l)})))}var k=h({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:l,emit:t}){const{proxy:n}=M(),{$q:a}=n,r=b(null),c=b(""),o=b("");let v=!1;const y=m(()=>x({initialValue:c.value,validate:e.validate,set:p,cancel:f,updatePosition:g},"value",()=>o.value,u=>{o.value=u}));function p(){e.validate(o.value)!==!1&&(d()===!0&&(t("save",o.value,c.value),t("update:modelValue",o.value)),w())}function f(){d()===!0&&t("cancel",o.value,c.value),w()}function g(){Q(()=>{r.value.updatePosition()})}function d(){return V(o.value,c.value)===!1}function w(){v=!0,r.value.hide()}function q(){v=!1,c.value=s(e.modelValue),o.value=s(e.modelValue),t("beforeShow")}function O(){t("show")}function j(){v===!1&&d()===!0&&(e.autoSave===!0&&e.validate(o.value)===!0?(t("save",o.value,c.value),t("update:modelValue",o.value)):t("cancel",o.value,c.value)),t("beforeHide")}function C(){t("hide")}function B(){const u=l.default!==void 0?[].concat(l.default(y.value)):[];return e.title&&u.unshift(i("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&u.push(i("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[i(S,{flat:!0,color:e.color,label:e.labelCancel||a.lang.label.cancel,onClick:f}),i(S,{flat:!0,color:e.color,label:e.labelSet||a.lang.label.set,onClick:p})])),u}return Object.assign(n,{set:p,cancel:f,show(u){r.value!==null&&r.value.show(u)},hide(u){r.value!==null&&r.value.hide(u)},updatePosition:g}),()=>{if(e.disable!==!0)return i(E,{ref:r,class:"q-popup-edit",cover:e.cover,onBeforeShow:q,onShow:O,onBeforeHide:j,onHide:C,onEscapeKey:f},B)}}}),D=h({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:l}){const t=m(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>i("tr",{class:t.value},H(l.default))}});export{D as Q,k as a};
