import{Q as y}from"./layout.50bbef5d.js";import{j as w,M as N,r as S,o as U,p as g,k as C,l as s,d as t,s as r,ba as D,_ as z,u as c,X as b,q as j,b9 as L,v as T,c as B,h as W,x as P,g as G,ag as F,F as H,an as X}from"./index.e80209f7.js";import{Q as J}from"./QFile.d05a8b81.js";import{Q as k}from"./QCardSection.f8679c73.js";import{a as v}from"./format.409cdf28.js";import{Q as E}from"./QCardActions.2ef66417.js";import{Q as K}from"./QForm.8e1d928a.js";import{_ as V}from"./DatePicker.baad5988.js";import{i as O,j as Y}from"./useSubBudgets.22e82aba.js";import{u as Z}from"./useGoBack.83a33ba2.js";import{F as ee}from"./FilePreview.c2c6e669.js";import{c as te}from"./index.7adaf3a2.js";import{u as ae,a as oe}from"./use-dark.0aa077e8.js";import{Q as ie}from"./QCard.6c844bf8.js";const le={class:"row q-gutter-md"},ne={class:"col-12 col-md-6 col-lg-4"},se={class:"col-12 col-md-6 col-lg-4"},re={class:"col-12 col-md-6 col-lg-4"},ue={class:"col-12 col-md-6 col-lg-4"},de={class:"col-12 col-md-6 col-lg-4"},Ve=w({__name:"SubBudgetRequisitionForm",props:{populateWith:{default:null},isEditing:{type:Boolean,default:!1},subBudget:null},setup(e){const o=e,m="https://nestjs-boilerplate-production.up.railway.app",{goBack:p}=Z(),{createSubBudgetRequisitionMutation:u}=O(),{isLoading:_}=u,{editSubBudgetRequisitionMutation:d}=Y(),{isLoading:A}=d,R={area_id:o.subBudget.department.id,file:void 0,estimated_amount:0,preparation_date:"",processing_date:"",requisition_number:"",sub_budget_id:o.subBudget.id},i=N(te(o.populateWith)||R),h=S(),f={estimated_amount:[a=>!!a||"El campo monto estimado es requerido"],preparation_date:[a=>!!a||"El campo fecha de preparaci\xF3n es requerido"],processing_date:[a=>!!a||"El campo fecha de procesamiento es requerido"],requisition_number:[a=>!!a||"El campo n\xFAmero de requisici\xF3n es requerido",a=>a.length==3||"El campo n\xFAmero de requisici\xF3n debe tener 3 d\xEDgitos",a=>!isNaN(Number(a))||"El campo n\xFAmero de requisici\xF3n debe ser un n\xFAmero"]},Q=S();async function $(){var l;await((l=h.value)==null?void 0:l.validate())&&(o.isEditing?await d.mutateAsync({dto:i}):await u.mutateAsync({createRequisitionSubBudgetDto:i}))}U(()=>{o.isEditing&&(i.area_id=o.subBudget.department.id,i.sub_budget_id=o.subBudget.id)});function I(a){i.file=a}return(a,l)=>(g(),C(c(K),{ref_key:"qSubBudgetReqForm",ref:h,onSubmit:L($,["prevent"])},{default:s(()=>[t(k,null,{default:s(()=>{var x;return[r("div",le,[r("div",ne,[t(y,{modelValue:i.requisition_number,"onUpdate:modelValue":l[0]||(l[0]=n=>i.requisition_number=n),dense:"",label:"N\xFAmero de requisici\xF3n",outlined:"",rules:f.requisition_number,"stack-label":""},null,8,["modelValue","rules"])]),r("div",se,[t(y,{modelValue:i.estimated_amount,"onUpdate:modelValue":l[1]||(l[1]=n=>i.estimated_amount=n),modelModifiers:{number:!0},dense:"",label:"Monto estimado",outlined:"",rules:f.estimated_amount,"stack-label":""},null,8,["modelValue","rules"])]),r("div",re,[t(V,{modelValue:i.preparation_date,"onUpdate:modelValue":l[2]||(l[2]=n=>i.preparation_date=n),label:"Fecha de preparaci\xF3n",rules:f.preparation_date},null,8,["modelValue","rules"])]),r("div",ue,[t(V,{modelValue:i.processing_date,"onUpdate:modelValue":l[3]||(l[3]=n=>i.processing_date=n),label:"Fecha de procesamiento",rules:f.processing_date},null,8,["modelValue","rules"])]),r("div",de,[t(J,{modelValue:Q.value,"onUpdate:modelValue":[l[4]||(l[4]=n=>Q.value=n),I],accept:".jpg, image/*, application/pdf",dense:"",label:"Haga click para subir el archivo o arrastralo aqu\xED",name:"file",outlined:"","use-chips":""},D({prepend:s(()=>[t(z,{name:"attach_file"})]),_:2},[e.isEditing&&((x=o.populateWith)==null?void 0:x.file)?{name:"append",fn:s(()=>{var n;return[t(ee,{"file-url":`${c(m)}/api/files/preview/${(n=o.populateWith)==null?void 0:n.file}`},{activator:s(({showPreview:M})=>[t(b,{color:"primary",flat:"",icon:"o_description","no-caps":"",onClick:M},{default:s(()=>[j(" Ver archivo ")]),_:2},1032,["onClick"])]),_:1},8,["file-url"])]}),key:"0"}:void 0]),1032,["modelValue"])])])]}),_:1}),t(v),t(E,{align:"right"},{default:s(()=>[t(b,{color:"primary",label:"Guardar",loading:c(A)||c(_),type:"submit"},null,8,["loading"]),t(b,{color:"primary",flat:"",label:"Atr\xE1s",onClick:c(p)},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"]))}}),ce=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],me=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var q=T({name:"QSkeleton",props:{...ae,tag:{type:String,default:"div"},type:{type:String,validator:e=>ce.includes(e),default:"rect"},animation:{type:String,validator:e=>me.includes(e),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(e,{slots:o}){const m=G(),p=oe(e,m.proxy.$q),u=B(()=>{const d=e.size!==void 0?[e.size,e.size]:[e.width,e.height];return{"--q-skeleton-speed":`${e.animationSpeed}ms`,width:d[0],height:d[1]}}),_=B(()=>`q-skeleton q-skeleton--${p.value===!0?"dark":"light"} q-skeleton--type-${e.type}`+(e.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${e.animation}`:"")+(e.square===!0?" q-skeleton--square":"")+(e.bordered===!0?" q-skeleton--bordered":""));return()=>W(e.tag,{class:_.value,style:u.value},P(o.default))}});const pe={class:"text-caption"},we=w({__name:"SkeletonForm",props:{inputCount:null},setup(e){const o=e;return(m,p)=>(g(),C(ie,{bordered:"",flat:""},{default:s(()=>[t(k,null,{default:s(()=>[r("div",pe,[t(q,{type:"text"})])]),_:1}),t(v),t(k,{class:"tw-flex tw-flex-col tw-gap-4"},{default:s(()=>[(g(!0),F(H,null,X(o.inputCount,u=>(g(),F("div",{key:u},[t(q,{type:"QInput"})]))),128))]),_:1}),t(v),t(E,{align:"right"},{default:s(()=>[t(q,{type:"QBtn"})]),_:1})]),_:1}))}});export{we as _,Ve as a};
