import{S as Ot,w as $e,n as ll,x as ht,y as mt,t as nl,f as il,b as ul,r as gt,i as al,a as qt,z as ol,v as rl,A as Xe,u as sl,s as It,B as cl}from"./utils.esm.f401af83.js";import{v as Le,r as _,c as w,w as X,z as Je,h as V,$ as yt,x as dl,g as Me,aE as fl,i as vl,N as Mt,aO as At,aP as Et,aQ as Ft,u as Re,I as hl,a7 as ml,U as gl,E as yl,D as Sl,J as re,aI as bl,aJ as pl,ao as wl,_ as Qe,aR as Cl,aS as Rl,a5 as he,a8 as xl,aT as kl,a9 as Ne,aU as qe,ax as Vl,a3 as Ce,a1 as Ol,O as ql}from"./index.c642270b.js";import{u as Ge,b as zt,e as Tt,d as Bt,a as Il,c as Ml,f as St,g as Al}from"./layout.57642b32.js";import{u as El,a as Fl}from"./use-dark.ce8ccf7c.js";import{u as zl,l as Tl,e as Bl,f as Ql,m as _l,n as Ll,o as Dl,g as Pl,h as Hl,r as bt,p as pt,i as Ul,q as Kl,s as jl,t as wt,Q as Nl,b as Wl,k as $l,a as Xl}from"./format.36dd34d6.js";import{a as Yl}from"./focus-manager.33224ae2.js";let Be=0;const Jl={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},Ct={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var Gl=Le({name:"QDialog",inheritAttrs:!1,props:{...zl,...Tl,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:e=>e==="standard"||["top","bottom","left","right"].includes(e)}},emits:[...Bl,"shake","click","escapeKey"],setup(e,{slots:l,emit:n,attrs:u}){const v=Me(),{proxy:{$q:i}}=v,h=_(null),d=_(!1),m=_(!1);let S=null,s=null,g,x;const b=w(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:T}=Ul(),{registerTimeout:I}=Ql(),{registerTick:p,removeTick:H}=_l(),{transitionProps:D,transitionStyle:B}=Ll(e,()=>Ct[e.position][0],()=>Ct[e.position][1]),{showPortal:F,hidePortal:E,portalIsAccessible:K,renderPortal:oe}=Dl(v,h,O,"dialog"),{hide:Q}=Pl({showing:d,hideOnRouteChange:b,handleShow:ue,handleHide:ee,processOnMount:!0}),{addToHistory:Y,removeFromHistory:J}=Hl(d,Q,b),$=w(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${Jl[e.position]}`+(m.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),G=w(()=>d.value===!0&&e.seamless!==!0),se=w(()=>e.autoClose===!0?{onClick:y}:{}),ce=w(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${G.value===!0?"modal":"seamless"}`,u.class]);X(()=>e.maximized,o=>{d.value===!0&&r(o)}),X(G,o=>{T(o),o===!0?(Kl(A),jl(le)):(bt(A),pt(le))});function ue(o){Y(),s=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,r(e.maximized),F(),m.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),p(te)):H(),I(()=>{if(v.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:q,bottom:k}=document.activeElement.getBoundingClientRect(),{innerHeight:U}=window,ne=window.visualViewport!==void 0?window.visualViewport.height:U;q>0&&k>ne/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-ne,k>=U?1/0:Math.ceil(document.scrollingElement.scrollTop+k-ne/2))),document.activeElement.scrollIntoView()}x=!0,h.value.click(),x=!1}F(!0),m.value=!1,n("show",o)},e.transitionDuration)}function ee(o){H(),J(),f(!0),m.value=!0,E(),s!==null&&(((o&&o.type.indexOf("key")===0?s.closest('[tabindex]:not([tabindex^="-"])'):void 0)||s).focus(),s=null),I(()=>{E(!0),m.value=!1,n("hide",o)},e.transitionDuration)}function te(o){Yl(()=>{let q=h.value;q===null||q.contains(document.activeElement)===!0||(q=(o!==""?q.querySelector(o):null)||q.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||q.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||q.querySelector("[autofocus], [data-autofocus]")||q,q.focus({preventScroll:!0}))})}function ae(o){o&&typeof o.focus=="function"?o.focus({preventScroll:!0}):te(),n("shake");const q=h.value;q!==null&&(q.classList.remove("q-animate--scale"),q.classList.add("q-animate--scale"),S!==null&&clearTimeout(S),S=setTimeout(()=>{S=null,h.value!==null&&(q.classList.remove("q-animate--scale"),te())},170))}function le(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&ae():(n("escapeKey"),Q()))}function f(o){S!==null&&(clearTimeout(S),S=null),(o===!0||d.value===!0)&&(r(!1),e.seamless!==!0&&(T(!1),bt(A),pt(le))),o!==!0&&(s=null)}function r(o){o===!0?g!==!0&&(Be<1&&document.body.classList.add("q-body--dialog"),Be++,g=!0):g===!0&&(Be<2&&document.body.classList.remove("q-body--dialog"),Be--,g=!1)}function y(o){x!==!0&&(Q(o),n("click",o))}function R(o){e.persistent!==!0&&e.noBackdropDismiss!==!0?Q(o):e.noShake!==!0&&ae(o.relatedTarget)}function A(o){e.allowFocusOutside!==!0&&K.value===!0&&fl(h.value,o.target)!==!0&&te('[tabindex]:not([tabindex="-1"])')}Object.assign(v.proxy,{focus:te,shake:ae,__updateRefocusTarget(o){s=o||null}}),Je(f);const P=i.platform.is.ios===!0||i.platform.is.safari?"onClick":"onFocusin";function O(){return V("div",{role:"dialog","aria-modal":G.value===!0?"true":"false",...u,class:ce.value},[V(yt,{name:"q-transition--fade",appear:!0},()=>G.value===!0?V("div",{class:"q-dialog__backdrop fixed-full",style:B.value,"aria-hidden":"true",tabindex:-1,[P]:R}):null),V(yt,D.value,()=>d.value===!0?V("div",{ref:h,class:$.value,style:B.value,tabindex:-1,...se.value},dl(l.default)):null)])}return oe}});class Zl extends Ot{constructor(l,n){super(),this.client=l,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.length===1&&(this.currentQuery.addObserver(this),Rt(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.listeners.length||this.destroy()}shouldFetchOnReconnect(){return Ye(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ye(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=[],this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(l,n){const u=this.options,v=this.currentQuery;if(this.options=this.client.defaultQueryOptions(l),$e(u,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled!="undefined"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=u.queryKey),this.updateQuery();const i=this.hasListeners();i&&xt(this.currentQuery,v,this.options,u)&&this.executeFetch(),this.updateResult(n),i&&(this.currentQuery!==v||this.options.enabled!==u.enabled||this.options.staleTime!==u.staleTime)&&this.updateStaleTimeout();const h=this.computeRefetchInterval();i&&(this.currentQuery!==v||this.options.enabled!==u.enabled||h!==this.currentRefetchInterval)&&this.updateRefetchInterval(h)}getOptimisticResult(l){const n=this.client.getQueryCache().build(this.client,l);return this.createResult(n,l)}getCurrentResult(){return this.currentResult}trackResult(l){const n={};return Object.keys(l).forEach(u=>{Object.defineProperty(n,u,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(u),l[u])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:l,...n}={}){return this.fetch({...n,meta:{refetchPage:l}})}fetchOptimistic(l){const n=this.client.defaultQueryOptions(l),u=this.client.getQueryCache().build(this.client,n);return u.isFetchingOptimistic=!0,u.fetch().then(()=>this.createResult(u,n))}fetch(l){var n;return this.executeFetch({...l,cancelRefetch:(n=l.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(l){this.updateQuery();let n=this.currentQuery.fetch(this.options,l);return l!=null&&l.throwOnError||(n=n.catch(ll)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),ht||this.currentResult.isStale||!mt(this.options.staleTime))return;const n=nl(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var l;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(l=this.options.refetchInterval)!=null?l:!1}updateRefetchInterval(l){this.clearRefetchInterval(),this.currentRefetchInterval=l,!(ht||this.options.enabled===!1||!mt(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||il.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(l,n){const u=this.currentQuery,v=this.options,i=this.currentResult,h=this.currentResultState,d=this.currentResultOptions,m=l!==u,S=m?l.state:this.currentQueryInitialState,s=m?this.currentResult:this.previousQueryResult,{state:g}=l;let{dataUpdatedAt:x,error:b,errorUpdatedAt:T,fetchStatus:I,status:p}=g,H=!1,D=!1,B;if(n._optimisticResults){const Q=this.hasListeners(),Y=!Q&&Rt(l,n),J=Q&&xt(l,u,n,v);(Y||J)&&(I=ul(l.options.networkMode)?"fetching":"paused",x||(p="loading")),n._optimisticResults==="isRestoring"&&(I="idle")}if(n.keepPreviousData&&!g.dataUpdatedAt&&s!=null&&s.isSuccess&&p!=="error")B=s.data,x=s.dataUpdatedAt,p=s.status,H=!0;else if(n.select&&typeof g.data!="undefined")if(i&&g.data===(h==null?void 0:h.data)&&n.select===this.selectFn)B=this.selectResult;else try{this.selectFn=n.select,B=n.select(g.data),B=gt(i==null?void 0:i.data,B,n),this.selectResult=B,this.selectError=null}catch(Q){this.selectError=Q}else B=g.data;if(typeof n.placeholderData!="undefined"&&typeof B=="undefined"&&p==="loading"){let Q;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(d==null?void 0:d.placeholderData))Q=i.data;else if(Q=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof Q!="undefined")try{Q=n.select(Q),this.selectError=null}catch(Y){this.selectError=Y}typeof Q!="undefined"&&(p="success",B=gt(i==null?void 0:i.data,Q,n),D=!0)}this.selectError&&(b=this.selectError,B=this.selectResult,T=Date.now(),p="error");const F=I==="fetching",E=p==="loading",K=p==="error";return{status:p,fetchStatus:I,isLoading:E,isSuccess:p==="success",isError:K,isInitialLoading:E&&F,data:B,dataUpdatedAt:x,error:b,errorUpdatedAt:T,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>S.dataUpdateCount||g.errorUpdateCount>S.errorUpdateCount,isFetching:F,isRefetching:F&&!E,isLoadingError:K&&g.dataUpdatedAt===0,isPaused:I==="paused",isPlaceholderData:D,isPreviousData:H,isRefetchError:K&&g.dataUpdatedAt!==0,isStale:Ze(l,n),refetch:this.refetch,remove:this.remove}}updateResult(l){const n=this.currentResult,u=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,$e(u,n))return;this.currentResult=u;const v={cache:!0},i=()=>{if(!n)return!0;const{notifyOnChangeProps:h}=this.options;if(h==="all"||!h&&!this.trackedProps.size)return!0;const d=new Set(h!=null?h:this.trackedProps);return this.options.useErrorBoundary&&d.add("error"),Object.keys(this.currentResult).some(m=>{const S=m;return this.currentResult[S]!==n[S]&&d.has(S)})};(l==null?void 0:l.listeners)!==!1&&i()&&(v.listeners=!0),this.notify({...v,...l})}updateQuery(){const l=this.client.getQueryCache().build(this.client,this.options);if(l===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=l,this.currentQueryInitialState=l.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n==null||n.removeObserver(this),l.addObserver(this))}onQueryUpdate(l){const n={};l.type==="success"?n.onSuccess=!l.manual:l.type==="error"&&!al(l.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(l){qt.batch(()=>{if(l.onSuccess){var n,u,v,i;(n=(u=this.options).onSuccess)==null||n.call(u,this.currentResult.data),(v=(i=this.options).onSettled)==null||v.call(i,this.currentResult.data,null)}else if(l.onError){var h,d,m,S;(h=(d=this.options).onError)==null||h.call(d,this.currentResult.error),(m=(S=this.options).onSettled)==null||m.call(S,void 0,this.currentResult.error)}l.listeners&&this.listeners.forEach(s=>{s(this.currentResult)}),l.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function en(e,l){return l.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&l.retryOnMount===!1)}function Rt(e,l){return en(e,l)||e.state.dataUpdatedAt>0&&Ye(e,l,l.refetchOnMount)}function Ye(e,l,n){if(l.enabled!==!1){const u=typeof n=="function"?n(e):n;return u==="always"||u!==!1&&Ze(e,l)}return!1}function xt(e,l,n,u){return n.enabled!==!1&&(e!==l||u.enabled===!1)&&(!n.suspense||e.state.status!=="error")&&Ze(e,n)}function Ze(e,l){return e.isStaleByTime(l.staleTime)}class tn extends Ot{constructor(l,n){super(),this.client=l,this.setOptions(n),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(l){const n=this.options;this.options=this.client.defaultMutationOptions(l),$e(n,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this})}onUnsubscribe(){if(!this.listeners.length){var l;(l=this.currentMutation)==null||l.removeObserver(this)}}onMutationUpdate(l){this.updateResult();const n={listeners:!0};l.type==="success"?n.onSuccess=!0:l.type==="error"&&(n.onError=!0),this.notify(n)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(l,n){return this.mutateOptions=n,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof l!="undefined"?l:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const l=this.currentMutation?this.currentMutation.state:ol(),n={...l,isLoading:l.status==="loading",isSuccess:l.status==="success",isError:l.status==="error",isIdle:l.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=n}notify(l){qt.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(l.onSuccess){var n,u,v,i;(n=(u=this.mutateOptions).onSuccess)==null||n.call(u,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(v=(i=this.mutateOptions).onSettled)==null||v.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(l.onError){var h,d,m,S;(h=(d=this.mutateOptions).onError)==null||h.call(d,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(m=(S=this.mutateOptions).onSettled)==null||m.call(S,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}l.listeners&&this.listeners.forEach(s=>{s(this.currentResult)})})}}function Qt(e=""){var l;if(!((l=Me())==null?void 0:l.proxy))throw new Error("vue-query hooks can only be used inside setup() function.");const u=rl(e),v=vl(u);if(!v)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return v}function ln(e,l,n={},u={}){var v;const i=w(()=>nn(l,n,u)),h=(v=i.value.queryClient)!=null?v:Qt(i.value.queryClientKey),d=w(()=>{const x=h.defaultQueryOptions(i.value);return x._optimisticResults=h.isRestoring.value?"isRestoring":"optimistic",x}),m=new e(h,d.value),S=Mt(m.getCurrentResult()),s=_(()=>{});X(h.isRestoring,x=>{x||(s.value(),s.value=m.subscribe(b=>{Xe(S,b)}))},{immediate:!0}),X(d,()=>{m.setOptions(d.value),Xe(S,m.getCurrentResult())},{deep:!0}),At(()=>{s.value()});const g=()=>new Promise(x=>{let b=()=>{};const T=()=>{if(d.value.enabled!==!1){const I=m.getOptimisticResult(d.value);I.isStale?(b(),x(m.fetchOptimistic(d.value))):(b(),x(I))}};T(),b=X(d,T,{deep:!0})});return{...Et(Ft(S)),suspense:g}}function nn(e,l={},n={}){const u=Re(e),v=Re(l),i=Re(n);let h=u;return sl(u)?typeof v=="function"?h={...i,queryKey:u,queryFn:v}:h={...v,queryKey:u}:h=u,It(h)}function wn(e,l,n){const u=ln(Zl,e,l,n);return{...u,refetch:u.refetch.value,remove:u.remove.value}}function Cn(e,l,n){var u;const v=w(()=>un(e,l,n)),i=(u=v.value.queryClient)!=null?u:Qt(v.value.queryClientKey),h=new tn(i,i.defaultMutationOptions(v.value)),d=Mt(h.getCurrentResult()),m=h.subscribe(g=>{Xe(d,g)}),S=(g,x)=>{h.mutate(g,x).catch(()=>{})};return X(v,()=>{h.setOptions(i.defaultMutationOptions(v.value))},{deep:!0}),At(()=>{m()}),{...Et(Ft(d)),mutate:S,mutateAsync:d.mutate,reset:d.reset}}function un(e,l,n){const u=Re(e),v=Re(l);let i=u;return cl(u)&&(typeof v=="function"?i={...Re(n),mutationKey:u,mutationFn:v}:i={...v,mutationKey:u}),typeof u=="function"&&(i={...v,mutationFn:u}),It(i)}let _e=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const l=document.createElement("div");Object.assign(l.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(l),e.scrollLeft=-1e3,_e=e.scrollLeft>=0,e.remove()}const Z=1e3,an=["start","center","end","start-force","center-force","end-force"],_t=Array.prototype.filter,on=window.getComputedStyle(document.body).overflowAnchor===void 0?hl:function(e,l){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];_t.call(n,v=>v.dataset&&v.dataset.qVsAnchor!==void 0).forEach(v=>{delete v.dataset.qVsAnchor});const u=n[l];u&&u.dataset&&(u.dataset.qVsAnchor="")}))};function xe(e,l){return e+l}function We(e,l,n,u,v,i,h,d){const m=e===window?document.scrollingElement||document.documentElement:e,S=v===!0?"offsetWidth":"offsetHeight",s={scrollStart:0,scrollViewSize:-h-d,scrollMaxSize:0,offsetStart:-h,offsetEnd:-d};if(v===!0?(e===window?(s.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,s.scrollViewSize+=document.documentElement.clientWidth):(s.scrollStart=m.scrollLeft,s.scrollViewSize+=m.clientWidth),s.scrollMaxSize=m.scrollWidth,i===!0&&(s.scrollStart=(_e===!0?s.scrollMaxSize-s.scrollViewSize:0)-s.scrollStart)):(e===window?(s.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,s.scrollViewSize+=document.documentElement.clientHeight):(s.scrollStart=m.scrollTop,s.scrollViewSize+=m.clientHeight),s.scrollMaxSize=m.scrollHeight),n!==null)for(let g=n.previousElementSibling;g!==null;g=g.previousElementSibling)g.classList.contains("q-virtual-scroll--skip")===!1&&(s.offsetStart+=g[S]);if(u!==null)for(let g=u.nextElementSibling;g!==null;g=g.nextElementSibling)g.classList.contains("q-virtual-scroll--skip")===!1&&(s.offsetEnd+=g[S]);if(l!==e){const g=m.getBoundingClientRect(),x=l.getBoundingClientRect();v===!0?(s.offsetStart+=x.left-g.left,s.offsetEnd-=x.width):(s.offsetStart+=x.top-g.top,s.offsetEnd-=x.height),e!==window&&(s.offsetStart+=s.scrollStart),s.offsetEnd+=s.scrollMaxSize-s.offsetStart}return s}function kt(e,l,n,u){l==="end"&&(l=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(u===!0&&(l=(_e===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-l),window.scrollTo(l,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,l):n===!0?(u===!0&&(l=(_e===!0?e.scrollWidth-e.offsetWidth:0)-l),e.scrollLeft=l):e.scrollTop=l}function Ie(e,l,n,u){if(n>=u)return 0;const v=l.length,i=Math.floor(n/Z),h=Math.floor((u-1)/Z)+1;let d=e.slice(i,h).reduce(xe,0);return n%Z!==0&&(d-=l.slice(i*Z,n).reduce(xe,0)),u%Z!==0&&u!==v&&(d-=l.slice(u,h*Z).reduce(xe,0)),d}const Lt={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Rn=Object.keys(Lt),rn={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Lt};function sn({virtualScrollLength:e,getVirtualScrollTarget:l,getVirtualScrollEl:n,virtualScrollItemSizeComputed:u}){const v=Me(),{props:i,emit:h,proxy:d}=v,{$q:m}=d;let S,s,g,x=[],b;const T=_(0),I=_(0),p=_({}),H=_(null),D=_(null),B=_(null),F=_({from:0,to:0}),E=w(()=>i.tableColspan!==void 0?i.tableColspan:100);u===void 0&&(u=w(()=>i.virtualScrollItemSize));const K=w(()=>u.value+";"+i.virtualScrollHorizontal),oe=w(()=>K.value+";"+i.virtualScrollSliceRatioBefore+";"+i.virtualScrollSliceRatioAfter);X(oe,()=>{ee()}),X(K,Q);function Q(){ue(s,!0)}function Y(r){ue(r===void 0?s:r)}function J(r,y){const R=l();if(R==null||R.nodeType===8)return;const A=We(R,n(),H.value,D.value,i.virtualScrollHorizontal,m.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd);g!==A.scrollViewSize&&ee(A.scrollViewSize),G(R,A,Math.min(e.value-1,Math.max(0,parseInt(r,10)||0)),0,an.indexOf(y)>-1?y:s>-1&&r>s?"end":"start")}function $(){const r=l();if(r==null||r.nodeType===8)return;const y=We(r,n(),H.value,D.value,i.virtualScrollHorizontal,m.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd),R=e.value-1,A=y.scrollMaxSize-y.offsetStart-y.offsetEnd-I.value;if(S===y.scrollStart)return;if(y.scrollMaxSize<=0){G(r,y,0,0);return}g!==y.scrollViewSize&&ee(y.scrollViewSize),se(F.value.from);const P=Math.floor(y.scrollMaxSize-Math.max(y.scrollViewSize,y.offsetEnd)-Math.min(b[R],y.scrollViewSize/2));if(P>0&&Math.ceil(y.scrollStart)>=P){G(r,y,R,y.scrollMaxSize-y.offsetEnd-x.reduce(xe,0));return}let O=0,o=y.scrollStart-y.offsetStart,q=o;if(o<=A&&o+y.scrollViewSize>=T.value)o-=T.value,O=F.value.from,q=o;else for(let k=0;o>=x[k]&&O<R;k++)o-=x[k],O+=Z;for(;o>0&&O<R;)o-=b[O],o>-y.scrollViewSize?(O++,q=o):q=b[O]+o;G(r,y,O,q)}function G(r,y,R,A,P){const O=typeof P=="string"&&P.indexOf("-force")>-1,o=O===!0?P.replace("-force",""):P,q=o!==void 0?o:"start";let k=Math.max(0,R-p.value[q]),U=k+p.value.total;U>e.value&&(U=e.value,k=Math.max(0,U-p.value.total)),S=y.scrollStart;const ne=k!==F.value.from||U!==F.value.to;if(ne===!1&&o===void 0){ae(R);return}const{activeElement:ke}=document,ie=B.value;ne===!0&&ie!==null&&ie!==ke&&ie.contains(ke)===!0&&(ie.addEventListener("focusout",ce),setTimeout(()=>{ie!==null&&ie.removeEventListener("focusout",ce)})),on(ie,R-k);const Ae=o!==void 0?b.slice(k,R).reduce(xe,0):0;if(ne===!0){const de=U>=F.value.from&&k<=F.value.to?F.value.to:U;F.value={from:k,to:de},T.value=Ie(x,b,0,k),I.value=Ie(x,b,U,e.value),requestAnimationFrame(()=>{F.value.to!==U&&S===y.scrollStart&&(F.value={from:F.value.from,to:U},I.value=Ie(x,b,U,e.value))})}requestAnimationFrame(()=>{if(S!==y.scrollStart)return;ne===!0&&se(k);const de=b.slice(k,R).reduce(xe,0),me=de+y.offsetStart+T.value,Ee=me+b[R];let Ve=me+A;if(o!==void 0){const De=de-Ae,N=y.scrollStart+De;Ve=O!==!0&&N<me&&Ee<N+y.scrollViewSize?N:o==="end"?Ee-y.scrollViewSize:me-(o==="start"?0:Math.round((y.scrollViewSize-b[R])/2))}S=Ve,kt(r,Ve,i.virtualScrollHorizontal,m.lang.rtl),ae(R)})}function se(r){const y=B.value;if(y){const R=_t.call(y.children,k=>k.classList&&k.classList.contains("q-virtual-scroll--skip")===!1),A=R.length,P=i.virtualScrollHorizontal===!0?k=>k.getBoundingClientRect().width:k=>k.offsetHeight;let O=r,o,q;for(let k=0;k<A;){for(o=P(R[k]),k++;k<A&&R[k].classList.contains("q-virtual-scroll--with-prev")===!0;)o+=P(R[k]),k++;q=o-b[O],q!==0&&(b[O]+=q,x[Math.floor(O/Z)]+=q),O++}}}function ce(){B.value!==null&&B.value!==void 0&&B.value.focus()}function ue(r,y){const R=1*u.value;(y===!0||Array.isArray(b)===!1)&&(b=[]);const A=b.length;b.length=e.value;for(let O=e.value-1;O>=A;O--)b[O]=R;const P=Math.floor((e.value-1)/Z);x=[];for(let O=0;O<=P;O++){let o=0;const q=Math.min((O+1)*Z,e.value);for(let k=O*Z;k<q;k++)o+=b[k];x.push(o)}s=-1,S=void 0,T.value=Ie(x,b,0,F.value.from),I.value=Ie(x,b,F.value.to,e.value),r>=0?(se(F.value.from),re(()=>{J(r)})):le()}function ee(r){if(r===void 0&&typeof window!="undefined"){const o=l();o!=null&&o.nodeType!==8&&(r=We(o,n(),H.value,D.value,i.virtualScrollHorizontal,m.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd).scrollViewSize)}g=r;const y=parseFloat(i.virtualScrollSliceRatioBefore)||0,R=parseFloat(i.virtualScrollSliceRatioAfter)||0,A=1+y+R,P=r===void 0||r<=0?1:Math.ceil(r/u.value),O=Math.max(1,P,Math.ceil((i.virtualScrollSliceSize>0?i.virtualScrollSliceSize:10)/A));p.value={total:Math.ceil(O*A),start:Math.ceil(O*y),center:Math.ceil(O*(.5+y)),end:Math.ceil(O*(1+y)),view:P}}function te(r,y){const R=i.virtualScrollHorizontal===!0?"width":"height",A={["--q-virtual-scroll-item-"+R]:u.value+"px"};return[r==="tbody"?V(r,{class:"q-virtual-scroll__padding",key:"before",ref:H},[V("tr",[V("td",{style:{[R]:`${T.value}px`,...A},colspan:E.value})])]):V(r,{class:"q-virtual-scroll__padding",key:"before",ref:H,style:{[R]:`${T.value}px`,...A}}),V(r,{class:"q-virtual-scroll__content",key:"content",ref:B,tabindex:-1},y.flat()),r==="tbody"?V(r,{class:"q-virtual-scroll__padding",key:"after",ref:D},[V("tr",[V("td",{style:{[R]:`${I.value}px`,...A},colspan:E.value})])]):V(r,{class:"q-virtual-scroll__padding",key:"after",ref:D,style:{[R]:`${I.value}px`,...A}})]}function ae(r){s!==r&&(i.onVirtualScroll!==void 0&&h("virtualScroll",{index:r,from:F.value.from,to:F.value.to-1,direction:r<s?"decrease":"increase",ref:d}),s=r)}ee();const le=ml($,m.platform.is.ios===!0?120:35);gl(()=>{ee()});let f=!1;return yl(()=>{f=!0}),Sl(()=>{if(f!==!0)return;const r=l();S!==void 0&&r!==void 0&&r!==null&&r.nodeType!==8?kt(r,S,i.virtualScrollHorizontal,m.lang.rtl):J(s)}),Je(()=>{le.cancel()}),Object.assign(d,{scrollTo:J,reset:Q,refresh:Y}),{virtualScrollSliceRange:F,virtualScrollSliceSizeComputed:p,setVirtualScrollSize:ee,onVirtualScrollEvt:le,localResetVirtualScroll:ue,padVirtualScroll:te,scrollTo:J,reset:Q,refresh:Y}}var cn=Le({name:"QField",inheritAttrs:!1,props:Ge,emits:zt,setup(){return Tt(Bt())}});const dn={xs:8,sm:10,md:14,lg:20,xl:24};var fn=Le({name:"QChip",props:{...El,...bl,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:l,emit:n}){const{proxy:{$q:u}}=Me(),v=Fl(e,u),i=pl(e,dn),h=w(()=>e.selected===!0||e.icon!==void 0),d=w(()=>e.selected===!0?e.iconSelected||u.iconSet.chip.selected:e.icon),m=w(()=>e.iconRemove||u.iconSet.chip.remove),S=w(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),s=w(()=>{const p=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(p?` text-${p} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(S.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(v.value===!0?" q-chip--dark q-dark":"")}),g=w(()=>{const p=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},H={...p,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||u.lang.label.remove};return{chip:p,remove:H}});function x(p){p.keyCode===13&&b(p)}function b(p){e.disable||(n("update:selected",!e.selected),n("click",p))}function T(p){(p.keyCode===void 0||p.keyCode===13)&&(he(p),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function I(){const p=[];S.value===!0&&p.push(V("div",{class:"q-focus-helper"})),h.value===!0&&p.push(V(Qe,{class:"q-chip__icon q-chip__icon--left",name:d.value}));const H=e.label!==void 0?[V("div",{class:"ellipsis"},[e.label])]:void 0;return p.push(V("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Cl(l.default,H))),e.iconRight&&p.push(V(Qe,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&p.push(V(Qe,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:m.value,...g.value.remove,onClick:T,onKeyup:T})),p}return()=>{if(e.modelValue===!1)return;const p={class:s.value,style:i.value};return S.value===!0&&Object.assign(p,g.value.chip,{onClick:b,onKeyup:x}),wl("div",p,I(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Rl,e.ripple]])}}});const Vt=e=>["add","add-unique","toggle"].includes(e),vn=".*+?^${}()|[]\\",hn=Object.keys(Ge);var xn=Le({name:"QSelect",inheritAttrs:!1,props:{...rn,...Il,...Ge,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Vt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...zt,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:l,emit:n}){const{proxy:u}=Me(),{$q:v}=u,i=_(!1),h=_(!1),d=_(-1),m=_(""),S=_(!1),s=_(!1);let g=null,x,b,T,I=null,p,H,D,B;const F=_(null),E=_(null),K=_(null),oe=_(null),Q=_(null),Y=Ml(e),J=Al(st),$=w(()=>Array.isArray(e.options)?e.options.length:0),G=w(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:se,virtualScrollSliceSizeComputed:ce,localResetVirtualScroll:ue,padVirtualScroll:ee,onVirtualScrollEvt:te,scrollTo:ae,setVirtualScrollSize:le}=sn({virtualScrollLength:$,getVirtualScrollTarget:Ut,getVirtualScrollEl:ot,virtualScrollItemSizeComputed:G}),f=Bt(),r=w(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,c=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const a=e.mapOptions===!0&&x!==void 0?x:[],C=c.map(z=>Ht(z,a));return e.modelValue===null&&t===!0?C.filter(z=>z!==null):C}return c}),y=w(()=>{const t={};return hn.forEach(c=>{const a=e[c];a!==void 0&&(t[c]=a)}),t}),R=w(()=>e.optionsDark===null?f.isDark.value:e.optionsDark),A=w(()=>St(r.value)),P=w(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||r.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),O=w(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),o=w(()=>$.value===0),q=w(()=>r.value.map(t=>W.value(t)).join(", ")),k=w(()=>e.displayValue!==void 0?e.displayValue:q.value),U=w(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),ne=w(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||r.value.some(U.value))),ke=w(()=>f.focused.value===!0?e.tabindex:-1),ie=w(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":i.value===!0?"true":"false","aria-controls":`${f.targetUid.value}_lb`};return d.value>=0&&(t["aria-activedescendant"]=`${f.targetUid.value}_${d.value}`),t}),Ae=w(()=>({id:`${f.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),de=w(()=>r.value.map((t,c)=>({index:c,opt:t,html:U.value(t),selected:!0,removeAtIndex:Pt,toggleOption:fe,tabindex:ke.value}))),me=w(()=>{if($.value===0)return[];const{from:t,to:c}=se.value;return e.options.slice(t,c).map((a,C)=>{const z=ge.value(a)===!0,M=t+C,L={clickable:!0,active:!1,activeClass:De.value,manualFocus:!0,focused:!1,disable:z,tabindex:-1,dense:e.optionsDense,dark:R.value,role:"option",id:`${f.targetUid.value}_${M}`,onClick:()=>{fe(a)}};return z!==!0&&(Ue(a)===!0&&(L.active=!0),d.value===M&&(L.focused=!0),L["aria-selected"]=L.active===!0?"true":"false",v.platform.is.desktop===!0&&(L.onMousemove=()=>{i.value===!0&&ye(M)})),{index:M,opt:a,html:U.value(a),label:W.value(a),selected:L.active,focused:L.focused,toggleOption:fe,setOptionIndex:ye,itemProps:L}})}),Ee=w(()=>e.dropdownIcon!==void 0?e.dropdownIcon:v.iconSet.arrow.dropdown),Ve=w(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),De=w(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),N=w(()=>He(e.optionValue,"value")),W=w(()=>He(e.optionLabel,"label")),ge=w(()=>He(e.optionDisable,"disable")),Fe=w(()=>r.value.map(t=>N.value(t))),Dt=w(()=>{const t={onInput:st,onChange:J,onKeydown:at,onKeyup:it,onKeypress:ut,onFocus:lt,onClick(c){b===!0&&Ce(c)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=J,t});X(r,t=>{x=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&f.innerLoading.value!==!0&&(h.value!==!0&&i.value!==!0||A.value!==!0)&&(T!==!0&&we(),(h.value===!0||i.value===!0)&&Se(""))},{immediate:!0}),X(()=>e.fillInput,we),X(i,Ke),X($,tl);function et(t){return e.emitValue===!0?N.value(t):t}function Pe(t){if(t>-1&&t<r.value.length)if(e.multiple===!0){const c=e.modelValue.slice();n("remove",{index:t,value:c.splice(t,1)[0]}),n("update:modelValue",c)}else n("update:modelValue",null)}function Pt(t){Pe(t),f.focus()}function tt(t,c){const a=et(t);if(e.multiple!==!0){e.fillInput===!0&&Oe(W.value(t),!0,!0),n("update:modelValue",a);return}if(r.value.length===0){n("add",{index:0,value:a}),n("update:modelValue",e.multiple===!0?[a]:a);return}if(c===!0&&Ue(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const C=e.modelValue.slice();n("add",{index:C.length,value:a}),C.push(a),n("update:modelValue",C)}function fe(t,c){if(f.editable.value!==!0||t===void 0||ge.value(t)===!0)return;const a=N.value(t);if(e.multiple!==!0){c!==!0&&(Oe(e.fillInput===!0?W.value(t):"",!0,!0),ve()),E.value!==null&&E.value.focus(),(r.value.length===0||qe(N.value(r.value[0]),a)!==!0)&&n("update:modelValue",e.emitValue===!0?a:t);return}if((b!==!0||S.value===!0)&&f.focus(),lt(),r.value.length===0){const M=e.emitValue===!0?a:t;n("add",{index:0,value:M}),n("update:modelValue",e.multiple===!0?[M]:M);return}const C=e.modelValue.slice(),z=Fe.value.findIndex(M=>qe(M,a));if(z>-1)n("remove",{index:z,value:C.splice(z,1)[0]});else{if(e.maxValues!==void 0&&C.length>=e.maxValues)return;const M=e.emitValue===!0?a:t;n("add",{index:C.length,value:M}),C.push(M)}n("update:modelValue",C)}function ye(t){if(v.platform.is.desktop!==!0)return;const c=t>-1&&t<$.value?t:-1;d.value!==c&&(d.value=c)}function ze(t=1,c){if(i.value===!0){let a=d.value;do a=wt(a+t,-1,$.value-1);while(a!==-1&&a!==d.value&&ge.value(e.options[a])===!0);d.value!==a&&(ye(a),ae(a),c!==!0&&e.useInput===!0&&e.fillInput===!0&&Te(a>=0?W.value(e.options[a]):p))}}function Ht(t,c){const a=C=>qe(N.value(C),t);return e.options.find(a)||c.find(a)||t}function He(t,c){const a=t!==void 0?t:c;return typeof a=="function"?a:C=>C!==null&&typeof C=="object"&&a in C?C[a]:C}function Ue(t){const c=N.value(t);return Fe.value.find(a=>qe(a,c))!==void 0}function lt(t){e.useInput===!0&&E.value!==null&&(t===void 0||E.value===t.target&&t.target.value===q.value)&&E.value.select()}function nt(t){Vl(t,27)===!0&&i.value===!0&&(Ce(t),ve(),we()),n("keyup",t)}function it(t){const{value:c}=t.target;if(t.keyCode!==void 0){nt(t);return}if(t.target.value="",g!==null&&(clearTimeout(g),g=null),we(),typeof c=="string"&&c.length>0){const a=c.toLocaleLowerCase(),C=M=>{const L=e.options.find(j=>M.value(j).toLocaleLowerCase()===a);return L===void 0?!1:(r.value.indexOf(L)===-1?fe(L):ve(),!0)},z=M=>{C(N)!==!0&&(C(W)===!0||M===!0||Se(c,!0,()=>z(!0)))};z()}else f.clearValue(t)}function ut(t){n("keypress",t)}function at(t){if(n("keydown",t),Ol(t)===!0)return;const c=m.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),a=t.shiftKey!==!0&&e.multiple!==!0&&(d.value>-1||c===!0);if(t.keyCode===27){Ne(t);return}if(t.keyCode===9&&a===!1){be();return}if(t.target===void 0||t.target.id!==f.targetUid.value)return;if(t.keyCode===40&&f.innerLoading.value!==!0&&i.value===!1){he(t),pe();return}if(t.keyCode===8&&e.hideSelected!==!0&&m.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Pe(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof m.value!="string"||m.value.length===0)&&(he(t),d.value=-1,ze(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&ce.value!==void 0&&(he(t),d.value=Math.max(-1,Math.min($.value,d.value+(t.keyCode===33?-1:1)*ce.value.view)),ze(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(he(t),ze(t.keyCode===38?-1:1,e.multiple));const C=$.value;if((D===void 0||B<Date.now())&&(D=""),C>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||D.length>0)){i.value!==!0&&pe(t);const z=t.key.toLocaleLowerCase(),M=D.length===1&&D[0]===z;B=Date.now()+1500,M===!1&&(he(t),D+=z);const L=new RegExp("^"+D.split("").map(je=>vn.indexOf(je)>-1?"\\"+je:je).join(".*"),"i");let j=d.value;if(M===!0||j<0||L.test(W.value(e.options[j]))!==!0)do j=wt(j+1,-1,C-1);while(j!==d.value&&(ge.value(e.options[j])===!0||L.test(W.value(e.options[j]))!==!0));d.value!==j&&re(()=>{ye(j),ae(j),j>=0&&e.useInput===!0&&e.fillInput===!0&&Te(W.value(e.options[j]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||D!=="")&&(t.keyCode!==9||a===!1))){if(t.keyCode!==9&&he(t),d.value>-1&&d.value<C){fe(e.options[d.value]);return}if(c===!0){const z=(M,L)=>{if(L){if(Vt(L)!==!0)return}else L=e.newValueMode;if(M==null)return;Oe("",e.multiple!==!0,!0),(L==="toggle"?fe:tt)(M,L==="add-unique"),e.multiple!==!0&&(E.value!==null&&E.value.focus(),ve())};if(e.onNewValue!==void 0?n("newValue",m.value,z):z(m.value),e.multiple!==!0)return}i.value===!0?be():f.innerLoading.value!==!0&&pe()}}function ot(){return b===!0?Q.value:K.value!==null&&K.value.contentEl!==null?K.value.contentEl:void 0}function Ut(){return ot()}function Kt(){return e.hideSelected===!0?[]:l["selected-item"]!==void 0?de.value.map(t=>l["selected-item"](t)).slice():l.selected!==void 0?[].concat(l.selected()):e.useChips===!0?de.value.map((t,c)=>V(fn,{key:"option-"+c,removable:f.editable.value===!0&&ge.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:ke.value,onRemove(){t.removeAtIndex(c)}},()=>V("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:W.value(t.opt)}))):[V("span",{[ne.value===!0?"innerHTML":"textContent"]:k.value})]}function rt(){if(o.value===!0)return l["no-option"]!==void 0?l["no-option"]({inputValue:m.value}):void 0;const t=l.option!==void 0?l.option:a=>V(Xl,{key:a.index,...a.itemProps},()=>V(Wl,()=>V($l,()=>V("span",{[a.html===!0?"innerHTML":"textContent"]:a.label}))));let c=ee("div",me.value.map(t));return l["before-options"]!==void 0&&(c=l["before-options"]().concat(c)),ql(l["after-options"],c)}function jt(t,c){const a=c===!0?{...ie.value,...f.splitAttrs.attributes.value}:void 0,C={ref:c===!0?E:void 0,key:"i_t",class:P.value,style:e.inputStyle,value:m.value!==void 0?m.value:"",type:"search",...a,id:c===!0?f.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Dt.value};return t!==!0&&b===!0&&(Array.isArray(C.class)===!0?C.class=[...C.class,"no-pointer-events"]:C.class+=" no-pointer-events"),V("input",C)}function st(t){g!==null&&(clearTimeout(g),g=null),!(t&&t.target&&t.target.qComposing===!0)&&(Te(t.target.value||""),T=!0,p=m.value,f.focused.value!==!0&&(b!==!0||S.value===!0)&&f.focus(),e.onFilter!==void 0&&(g=setTimeout(()=>{g=null,Se(m.value)},e.inputDebounce)))}function Te(t){m.value!==t&&(m.value=t,n("inputValue",t))}function Oe(t,c,a){T=a!==!0,e.useInput===!0&&(Te(t),(c===!0||a!==!0)&&(p=t),c!==!0&&Se(t))}function Se(t,c,a){if(e.onFilter===void 0||c!==!0&&f.focused.value!==!0)return;f.innerLoading.value===!0?n("filterAbort"):(f.innerLoading.value=!0,s.value=!0),t!==""&&e.multiple!==!0&&r.value.length>0&&T!==!0&&t===W.value(r.value[0])&&(t="");const C=setTimeout(()=>{i.value===!0&&(i.value=!1)},10);I!==null&&clearTimeout(I),I=C,n("filter",t,(z,M)=>{(c===!0||f.focused.value===!0)&&I===C&&(clearTimeout(I),typeof z=="function"&&z(),s.value=!1,re(()=>{f.innerLoading.value=!1,f.editable.value===!0&&(c===!0?i.value===!0&&ve():i.value===!0?Ke(!0):i.value=!0),typeof M=="function"&&re(()=>{M(u)}),typeof a=="function"&&re(()=>{a(u)})}))},()=>{f.focused.value===!0&&I===C&&(clearTimeout(I),f.innerLoading.value=!1,s.value=!1),i.value===!0&&(i.value=!1)})}function Nt(){return V(Nl,{ref:K,class:O.value,style:e.popupContentStyle,modelValue:i.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&o.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:R.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Ve.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Ae.value,onScrollPassive:te,onBeforeShow:dt,onBeforeHide:Wt,onShow:$t},rt)}function Wt(t){ft(t),be()}function $t(){le()}function Xt(t){Ce(t),E.value!==null&&E.value.focus(),S.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Yt(t){Ce(t),re(()=>{S.value=!1})}function Jt(){const t=[V(cn,{class:`col-auto ${f.fieldClass.value}`,...y.value,for:f.targetUid.value,dark:R.value,square:!0,loading:s.value,itemAligned:!1,filled:!0,stackLabel:m.value.length>0,...f.splitAttrs.listeners.value,onFocus:Xt,onBlur:Yt},{...l,rawControl:()=>f.getControl(!0),before:void 0,after:void 0})];return i.value===!0&&t.push(V("div",{ref:Q,class:O.value+" scroll",style:e.popupContentStyle,...Ae.value,onClick:Ne,onScrollPassive:te},rt())),V(Gl,{ref:oe,modelValue:h.value,position:e.useInput===!0?"top":void 0,transitionShow:H,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:dt,onBeforeHide:Gt,onHide:Zt,onShow:el},()=>V("div",{class:"q-select__dialog"+(R.value===!0?" q-select__dialog--dark q-dark":"")+(S.value===!0?" q-select__dialog--focused":"")},t))}function Gt(t){ft(t),oe.value!==null&&oe.value.__updateRefocusTarget(f.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),f.focused.value=!1}function Zt(t){ve(),f.focused.value===!1&&n("blur",t),we()}function el(){const t=document.activeElement;(t===null||t.id!==f.targetUid.value)&&E.value!==null&&E.value!==t&&E.value.focus(),le()}function be(){h.value!==!0&&(d.value=-1,i.value===!0&&(i.value=!1),f.focused.value===!1&&(I!==null&&(clearTimeout(I),I=null),f.innerLoading.value===!0&&(n("filterAbort"),f.innerLoading.value=!1,s.value=!1)))}function pe(t){f.editable.value===!0&&(b===!0?(f.onControlFocusin(t),h.value=!0,re(()=>{f.focus()})):f.focus(),e.onFilter!==void 0?Se(m.value):(o.value!==!0||l["no-option"]!==void 0)&&(i.value=!0))}function ve(){h.value=!1,be()}function we(){e.useInput===!0&&Oe(e.multiple!==!0&&e.fillInput===!0&&r.value.length>0&&W.value(r.value[0])||"",!0,!0)}function Ke(t){let c=-1;if(t===!0){if(r.value.length>0){const a=N.value(r.value[0]);c=e.options.findIndex(C=>qe(N.value(C),a))}ue(c)}ye(c)}function tl(t,c){i.value===!0&&f.innerLoading.value===!1&&(ue(-1,!0),re(()=>{i.value===!0&&f.innerLoading.value===!1&&(t>c?ue():Ke(!0))}))}function ct(){h.value===!1&&K.value!==null&&K.value.updatePosition()}function dt(t){t!==void 0&&Ce(t),n("popupShow",t),f.hasPopupOpen=!0,f.onControlFocusin(t)}function ft(t){t!==void 0&&Ce(t),n("popupHide",t),f.hasPopupOpen=!1,f.onControlFocusout(t)}function vt(){b=v.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?l["no-option"]!==void 0||e.onFilter!==void 0||o.value===!1:!0),H=v.platform.is.ios===!0&&b===!0&&e.useInput===!0?"fade":e.transitionShow}return xl(vt),kl(ct),vt(),Je(()=>{g!==null&&clearTimeout(g)}),Object.assign(u,{showPopup:pe,hidePopup:ve,removeAtIndex:Pe,add:tt,toggleOption:fe,getOptionIndex:()=>d.value,setOptionIndex:ye,moveOptionSelection:ze,filter:Se,updateMenuPosition:ct,updateInputValue:Oe,isOptionSelected:Ue,getEmittingOptionValue:et,isOptionDisabled:(...t)=>ge.value.apply(null,t)===!0,getOptionValue:(...t)=>N.value.apply(null,t),getOptionLabel:(...t)=>W.value.apply(null,t)}),Object.assign(f,{innerValue:r,fieldClass:w(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:F,targetRef:E,hasValue:A,showPopup:pe,floatingLabel:w(()=>e.hideSelected!==!0&&A.value===!0||typeof m.value=="number"||m.value.length>0||St(e.displayValue)),getControlChild:()=>{if(f.editable.value!==!1&&(h.value===!0||o.value!==!0||l["no-option"]!==void 0))return b===!0?Jt():Nt();f.hasPopupOpen===!0&&(f.hasPopupOpen=!1)},controlEvents:{onFocusin(t){f.onControlFocusin(t)},onFocusout(t){f.onControlFocusout(t,()=>{we(),be()})},onClick(t){if(Ne(t),b!==!0&&i.value===!0){be(),E.value!==null&&E.value.focus();return}pe(t)}},getControl:t=>{const c=Kt(),a=t===!0||h.value!==!0||b!==!0;if(e.useInput===!0)c.push(jt(t,a));else if(f.editable.value===!0){const z=a===!0?ie.value:void 0;c.push(V("input",{ref:a===!0?E:void 0,key:"d_t",class:"q-select__focus-target",id:a===!0?f.targetUid.value:void 0,value:k.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...z,onKeydown:at,onKeyup:nt,onKeypress:ut})),a===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&c.push(V("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:it}))}if(Y.value!==void 0&&e.disable!==!0&&Fe.value.length>0){const z=Fe.value.map(M=>V("option",{value:M,selected:!0}));c.push(V("select",{class:"hidden",name:Y.value,multiple:e.multiple},z))}const C=e.useInput===!0||a!==!0?void 0:f.splitAttrs.attributes.value;return V("div",{class:"q-field__native row items-center",...C},c)},getInnerAppend:()=>e.loading!==!0&&s.value!==!0&&e.hideDropdownIcon!==!0?[V(Qe,{class:"q-select__dropdown-icon"+(i.value===!0?" rotate-180":""),name:Ee.value})]:null}),Tt(f)}});export{Gl as Q,Qt as a,Cn as b,rn as c,sn as d,Rn as e,xn as f,cn as g,fn as h,wn as u};
