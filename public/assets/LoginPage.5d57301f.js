import{j as b,R as V,r as d,S as k,U as C,k as S,l as t,V as U,p as z,d as a,s as l,W as B,X as c,Y as N,Z as $,_ as q}from"./index.fd322d53.js";import{Q as x}from"./QImg.db37c726.js";import{Q as p}from"./QCardSection.64ffc5d5.js";import{l as f,Q as g}from"./layout.f54ea114.js";import{Q as I}from"./QForm.c8935c1a.js";import{Q as R}from"./QCard.b959a5ba.js";import{Q as j}from"./QPage.5abcef1e.js";import{Q as F,a as P}from"./QLayout.e3502a07.js";import{p as E}from"./planeacion.api.6ff597f7.js";import{u as D}from"./app.aade59bf.js";import"./use-dark.724c4dc5.js";import"./scroll.86be79e5.js";import"./QResizeObserver.936595b3.js";import"./index.2cf0d985.js";import"./ArticleResource.acb3dbf0.js";const J=l("div",{class:"row no-wrap items-center"},[l("div",{class:"col text-h6 ellipsis"},"Iniciar sesi\xF3n")],-1),la=b({__name:"LoginPage",setup(L){const n=V(),w=D(),h=U(),r=d(""),i=d(""),{authUser:v,isAuthenticated:u}=k(n),{flushDictionaries:y,fetchDictionaries:Q}=w;C(async()=>{if(u.value){await m(v.value.firstName);return}localStorage.clear(),y()});function _(){return{name:"welcome"}}async function A(){try{const{data:e}=await E.post("/auth/login",{email:r.value,password:i.value});n.setUser(e),await m(e.firstName)}catch{f.showErrorNotification("Authentication Failed")}}async function m(e){u&&(f.showSuccessNotification(`Bienvenid@ de vuelta, ${e}`),await Q(),await h.push(_()))}return(e,o)=>(z(),S(F,null,{default:t(()=>[a(P,null,{default:t(()=>[a(j,{class:"flex flex-center"},{default:t(()=>[l("div",{id:"particles-js",class:B(e.$q.dark.isActive?"dark_gradient":"normal_gradient")},null,2),a(c,{class:"absolute-top-right",color:"white",flat:"",icon:e.$q.dark.isActive?"nights_stay":"wb_sunny",round:"",onClick:o[0]||(o[0]=s=>e.$q.dark.toggle())},null,8,["icon"]),a(R,{class:"login-form",style:N(e.$q.platform.is.mobile?{width:"80%"}:{width:"30%"})},{default:t(()=>[a(x,{src:"https://pbs.twimg.com/media/EjzUi4lWsAApJJV?format=jpg&name=large"}),a(p,null,{default:t(()=>[a($,{class:"absolute tw-top-0 tw-right-6 tw-translate-y-[-50%] tw-bg-orange-600",size:"74px"},{default:t(()=>[a(q,{color:"white",name:"perm_identity"})]),_:1}),J]),_:1}),a(p,null,{default:t(()=>[a(I,{class:"q-gutter-md"},{default:t(()=>[a(g,{modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=s=>r.value=s),filled:"",label:"Usuario","lazy-rules":""},null,8,["modelValue"]),a(g,{modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=s=>i.value=s),filled:"",label:"Contrase\xF1a","lazy-rules":"",type:"password"},null,8,["modelValue"]),l("div",null,[a(c,{color:"primary",label:"Entrar",type:"button",onClick:A})])]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})]),_:1}))}});export{la as default};
