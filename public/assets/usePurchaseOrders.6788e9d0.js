import{p as a}from"./planeacion.api.7dcbe402.js";import{l as n}from"./layout.39273edf.js";import{a as d,u as h,b as y}from"./QChip.b591fbe4.js";import{r as p,w as l}from"./index.4e938c33.js";var o={getPurchaseOrders(r){return r?a.get("/purchase-orders/requisition-sub-budget"):a.get("/purchase-orders")},createPurchaseOrder(r){return a.post("/purchase-orders",r)},createPurchaseOrderFromRequisition(r){return a.post("/purchase-orders/requisition-sub-budget",r)},uploadFile(r,e){return a.post(`/files/purchase-orders/${r}`,e,{headers:{"Content-Type":"multipart/form-data"}})},getPurchaseDictionary(){return a.get("/purchase-orders/dictionary")}};const t=p(!1),i=p(""),m=async r=>{const{data:e}=await o.getPurchaseOrders(r);return e},g=async r=>{const{data:e}=i.value==="PRESUPUESTO"?await o.createPurchaseOrder(r):await o.createPurchaseOrderFromRequisition(r);return e},O=async()=>{const{data:r}=await o.getPurchaseDictionary();return r},b=()=>{const r=d(),{isLoading:e,isError:s,data:c,isFetching:u,refetch:P}=h({queryKey:["purchase-orders"],queryFn:()=>m(t.value),staleTime:1e3*60});return l(t,async()=>{await r.invalidateQueries(["purchase-orders"])}),{isLoading:e,isError:s,orders:c,isFetching:u,fromSubBudgetsModel:t,purchaseOrderType:i}},F=()=>{const r=d(),{isLoading:e,isError:s,mutateAsync:c,data:u}=y({mutationFn:g,onSuccess:async()=>{n.showSuccessNotification("Orden de compra creada con \xE9xito"),await r.invalidateQueries(["purchase-orders"])},onError:()=>{n.showErrorNotification("Error al crear orden de compra")}});return{purchaseOrder:u,createPurchaseOrder:c,isLoading:e,isError:s,fromSubBudgetsModel:t,purchaseOrderType:i}},v=()=>{const{isLoading:r,isError:e,data:s}=h({queryKey:["purchase-dictionary"],queryFn:O,staleTime:6e4});return{isLoading:r,isError:e,dictionary:s}};export{o as P,b as a,v as b,F as u};
