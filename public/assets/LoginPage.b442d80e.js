import{c as S,v as I,r as g,w as F,z as P,h as c,R as x,x as E,S as L,j as D,U as H,V as M,W,k as J,l as d,X as O,p as X,d as l,s as w,Y,Z as B,_ as Z,$ as G}from"./index.404f6180.js";import{Q as K,a as A}from"./QCard.f0638023.js";import{l as R,Q as ee,a as $,p as te}from"./layout.eb1e0f2e.js";import{Q as ae}from"./QPage.63d049a8.js";import{Q as ie,a as le}from"./QLayout.e7a368cf.js";import{u as ne}from"./app.b239fc10.js";import"./use-dark.ed1c6acc.js";import"./focus-manager.33224ae2.js";import"./index.2cf0d985.js";import"./scroll.75c71c19.js";import"./ActionResource.38ddfcc1.js";import"./LineResource.69b642be.js";import"./AreaResource.5166fcc1.js";import"./ArticleResource.d52eaf9f.js";const re={ratio:[String,Number]};function oe(e,o){return S(()=>{const s=Number(e.ratio||(o!==void 0?o.value:void 0));return isNaN(s)!==!0&&s>0?{paddingBottom:`${100/s}%`}:null})}const se=16/9;var ue=I({name:"QImg",props:{...re,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:se},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:o,emit:s}){const p=g(e.initialRatio),h=oe(e,p);let a=null,y=!1;const n=[g(null),g(Q())],r=g(0),m=g(!1),f=g(!1),q=S(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),_=S(()=>({width:e.width,height:e.height})),i=S(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),u=S(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));F(()=>v(),k);function v(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function Q(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function k(t){a!==null&&(clearTimeout(a),a=null),f.value=!1,t===null?(m.value=!1,n[r.value^1].value=Q()):m.value=!0,n[r.value].value=t}function T({target:t}){y!==!0&&(a!==null&&(clearTimeout(a),a=null),p.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,z(t,1))}function z(t,b){y===!0||b===1e3||(t.complete===!0?V(t):a=setTimeout(()=>{a=null,z(t,b+1)},50))}function V(t){y!==!0&&(r.value=r.value^1,n[r.value].value=null,m.value=!1,f.value=!1,s("load",t.currentSrc||t.src))}function j(t){a!==null&&(clearTimeout(a),a=null),m.value=!1,f.value=!0,n[r.value].value=null,n[r.value^1].value=Q(),s("error",t)}function N(t){const b=n[t].value,C={key:"img_"+t,class:i.value,style:u.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...b};return r.value===t?(C.class+=" q-img__image--waiting",Object.assign(C,{onLoad:T,onError:j})):C.class+=" q-img__image--loaded",c("div",{class:"q-img__container absolute-full",key:"img"+t},c("img",C))}function U(){return m.value!==!0?c("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},E(o[f.value===!0?"error":"default"])):c("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},o.loading!==void 0?o.loading():e.noSpinner===!0?void 0:[c(L,{color:e.spinnerColor,size:e.spinnerSize})])}return k(v()),P(()=>{y=!0,a!==null&&(clearTimeout(a),a=null)}),()=>{const t=[];return h.value!==null&&t.push(c("div",{key:"filler",style:h.value})),f.value!==!0&&(n[0].value!==null&&t.push(N(0)),n[1].value!==null&&t.push(N(1))),t.push(c(x,{name:"q-transition--fade"},U)),c("div",{class:q.value,style:_.value,role:"img","aria-label":e.alt},t)}}});const ce=w("img",{src:"https://cdn.quasar.dev/img/boy-avatar.png"},null,-1),de=w("div",{class:"row no-wrap items-center"},[w("div",{class:"col text-h6 ellipsis"}," Iniciar sesi\xF3n ")],-1),ke=D({__name:"LoginPage",setup(e){const o=H(),s=ne(),p=O(),h=g(""),a=g(""),{authUser:y,isAuthenticated:n}=M(o),{flushDictionaries:r,fetchDictionaries:m}=s;W(async()=>{if(n.value){await _(y.value.firstName);return}localStorage.clear(),r()});function f(){return{name:"welcome"}}async function q(){try{const{data:i}=await te.post("/auth/login",{email:h.value,password:a.value});o.setUser(i),await _(i.firstName)}catch{R.showErrorNotification("Authentication Failed")}}async function _(i){n&&(R.showSuccessNotification(`Bienvenid@ de vuelta, ${i}`),await m(),await p.push(f()))}return(i,u)=>(X(),J(ie,null,{default:d(()=>[l(le,null,{default:d(()=>[l(ae,{class:"flex flex-center"},{default:d(()=>[w("div",{id:"particles-js",class:Y(i.$q.dark.isActive?"dark_gradient":"normal_gradient")},null,2),l(B,{class:"absolute-top-right",color:"white",flat:"",icon:i.$q.dark.isActive?"nights_stay":"wb_sunny",round:"",onClick:u[0]||(u[0]=v=>i.$q.dark.toggle())},null,8,["icon"]),l(K,{class:"login-form",style:Z(i.$q.platform.is.mobile?{width:"80%"}:{width:"30%"})},{default:d(()=>[l(ue,{src:"https://pbs.twimg.com/media/EjzUi4lWsAApJJV?format=jpg&name=large"}),l(A,null,{default:d(()=>[l(G,{class:"absolute tw-top-0 tw-right-6 tw-translate-y-[-50%]",size:"74px"},{default:d(()=>[ce]),_:1}),de]),_:1}),l(A,null,{default:d(()=>[l(ee,{class:"q-gutter-md"},{default:d(()=>[l($,{modelValue:h.value,"onUpdate:modelValue":u[1]||(u[1]=v=>h.value=v),filled:"",label:"Usuario","lazy-rules":""},null,8,["modelValue"]),l($,{modelValue:a.value,"onUpdate:modelValue":u[2]||(u[2]=v=>a.value=v),filled:"",label:"Contrase\xF1a","lazy-rules":"",type:"password"},null,8,["modelValue"]),w("div",null,[l(B,{color:"primary",label:"Entrar",type:"button",onClick:q})])]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})]),_:1}))}});export{ke as default};
