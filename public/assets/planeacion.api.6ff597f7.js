import{a as f}from"./index.2cf0d985.js";import{R as m,ac as F}from"./index.fd322d53.js";let h,u=0;const r=new Array(256);for(let t=0;t<256;t++)r[t]=(t+256).toString(16).substring(1);const y=(()=>{const t=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(t!==void 0){if(t.randomBytes!==void 0)return t.randomBytes;if(t.getRandomValues!==void 0)return e=>{const n=new Uint8Array(e);return t.getRandomValues(n),n}}return e=>{const n=[];for(let o=e;o>0;o--)n.push(Math.floor(Math.random()*256));return n}})(),l=4096;function k(){(h===void 0||u+16>l)&&(u=0,h=y(l));const t=Array.prototype.slice.call(h,u,u+=16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,r[t[0]]+r[t[1]]+r[t[2]]+r[t[3]]+"-"+r[t[4]]+r[t[5]]+"-"+r[t[6]]+r[t[7]]+"-"+r[t[8]]+r[t[9]]+"-"+r[t[10]]+r[t[11]]+r[t[12]]+r[t[13]]+r[t[14]]+r[t[15]]}let c=[],p=[];function d(t){p=p.filter(e=>e!==t)}function x(t){d(t),p.push(t)}function R(t){d(t),p.length===0&&c.length>0&&(c[c.length-1](),c=[])}function b(t){p.length===0?t():c.push(t)}function T(t){c=c.filter(e=>e!==t)}var v={coreUrl:"https://nestjs-boilerplate-production.up.railway.app",apiUrl:"https://nestjs-boilerplate-production.up.railway.app/api",http:f.create({}),updateAccessToken(){const t=m();this.http.defaults.headers.common.Authorization=`Bearer ${t.accessToken}`},checkForExpiredToken(t){t.response&&t.response.status===401&&F.logout("/login")},apiRoute(t){return this.updateAccessToken(),`${this.apiUrl}${t}`},get(t,e){const n=this;return new Promise((o,a)=>{n.http.get(n.apiRoute(t),{params:e}).then(i=>{o(i)}).catch(i=>{n.checkForExpiredToken(i),a(i)})})},post(t,e,n={}){const o=this;return new Promise((a,i)=>{o.http.post(o.apiRoute(t),e,n).then(s=>{a(s)}).catch(s=>{o.checkForExpiredToken(s),i(s)})})},patch(t,e,n={}){const o=this;return new Promise((a,i)=>{o.http.patch(o.apiRoute(t),e,n).then(s=>{a(s)}).catch(s=>{o.checkForExpiredToken(s),i(s)})})},put(t,e,n={}){const o=this;return new Promise((a,i)=>{o.http.put(o.apiRoute(t),e,n).then(s=>{a(s)}).catch(s=>{o.checkForExpiredToken(s),i(s)})})},delete(t){const e=this;return new Promise((n,o)=>{e.http.delete(e.apiRoute(t)).then(a=>{n(a)}).catch(a=>{e.checkForExpiredToken(a),o(a)})})}};export{b as a,R as b,x as c,v as p,T as r,k as u};
