import{p as n}from"./planeacion.api.7dcbe402.js";import{l as o}from"./layout.39273edf.js";import{u as B,a as c,b as d}from"./QChip.b591fbe4.js";import{r as u}from"./index.4e938c33.js";var s={storeDetail(t,e){return n.post(`/budgets/${t}/budget-details`,e)},getBudgetDetailMonthBy(t,e){return n.get(`/budget-details-month?month=${t}&area=${e}`)},updateBudgetDetail(t,e,a){return n.patch(`/budgets/${t}/budget-details/${e}`,{total:+a.total,estimated_amount:+a.estimated_amount})}};const m=async({budgetId:t,budgetDetail:e})=>{const{data:a}=await s.storeDetail(t,e);return a},y=async(t,e)=>{const{data:a}=await s.getBudgetDetailMonthBy(t,e);return a},h=async({budgetDetail:t})=>{const{data:e}=await s.updateBudgetDetail(t.budget_id,t.id,t);return e},M=()=>{const t=c();return{storeBudgetDetailMutation:d({mutationFn:a=>m(a),onSuccess:async(a,r)=>{await t.invalidateQueries(["budget",r.budgetId]),o.showSuccessNotification("El bien se agreg\xF3 al presupuesto con \xE9xito")},onError:()=>{o.showErrorNotification("Error al agregar el bien al presupuesto")}})}},x=()=>{const t=u(""),e=u(),{isLoading:a,data:r,refetch:l,isFetching:g}=B({queryKey:["budgetDetailMonthBy",{month:t,area:e}],queryFn:({queryKey:p})=>{const[D,i]=p;return t.value&&e.value?y(i.month,i.area.alias):[]},refetchOnWindowFocus:!1});return{items:r,refetch:l,isLoading:a,isFetching:g,month:t,area:e}},F=()=>{const t=c();return{updateBudgetDetailMutation:d({mutationFn:h,onSuccess:async()=>{await t.invalidateQueries(["budgets"]),o.showSuccessNotification("El bien se actualiz\xF3 con \xE9xito")},onError:()=>{o.showErrorNotification("Error al actualizar el bien")}})}};export{F as a,x as b,M as u};
