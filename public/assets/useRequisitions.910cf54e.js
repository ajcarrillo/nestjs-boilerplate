import{p as r,l as n}from"./layout.e5b39b81.js";import{u,b as q,a as R}from"./QSelect.a01fc3f8.js";var o={getRequisitions(){return r.get("/requisitions")},getRequisition(i){return r.get(`/requisitions/${i}`)},storeRequisition(i){return r.post("/requisitions",i)},updateRequisition(i,t){return r.put(`/requisitions/${i}`,t)},uploadFile(i,t){return r.post(`/files/requisitions/${i}`,t,{headers:{"Content-Type":"multipart/form-data"}})},storeRequisitionDetail(i,t){return r.post(`/requisitions/${i}/details`,t)},getDictionary(){return r.get("/requisitions/dictionary")}};const l=async()=>{const{data:i}=await o.getRequisitions();return i},g=async i=>{const{data:t}=await o.getRequisition(i);return t},m=async i=>{const{data:t}=await o.storeRequisition(i);return t},E=async i=>{var c;const{id:t}=i,{requisition_number:e,estimated_amount:s,processing_date:a,preparation_date:d,area_id:y=(c=i.area)==null?void 0:c.id}=i,{data:p}=await o.updateRequisition(t,{requisition_number:e,estimated_amount:s,processing_date:a,preparation_date:d,area_id:y});return p},w=async()=>{const{data:i}=await o.getDictionary();return i},f=()=>{const{isLoading:i,isError:t,data:e,error:s}=u({queryKey:["requisitionsDictionary"],queryFn:w,staleTime:6e4});return{isLoading:i,isError:t,requisitionsDictionary:e,error:s}},D=i=>{const{isLoading:t,isError:e,data:s,error:a}=u({queryKey:["requisition",i],queryFn:()=>g(i),staleTime:6e5});return{isLoading:t,isError:e,requisition:s,error:a}},S=()=>({requisitionStoreMutations:q({mutationFn:m,onSuccess:()=>{n.showSuccessNotification("Requisici\xF3n creada con \xE9xito")},onError:()=>{n.showErrorNotification("Error al crear requisici\xF3n")}})}),_=()=>{const i=R();return{requisitionUpdateMutations:q({mutationFn:E,onSuccess:async e=>{await i.invalidateQueries(["requisition",e.requisition_number]),n.showSuccessNotification("Requisici\xF3n actualizada con \xE9xito")},onError:()=>{n.showErrorNotification("Error al actualizar requisici\xF3n")}})}},h=()=>{const{isLoading:i,isError:t,data:e,error:s}=u({queryKey:["requisitions"],queryFn:l,staleTime:6e4});return{isLoading:i,isError:t,requisitions:e,error:s}};export{o as R,_ as a,h as b,D as c,f as d,S as u};
