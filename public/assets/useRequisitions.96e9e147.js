import{p as r}from"./planeacion.api.1cf4c236.js";import{l as o}from"./layout.4b2b4fc6.js";import{u,a as d}from"./QChip.fc48aeaf.js";import{u as c}from"./useMutation.esm.1dca9e79.js";var n={getRequisitions(){return r.get("/requisitions")},getRequisition(i){return r.get(`/requisitions/${i}`)},storeRequisition(i){return delete i.area,r.post("/requisitions",i)},updateRequisition(i,t){return r.put(`/requisitions/${i}`,t)},uploadFile(i,t){return r.post(`/files/requisitions/${i}`,t,{headers:{"Content-Type":"multipart/form-data"}})},storeRequisitionDetail(i,t){return r.post(`/requisitions/${i}/details`,t)},getDictionary(){return r.get("/requisitions/dictionary")},removeRequisitionDetail(i,t){return r.delete(`/requisitions/${i}/details/${t}`)},deleteRequisition({id:i}){return r.delete(`/requisitions/${i}`)}};const p=async()=>{const{data:i}=await n.getRequisitions();return i},m=async i=>{const{data:t}=await n.getRequisition(i);return t},g=async i=>{const{data:t}=await n.storeRequisition(i);return t},E=async i=>{var q;const{id:t}=i,{requisition_number:e,estimated_amount:s,processing_date:a,preparation_date:l,area_id:y=(q=i.area)==null?void 0:q.id}=i,{data:R}=await n.updateRequisition(t,{requisition_number:e,estimated_amount:s,processing_date:a,preparation_date:l,area_id:y});return R},w=async()=>{const{data:i}=await n.getDictionary();return i},x=async({id:i})=>{const{data:t}=await n.deleteRequisition({id:i});return t},h=()=>{const{isLoading:i,isError:t,data:e,error:s}=u({queryKey:["requisitionsDictionary"],queryFn:w,staleTime:6e4});return{isLoading:i,isError:t,requisitionsDictionary:e,error:s}},$=i=>{const{isLoading:t,isError:e,data:s,error:a}=u({queryKey:["requisition",i],queryFn:()=>m(i),staleTime:6e5});return{isLoading:t,isError:e,requisition:s,error:a}},M=()=>({requisitionStoreMutations:c({mutationFn:g,onSuccess:()=>{o.showSuccessNotification("Requisici\xF3n creada con \xE9xito")},onError:()=>{o.showErrorNotification("Error al crear requisici\xF3n")}})}),N=()=>{const i=d();return{requisitionUpdateMutations:c({mutationFn:E,onSuccess:async e=>{await i.invalidateQueries(["requisition",e.id]),o.showSuccessNotification("Requisici\xF3n actualizada con \xE9xito")},onError:()=>{o.showErrorNotification("Error al actualizar requisici\xF3n")}})}},_=()=>{const{isLoading:i,isError:t,data:e,error:s}=u({queryKey:["requisitions"],queryFn:p,staleTime:6e4});return{isLoading:i,isError:t,requisitions:e,error:s}},v=()=>{const i=d(),{mutateAsync:t,isLoading:e,isError:s}=c({mutationFn:x,onSuccess:async()=>{await i.invalidateQueries(["requisitions"]),o.showSuccessNotification("Requisici\xF3n eliminada con \xE9xito")},onError:()=>{o.showErrorNotification("Error al eliminar requisici\xF3n")}});return{deleteRequisitionMutation:t,isDeleting:e,isDeletingError:s}};export{n as R,N as a,_ as b,v as c,$ as d,h as e,M as u};
