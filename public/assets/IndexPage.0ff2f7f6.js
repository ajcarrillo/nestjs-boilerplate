import{Q as x}from"./QInput.af5d33a8.js";import{Q as m,a as c}from"./QItemLabel.9fc93834.js";import{Q as l,a as I}from"./QTable.599b7865.js";import{Q as q}from"./QSelect.890a90f4.js";import{Q as D,a as h}from"./QTr.44ff5ccc.js";import{j as F,r as f,k as p,l as t,p as _,d as a,q as i,t as n,u as d,X as S,aj as Y}from"./index.94a2a2c4.js";import{e as C,f as P}from"./useSubBudgets.b42f51bf.js";import{T as E}from"./TablePage.cfcb1cda.js";import{d as T}from"./date.c481a073.js";import{F as U}from"./FilePreview.5c85482c.js";import"./layout.b5017cfe.js";import"./use-dark.4d6c2b3e.js";import"./planeacion.api.2f123763.js";import"./index.2cf0d985.js";import"./format.530b5a56.js";import"./scroll.dcc6a748.js";import"./QList.6a801bd8.js";import"./QCheckbox.3b045c53.js";import"./QChip.0a8cd9e9.js";import"./utils.esm.80f6f92b.js";import"./useMutation.esm.cf1ab3a1.js";import"./mutation.esm.a11809f3.js";import"./QCard.388c49b9.js";import"./QPage.42982557.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./QTooltip.b661aa61.js";import"./QCardSection.c5d91bb3.js";import"./QImg.2c00d1c6.js";import"./QSpace.67f8efee.js";const b=T.formatDate,_e=F({__name:"IndexPage",setup(M){const g="https://nestjs-boilerplate-production.up.railway.app",{subBudgetRequisitions:v}=C(),{search:w,subBudgetDictionary:y,subBudgetDictionaryIsFetching:R}=P(),k=[{name:"consecutiveId",field:"consecutiveId",label:"ID",align:"left"},{name:"requisition_number",field:"requisition_number",label:"N\xFAm. Requisici\xF3n"},{name:"estimated_amount",field:"estimated_amount",label:"Monto Estimado"},{name:"preparation_date",field:o=>b(o.preparation_date,"YYYY-MM-DD"),label:"Fecha de Preparaci\xF3n",align:"left"},{name:"processing_date",field:o=>b(o.processing_date,"YYYY-MM-DD"),label:"Fecha de Procesamiento",align:"left"},{name:"area",field:o=>o.area.description,label:"\xC1rea",align:"left"},{name:"event",field:o=>o.subBudget.event,label:"Evento",align:"left"},{name:"file",field:"file",label:"Archivo",align:"left"}];f(void 0);const s=f("");async function V(o,r){if(o===""){r();return}r(()=>{w.value=o})}async function B(o,r){console.log({value:o,initialValue:r})}return(o,r)=>(_(),p(E,null,{"card-body":t(()=>[a(I,{columns:k,filter:s.value,rows:d(v),"rows-per-page-options":[10],title:"Requisiciones","wrap-cells":""},{"top-right":t(()=>[a(x,{modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=e=>s.value=e),clearable:"",dense:"",label:"Buscar",outlined:""},null,8,["modelValue"])]),body:t(e=>[a(D,{props:e},{default:t(()=>[a(l,{key:"consecutiveId",props:e},{default:t(()=>[a(m,{class:"text-primary tw-font-bold",clickable:"",to:{name:"sub-budgets.edit.requisition",params:{id:e.row.subBudget.id,reqId:e.row.id}}},{default:t(()=>[a(c,null,{default:t(()=>[i(n((e.rowIndex+1).toString()),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1032,["props"]),a(l,{key:"requisition_number",props:e},{default:t(()=>[i(n(e.row.requisition_number),1)]),_:2},1032,["props"]),a(l,{key:"estimated_amount",props:e},{default:t(()=>[i(n(e.row.estimated_amount),1)]),_:2},1032,["props"]),a(l,{key:"preparation_date",props:e},{default:t(()=>[i(n(e.row.preparation_date),1)]),_:2},1032,["props"]),a(l,{key:"processing_date",props:e},{default:t(()=>[i(n(e.row.processing_date),1)]),_:2},1032,["props"]),a(l,{key:"area",props:e},{default:t(()=>[i(n(e.row.area.description),1)]),_:2},1032,["props"]),a(l,{key:"event",props:e},{default:t(()=>[i(n(e.row.subBudget.event)+" ",1),a(h,{modelValue:e.row.subBudget,"onUpdate:modelValue":u=>e.row.subBudget=u,buttons:"","label-cancel":"Cancelar","label-set":"Guardar",persistent:"",onSave:B},{default:t(u=>[a(q,{modelValue:u.value,"onUpdate:modelValue":Q=>u.value=Q,class:"full-width",clearable:"",dense:"","emit-value":"","input-debounce":"600",label:"Evento","map-options":"","option-label":"event","option-value":"id",options:d(y),outlined:"","use-input":"",onFilter:V},{"no-option":t(()=>[a(m,null,{default:t(()=>[a(c,{class:"text-grey"},{default:t(()=>[i(" Sin resultados ")]),_:1})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),a(l,{key:"file",props:e},{default:t(()=>[e.row.file?(_(),p(U,{key:0,"file-url":`${d(g)}/api/files/preview/${e.row.file}`},{activator:t(({showPreview:u})=>[a(S,{color:"primary",flat:"","no-caps":"",onClick:u},{default:t(()=>[i(" Ver archivo ")]),_:2},1032,["onClick"])]),_:2},1032,["file-url"])):Y("",!0)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["filter","rows"])]),_:1}))}});export{_e as default};
