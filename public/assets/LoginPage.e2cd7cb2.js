import{c as S,v as U,r as g,w as F,z as P,h as c,R as x,x as E,S as L,j as D,U as H,V as M,W,k as J,l as d,X as O,p as X,d as i,s as C,Y,Z as B,_ as Z,$ as G,a0 as K}from"./index.c5fc2f56.js";import{Q as ee,a as A}from"./QCard.756ff799.js";import{l as R,Q as te,a as $,p as ae}from"./layout.92ba84c8.js";import{Q as ie}from"./QPage.f5ac574f.js";import{Q as le,a as ne}from"./QLayout.00c5924d.js";import{u as re}from"./app.1d87b8aa.js";import"./use-dark.bc45d8f2.js";import"./focus-manager.33224ae2.js";import"./index.2cf0d985.js";import"./scroll.fe196b7a.js";import"./ActionResource.827a12db.js";import"./LineResource.0b7b21ce.js";import"./AreaResource.bda9c94b.js";import"./ArticleResource.23f326fc.js";const oe={ratio:[String,Number]};function se(e,o){return S(()=>{const s=Number(e.ratio||(o!==void 0?o.value:void 0));return isNaN(s)!==!0&&s>0?{paddingBottom:`${100/s}%`}:null})}const ue=16/9;var ce=U({name:"QImg",props:{...oe,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ue},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:o,emit:s}){const w=g(e.initialRatio),h=se(e,w);let a=null,y=!1;const n=[g(null),g(q())],r=g(0),m=g(!1),f=g(!1),Q=S(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),p=S(()=>({width:e.width,height:e.height})),l=S(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),u=S(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));F(()=>v(),k);function v(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function q(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function k(t){a!==null&&(clearTimeout(a),a=null),f.value=!1,t===null?(m.value=!1,n[r.value^1].value=q()):m.value=!0,n[r.value].value=t}function T({target:t}){y!==!0&&(a!==null&&(clearTimeout(a),a=null),w.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,z(t,1))}function z(t,_){y===!0||_===1e3||(t.complete===!0?V(t):a=setTimeout(()=>{a=null,z(t,_+1)},50))}function V(t){y!==!0&&(r.value=r.value^1,n[r.value].value=null,m.value=!1,f.value=!1,s("load",t.currentSrc||t.src))}function j(t){a!==null&&(clearTimeout(a),a=null),m.value=!1,f.value=!0,n[r.value].value=null,n[r.value^1].value=q(),s("error",t)}function N(t){const _=n[t].value,b={key:"img_"+t,class:l.value,style:u.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,..._};return r.value===t?(b.class+=" q-img__image--waiting",Object.assign(b,{onLoad:T,onError:j})):b.class+=" q-img__image--loaded",c("div",{class:"q-img__container absolute-full",key:"img"+t},c("img",b))}function I(){return m.value!==!0?c("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},E(o[f.value===!0?"error":"default"])):c("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},o.loading!==void 0?o.loading():e.noSpinner===!0?void 0:[c(L,{color:e.spinnerColor,size:e.spinnerSize})])}return k(v()),P(()=>{y=!0,a!==null&&(clearTimeout(a),a=null)}),()=>{const t=[];return h.value!==null&&t.push(c("div",{key:"filler",style:h.value})),f.value!==!0&&(n[0].value!==null&&t.push(N(0)),n[1].value!==null&&t.push(N(1))),t.push(c(x,{name:"q-transition--fade"},I)),c("div",{class:Q.value,style:p.value,role:"img","aria-label":e.alt},t)}}});const de=C("div",{class:"row no-wrap items-center"},[C("div",{class:"col text-h6 ellipsis"}," Iniciar sesi\xF3n ")],-1),ke=D({__name:"LoginPage",setup(e){const o=H(),s=re(),w=O(),h=g(""),a=g(""),{authUser:y,isAuthenticated:n}=M(o),{flushDictionaries:r,fetchDictionaries:m}=s;W(async()=>{if(n.value){await p(y.value.firstName);return}localStorage.clear(),r()});function f(){return{name:"welcome"}}async function Q(){try{const{data:l}=await ae.post("/auth/login",{email:h.value,password:a.value});o.setUser(l),await p(l.firstName)}catch{R.showErrorNotification("Authentication Failed")}}async function p(l){n&&(R.showSuccessNotification(`Bienvenid@ de vuelta, ${l}`),await m(),await w.push(f()))}return(l,u)=>(X(),J(le,null,{default:d(()=>[i(ne,null,{default:d(()=>[i(ie,{class:"flex flex-center"},{default:d(()=>[C("div",{id:"particles-js",class:Y(l.$q.dark.isActive?"dark_gradient":"normal_gradient")},null,2),i(B,{class:"absolute-top-right",color:"white",flat:"",icon:l.$q.dark.isActive?"nights_stay":"wb_sunny",round:"",onClick:u[0]||(u[0]=v=>l.$q.dark.toggle())},null,8,["icon"]),i(ee,{class:"login-form",style:Z(l.$q.platform.is.mobile?{width:"80%"}:{width:"30%"})},{default:d(()=>[i(ce,{src:"https://pbs.twimg.com/media/EjzUi4lWsAApJJV?format=jpg&name=large"}),i(A,null,{default:d(()=>[i(G,{class:"absolute tw-top-0 tw-right-6 tw-translate-y-[-50%] tw-bg-orange-600",size:"74px"},{default:d(()=>[i(K,{color:"white",name:"perm_identity"})]),_:1}),de]),_:1}),i(A,null,{default:d(()=>[i(te,{class:"q-gutter-md"},{default:d(()=>[i($,{modelValue:h.value,"onUpdate:modelValue":u[1]||(u[1]=v=>h.value=v),filled:"",label:"Usuario","lazy-rules":""},null,8,["modelValue"]),i($,{modelValue:a.value,"onUpdate:modelValue":u[2]||(u[2]=v=>a.value=v),filled:"",label:"Contrase\xF1a","lazy-rules":"",type:"password"},null,8,["modelValue"]),C("div",null,[i(B,{color:"primary",label:"Entrar",type:"button",onClick:Q})])]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})]),_:1}))}});export{ke as default};
