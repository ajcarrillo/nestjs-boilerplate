import{p as s}from"./planeacion.api.7dcbe402.js";import{l as n}from"./layout.39273edf.js";import{u,b as q,a as p}from"./QChip.b591fbe4.js";var o={getRequisitions(){return s.get("/requisitions")},getRequisition(i){return s.get(`/requisitions/${i}`)},storeRequisition(i){return delete i.area,s.post("/requisitions",i)},updateRequisition(i,t){return s.put(`/requisitions/${i}`,t)},uploadFile(i,t){return s.post(`/files/requisitions/${i}`,t,{headers:{"Content-Type":"multipart/form-data"}})},storeRequisitionDetail(i,t){return s.post(`/requisitions/${i}/details`,t)},getDictionary(){return s.get("/requisitions/dictionary")},removeRequisitionDetail(i,t){return s.delete(`/requisitions/${i}/details/${t}`)}};const R=async()=>{const{data:i}=await o.getRequisitions();return i},m=async i=>{const{data:t}=await o.getRequisition(i);return t},g=async i=>{const{data:t}=await o.storeRequisition(i);return t},E=async i=>{var c;const{id:t}=i,{requisition_number:e,estimated_amount:r,processing_date:a,preparation_date:d,area_id:y=(c=i.area)==null?void 0:c.id}=i,{data:l}=await o.updateRequisition(t,{requisition_number:e,estimated_amount:r,processing_date:a,preparation_date:d,area_id:y});return l},w=async()=>{const{data:i}=await o.getDictionary();return i},D=()=>{const{isLoading:i,isError:t,data:e,error:r}=u({queryKey:["requisitionsDictionary"],queryFn:w,staleTime:6e4});return{isLoading:i,isError:t,requisitionsDictionary:e,error:r}},S=i=>{const{isLoading:t,isError:e,data:r,error:a}=u({queryKey:["requisition",i],queryFn:()=>m(i),staleTime:6e5});return{isLoading:t,isError:e,requisition:r,error:a}},$=()=>({requisitionStoreMutations:q({mutationFn:g,onSuccess:()=>{n.showSuccessNotification("Requisici\xF3n creada con \xE9xito")},onError:()=>{n.showErrorNotification("Error al crear requisici\xF3n")}})}),h=()=>{const i=p();return{requisitionUpdateMutations:q({mutationFn:E,onSuccess:async e=>{await i.invalidateQueries(["requisition",e.id]),n.showSuccessNotification("Requisici\xF3n actualizada con \xE9xito")},onError:()=>{n.showErrorNotification("Error al actualizar requisici\xF3n")}})}},M=()=>{const{isLoading:i,isError:t,data:e,error:r}=u({queryKey:["requisitions"],queryFn:R,staleTime:6e4});return{isLoading:i,isError:t,requisitions:e,error:r}};export{o as R,h as a,M as b,S as c,D as d,$ as u};
