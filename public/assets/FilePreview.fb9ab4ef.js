import{p as u,l as c}from"./layout.7b62d204.js";import{u as x,b as y,Q as h}from"./QChip.b9af2c8a.js";import{a as F,Q as E}from"./QSpace.52176573.js";import{j as Q,r as S,c as _,p as f,ag as g,d as i,l as a,q as C,X as w,u as v,k as b,ap as U,F as V,b2 as k,b3 as N,s as I}from"./index.c6535512.js";import{Q as j,a as m}from"./QCard.5e2e9fe0.js";import{a as R}from"./format.e5167fe8.js";import{Q as B}from"./QImg.43960a66.js";import{_ as M}from"./plugin-vue_export-helper.21dcd24c.js";var d={getRequisitions(){return u.get("/requisitions")},getRequisition(e){return u.get(`/requisitions/${e}`)},storeRequisition(e){return u.post("/requisitions",e)},updateRequisition(e,t){return u.put(`/requisitions/${e}`,t)},uploadFile(e,t){return u.post(`/files/requisitions/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}})}};const T=async()=>{const{data:e}=await d.getRequisitions();return e},L=async e=>{const{data:t}=await d.getRequisition(e);return t},P=async e=>{const{data:t}=await d.storeRequisition(e);return t},$=async e=>{const{id:t}=e,{requisition_number:s,estimated_amount:o,processing_date:r,preparation_date:p}=e,{data:n}=await d.updateRequisition(t,{requisition_number:s,estimated_amount:o,processing_date:r,preparation_date:p});return n},ee=e=>{const{isLoading:t,isError:s,data:o,error:r}=x({queryKey:["requisition",e],queryFn:()=>L(e),staleTime:6e5});return{isLoading:t,isError:s,requisition:o,error:r}},te=()=>({requisitionStoreMutations:y({mutationFn:P,onSuccess:()=>{c.showSuccessNotification("Requisici\xF3n creada con \xE9xito")},onError:()=>{c.showErrorNotification("Error al crear requisici\xF3n")}})}),ie=()=>({requisitionUpdateMutations:y({mutationFn:$,onSuccess:()=>{c.showSuccessNotification("Requisici\xF3n actualizada con \xE9xito")},onError:()=>{c.showErrorNotification("Error al actualizar requisici\xF3n")}})}),se=()=>{const{isLoading:e,isError:t,data:s,error:o}=x({queryKey:["requisitions"],queryFn:T,staleTime:6e4});return{isLoading:e,isError:t,requisitions:s,error:o}};const z=e=>(k("data-v-7d9adefe"),e=e(),N(),e),A=z(()=>I("div",{class:"text-h6"},"Archivo adjunto",-1)),D=["data"],K=Q({__name:"FilePreview",props:{fileUrl:null},setup(e){const t=e,s=S(!1),o=_(()=>{const n=t.fileUrl.split(".").pop().toLowerCase();return["jpg","jpeg","png"].includes(n)}),r=_(()=>t.fileUrl.split(".").pop().toLowerCase()==="pdf"),p=()=>{s.value=!0};return(n,l)=>(f(),g(V,null,[i(w,{color:"primary","fab-mini":"",icon:"o_preview",onClick:p},{default:a(()=>[i(F,{class:"bg-white text-primary"},{default:a(()=>[C("Ver archivo")]),_:1})]),_:1}),i(h,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=q=>s.value=q)},{default:a(()=>[i(j,{class:"custom-width custom-height"},{default:a(()=>[i(m,null,{default:a(()=>[A]),_:1}),i(R),i(m,{class:"scroll preview-file"},{default:a(()=>[v(o)?(f(),b(B,{key:0,src:e.fileUrl},null,8,["src"])):v(r)?(f(),g("object",{key:1,class:"tw-w-full tw-h-full",data:e.fileUrl},null,8,D)):U("",!0)]),_:1}),i(R),i(m,{class:"tw-flex"},{default:a(()=>[i(E),i(w,{color:"primary",label:"Cerrar",unelevated:"",onClick:l[0]||(l[0]=q=>s.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});var oe=M(K,[["__scopeId","data-v-7d9adefe"]]);export{oe as F,d as R,ie as a,se as b,ee as c,te as u};
