import{p as i,l as r}from"./layout.885dabeb.js";import{u as d,a as o,b as c}from"./QChip.24db411d.js";function B(e,t){return e[t]}const b=e=>{const t=new FormData,u=["requisition_number","preparation_date","processing_date","estimated_amount","area_id","sub_budget_id"];for(const a of u)t.append(a,B(e,a).toString());const s=[{field:"file",value:e.file}];for(const{field:a,value:g}of s)g&&t.append(a,g);return t};var n={getSubBudgets(){return i.get("/sub-budgets")},createSubBudget(e){return i.post("/sub-budgets",e)},createSubBudgetAdjustment(e){return i.post("/sub-budget-adjustment",e)},getSubBudget(e){return i.get(`/sub-budgets/${e}`)},updateSubBudget(e,t){const{id:u,...s}=t;return i.patch(`/sub-budgets/${e}`,s)},getSubBudgetRequisitionsDictionary(){return i.get("/sub-budgets/requisitions/dictionary")},getSubBudgetRequisitions(){return i.get("/sub-budgets/requisitions/all")},createSubBudgetRequisition(e){const t=b(e);return i.post(`/sub-budgets/${e.sub_budget_id}/requisitions`,t,{headers:{"Content-Type":"multipart/form-data"}})},editSubBudgetRequisition(e){delete e.file;const t=b(e);return i.patch(`/sub-budgets/${e.sub_budget_id}/requisitions/${e.id}`,t,{headers:{"Content-Type":"multipart/form-data"}})},getSubBudgetRequisition(e,t){return i.get(`/sub-budgets/${e}/requisitions/${t}`)}};const S=async()=>(await n.getSubBudgets()).data,q=async e=>(await n.createSubBudget(e)).data,y=async({createSubBudgetAdjustmentDto:e})=>(await n.createSubBudgetAdjustment(e)).data,p=async e=>(await n.getSubBudget(e)).data,R=async()=>(await n.getSubBudgetRequisitionsDictionary()).data,l=async()=>(await n.getSubBudgetRequisitions()).data,m=async({createRequisitionSubBudgetDto:e})=>(await n.createSubBudgetRequisition(e)).data,f=async({dto:e})=>(await n.editSubBudgetRequisition(e)).data,F=async({subBudgetId:e,requisitionId:t})=>(await n.getSubBudgetRequisition(e,t)).data,w=async({subBudgetId:e,updateSubBudgetDto:t})=>(await n.updateSubBudget(e,t)).data,Q=()=>({subBudgetQuery:d({queryKey:["subBudgets"],queryFn:S,staleTime:6e5})}),_=e=>({subBudgetQuery:d({queryKey:["subBudget",e],queryFn:()=>p(e),staleTime:6e4})}),C=()=>{const e=o();return{createSubBudgetMutation:c({mutationFn:q,onSuccess:async()=>{r.showSuccessNotification("Presupuesto creado exitosamente"),await e.invalidateQueries(["subBudgets"])}})}},M=()=>{const e=o();return{updateSubBudgetMutation:c({mutationFn:w,onSuccess:async(u,s)=>{r.showSuccessNotification("Presupuesto actualizado exitosamente"),await e.invalidateQueries(["subBudgets"]),await e.setQueryData(["subBudget",s.subBudgetId],u)}})}},x=()=>{const e=o();return{createSubBudgetAdjustmentMutation:c({mutationFn:y,onSuccess:async()=>{r.showSuccessNotification("Adecuaci\xF3n creada exitosamente"),await e.invalidateQueries(["subBudgets"])}})}},A=()=>{const{isLoading:e,isFetching:t,data:u}=d({queryKey:["subBudgetRequisitionsDictionary"],queryFn:R,staleTime:6e5});return{subBudgetReqDictionaryIsLoading:e,subBudgetReqDictionaryIsFetching:t,subBudgetReqDictionary:u}},j=()=>{const{isLoading:e,isFetching:t,data:u}=d({queryKey:["subBudgetRequisitions"],queryFn:l,staleTime:6e5});return{subBudgetRequisitionsIsLoading:e,subBudgetRequisitionsIsFetching:t,subBudgetRequisitions:u}},v=()=>{const e=o();return{createSubBudgetRequisitionMutation:c({mutationFn:m,onSuccess:async()=>{r.showSuccessNotification("Requisici\xF3n creada exitosamente"),await e.invalidateQueries(["subBudgetRequisitions"])}})}},T=()=>{const e=o();return{editSubBudgetRequisitionMutation:c({mutationFn:f,onSuccess:async(u,s)=>{r.showSuccessNotification("Requisici\xF3n editada exitosamente"),e.setQueryData(["subBudgetRequisition",s.dto.sub_budget_id,s.dto.id],u),await e.invalidateQueries(["subBudgetRequisitions"])}})}},$=({subBudgetId:e,requisitionId:t})=>{o();const{isLoading:u,isFetching:s,data:a}=d({queryKey:["subBudgetRequisition",e,t],queryFn:()=>F({subBudgetId:e,requisitionId:t}),staleTime:1e3*60});return{subBudgetRequisitionIsLoading:u,subBudgetRequisitionIsFetching:s,subBudgetRequisition:a}};export{Q as a,x as b,C as c,M as d,j as e,_ as f,v as g,T as h,$ as i,A as u};
