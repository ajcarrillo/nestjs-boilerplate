import{p as s}from"./planeacion.api.88477cd4.js";import{l as u}from"./layout.6863befb.js";import{a as n,u as p}from"./useQuery.esm.750a8d8b.js";import{u as y}from"./useMutation.esm.74dfadc9.js";import{r as m}from"./index.2447aa50.js";var c={getPurchaseOrders(r){return r?s.get("/purchase-orders/requisition-sub-budget"):s.get("/purchase-orders")},createPurchaseOrder(r){return s.post("/purchase-orders",r)},createPurchaseOrderFromRequisition(r){return s.post("/purchase-orders/requisition-sub-budget",r)},uploadFile(r,e){return s.post(`/files/purchase-orders/${r}`,e,{headers:{"Content-Type":"multipart/form-data"}})},getPurchaseDictionary(){return s.get("/purchase-orders/dictionary")},deletePurchaseOrder({id:r,requisitionType:e}){return s.delete(`/purchase-orders/${r}?requisitionType=${e}`)}};const d=m(""),O=async r=>{const{data:e}=await c.getPurchaseOrders(r);return e},P=async r=>{const{data:e}=d.value==="PRESUPUESTO"?await c.createPurchaseOrder(r):await c.createPurchaseOrderFromRequisition(r);return e},g=async()=>{const{data:r}=await c.getPurchaseDictionary();return r},D=({fromSubBudgets:r,selectedBudget:e})=>{n();const{isLoading:a,isError:t,data:o,isFetching:i,refetch:h}=p({queryKey:["purchase-orders",r,e],queryFn:()=>O(r.value),staleTime:1e3*60});return{isLoading:a,isError:t,orders:o,isFetching:i,purchaseOrderType:d}},S=({fromSubBudgets:r})=>{const e=n(),{isLoading:a,isError:t,mutateAsync:o,data:i}=y({mutationFn:P,onSuccess:async()=>{u.showSuccessNotification("Orden de compra creada con \xE9xito"),await e.invalidateQueries(["purchase-orders"])},onError:()=>{u.showErrorNotification("Error al crear orden de compra")}});return{purchaseOrder:i,createPurchaseOrder:o,isLoading:a,isError:t,purchaseOrderType:d}},b=()=>{const{isLoading:r,isError:e,data:a}=p({queryKey:["purchase-dictionary"],queryFn:g,staleTime:6e4});return{isLoading:r,isError:e,dictionary:a}},T=({fromSubBudgets:r})=>{const e=n(),{isLoading:a,isError:t,mutateAsync:o}=y({mutationFn:async({id:i,requisitionType:h})=>{const{data:l}=await c.deletePurchaseOrder({id:i,requisitionType:h});return l},onSuccess:async()=>{u.showSuccessNotification("Orden de compra eliminada con \xE9xito"),await e.invalidateQueries(["purchase-orders"])},onError:()=>{u.showErrorNotification("Error al eliminar orden de compra")}});return{deletePurchaseOrder:o,isDeleteingPurchaseOrder:a,isErrorDeletingPurchaseOrder:t}};export{c as P,D as a,T as b,b as c,S as u};
